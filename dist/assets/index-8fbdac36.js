(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Dp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function v0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var Ip={exports:{}},rl={},Mp={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi=Symbol.for("react.element"),_0=Symbol.for("react.portal"),x0=Symbol.for("react.fragment"),w0=Symbol.for("react.strict_mode"),k0=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),E0=Symbol.for("react.forward_ref"),C0=Symbol.for("react.suspense"),N0=Symbol.for("react.memo"),b0=Symbol.for("react.lazy"),Lh=Symbol.iterator;function A0(t){return t===null||typeof t!="object"?null:(t=Lh&&t[Lh]||t["@@iterator"],typeof t=="function"?t:null)}var Op={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rp=Object.assign,Pp={};function Fr(t,e,n){this.props=t,this.context=e,this.refs=Pp,this.updater=n||Op}Fr.prototype.isReactComponent={};Fr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jp(){}jp.prototype=Fr.prototype;function mu(t,e,n){this.props=t,this.context=e,this.refs=Pp,this.updater=n||Op}var gu=mu.prototype=new jp;gu.constructor=mu;Rp(gu,Fr.prototype);gu.isPureReactComponent=!0;var Bh=Array.isArray,Fp=Object.prototype.hasOwnProperty,yu={current:null},Vp={key:!0,ref:!0,__self:!0,__source:!0};function Lp(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Fp.call(e,s)&&!Vp.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:Xi,type:t,key:i,ref:o,props:r,_owner:yu.current}}function D0(t,e){return{$$typeof:Xi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xi}function I0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qh=/\/+/g;function Ol(t,e){return typeof t=="object"&&t!==null&&t.key!=null?I0(""+t.key):e.toString(36)}function Vo(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xi:case _0:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+Ol(o,0):s,Bh(r)?(n="",t!=null&&(n=t.replace(qh,"$&/")+"/"),Vo(r,e,n,"",function(c){return c})):r!=null&&(vu(r)&&(r=D0(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(qh,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",Bh(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+Ol(i,a);o+=Vo(i,e,n,l,r)}else if(l=A0(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+Ol(i,a++),o+=Vo(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yo(t,e,n){if(t==null)return t;var s=[],r=0;return Vo(t,s,"","",function(i){return e.call(n,i,r++)}),s}function M0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lt={current:null},Lo={transition:null},O0={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:Lo,ReactCurrentOwner:yu};function Bp(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:yo,forEach:function(t,e,n){yo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yo(t,function(){e++}),e},toArray:function(t){return yo(t,function(e){return e})||[]},only:function(t){if(!vu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=Fr;Z.Fragment=x0;Z.Profiler=k0;Z.PureComponent=mu;Z.StrictMode=w0;Z.Suspense=C0;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O0;Z.act=Bp;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Rp({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=yu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Fp.call(e,l)&&!Vp.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:Xi,type:t.type,key:r,ref:i,props:s,_owner:o}};Z.createContext=function(t){return t={$$typeof:S0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:T0,_context:t},t.Consumer=t};Z.createElement=Lp;Z.createFactory=function(t){var e=Lp.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:E0,render:t}};Z.isValidElement=vu;Z.lazy=function(t){return{$$typeof:b0,_payload:{_status:-1,_result:t},_init:M0}};Z.memo=function(t,e){return{$$typeof:N0,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Lo.transition;Lo.transition={};try{t()}finally{Lo.transition=e}};Z.unstable_act=Bp;Z.useCallback=function(t,e){return lt.current.useCallback(t,e)};Z.useContext=function(t){return lt.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return lt.current.useDeferredValue(t)};Z.useEffect=function(t,e){return lt.current.useEffect(t,e)};Z.useId=function(){return lt.current.useId()};Z.useImperativeHandle=function(t,e,n){return lt.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return lt.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return lt.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return lt.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return lt.current.useReducer(t,e,n)};Z.useRef=function(t){return lt.current.useRef(t)};Z.useState=function(t){return lt.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return lt.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return lt.current.useTransition()};Z.version="18.3.1";Mp.exports=Z;var K=Mp.exports;const R0=Dp(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0=K,j0=Symbol.for("react.element"),F0=Symbol.for("react.fragment"),V0=Object.prototype.hasOwnProperty,L0=P0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B0={key:!0,ref:!0,__self:!0,__source:!0};function qp(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)V0.call(e,s)&&!B0.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:j0,type:t,key:i,ref:o,props:r,_owner:L0.current}}rl.Fragment=F0;rl.jsx=qp;rl.jsxs=qp;Ip.exports=rl;var m=Ip.exports,uc={},zp={exports:{}},Nt={},Up={exports:{}},Wp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,O){var R=I.length;I.push(O);e:for(;0<R;){var V=R-1>>>1,H=I[V];if(0<r(H,O))I[V]=O,I[R]=H,R=V;else break e}}function n(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var O=I[0],R=I.pop();if(R!==O){I[0]=R;e:for(var V=0,H=I.length,ze=H>>>1;V<ze;){var be=2*(V+1)-1,Q=I[be],te=be+1,Re=I[te];if(0>r(Q,R))te<H&&0>r(Re,Q)?(I[V]=Re,I[te]=R,V=te):(I[V]=Q,I[be]=R,V=be);else if(te<H&&0>r(Re,R))I[V]=Re,I[te]=R,V=te;else break e}}return O}function r(I,O){var R=I.sortIndex-O.sortIndex;return R!==0?R:I.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,g=!1,y=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(I){for(var O=n(c);O!==null;){if(O.callback===null)s(c);else if(O.startTime<=I)s(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function k(I){if(_=!1,v(I),!y)if(n(l)!==null)y=!0,q(w);else{var O=n(c);O!==null&&U(k,O.startTime-I)}}function w(I,O){y=!1,_&&(_=!1,f(T),T=-1),g=!0;var R=d;try{for(v(O),h=n(l);h!==null&&(!(h.expirationTime>O)||I&&!D());){var V=h.callback;if(typeof V=="function"){h.callback=null,d=h.priorityLevel;var H=V(h.expirationTime<=O);O=t.unstable_now(),typeof H=="function"?h.callback=H:h===n(l)&&s(l),v(O)}else s(l);h=n(l)}if(h!==null)var ze=!0;else{var be=n(c);be!==null&&U(k,be.startTime-O),ze=!1}return ze}finally{h=null,d=R,g=!1}}var S=!1,E=null,T=-1,b=5,C=-1;function D(){return!(t.unstable_now()-C<b)}function A(){if(E!==null){var I=t.unstable_now();C=I;var O=!0;try{O=E(!0,I)}finally{O?P():(S=!1,E=null)}}else S=!1}var P;if(typeof p=="function")P=function(){p(A)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,$=j.port2;j.port1.onmessage=A,P=function(){$.postMessage(null)}}else P=function(){x(A,0)};function q(I){E=I,S||(S=!0,P())}function U(I,O){T=x(function(){I(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,q(w))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(d){case 1:case 2:case 3:var O=3;break;default:O=d}var R=d;d=O;try{return I()}finally{d=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,O){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var R=d;d=I;try{return O()}finally{d=R}},t.unstable_scheduleCallback=function(I,O,R){var V=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?V+R:V):R=V,I){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=R+H,I={id:u++,callback:O,priorityLevel:I,startTime:R,expirationTime:H,sortIndex:-1},R>V?(I.sortIndex=R,e(c,I),n(l)===null&&I===n(c)&&(_?(f(T),T=-1):_=!0,U(k,R-V))):(I.sortIndex=H,e(l,I),y||g||(y=!0,q(w))),I},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(I){var O=d;return function(){var R=d;d=O;try{return I.apply(this,arguments)}finally{d=R}}}})(Wp);Up.exports=Wp;var q0=Up.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0=K,Et=q0;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gp=new Set,mi={};function zs(t,e){wr(t,e),wr(t+"Capture",e)}function wr(t,e){for(mi[t]=e,t=0;t<e.length;t++)Gp.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=Object.prototype.hasOwnProperty,U0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zh={},Uh={};function W0(t){return hc.call(Uh,t)?!0:hc.call(zh,t)?!1:U0.test(t)?Uh[t]=!0:(zh[t]=!0,!1)}function G0(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $0(t,e,n,s){if(e===null||typeof e>"u"||G0(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ct(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var _u=/[\-:]([a-z])/g;function xu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_u,xu);Ye[e]=new ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_u,xu);Ye[e]=new ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_u,xu);Ye[e]=new ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new ct(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function wu(t,e,n,s){var r=Ye.hasOwnProperty(e)?Ye[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($0(e,n,r,s)&&(n=null),s||r===null?W0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var On=z0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vo=Symbol.for("react.element"),Zs=Symbol.for("react.portal"),Js=Symbol.for("react.fragment"),ku=Symbol.for("react.strict_mode"),dc=Symbol.for("react.profiler"),$p=Symbol.for("react.provider"),Hp=Symbol.for("react.context"),Tu=Symbol.for("react.forward_ref"),pc=Symbol.for("react.suspense"),fc=Symbol.for("react.suspense_list"),Su=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),Yp=Symbol.for("react.offscreen"),Wh=Symbol.iterator;function $r(t){return t===null||typeof t!="object"?null:(t=Wh&&t[Wh]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,Rl;function ei(t){if(Rl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rl=e&&e[1]||""}return`
`+Rl+t}var Pl=!1;function jl(t,e){if(!t||Pl)return"";Pl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ei(t):""}function H0(t){switch(t.tag){case 5:return ei(t.type);case 16:return ei("Lazy");case 13:return ei("Suspense");case 19:return ei("SuspenseList");case 0:case 2:case 15:return t=jl(t.type,!1),t;case 11:return t=jl(t.type.render,!1),t;case 1:return t=jl(t.type,!0),t;default:return""}}function mc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Js:return"Fragment";case Zs:return"Portal";case dc:return"Profiler";case ku:return"StrictMode";case pc:return"Suspense";case fc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hp:return(t.displayName||"Context")+".Consumer";case $p:return(t._context.displayName||"Context")+".Provider";case Tu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Su:return e=t.displayName||null,e!==null?e:mc(t.type)||"Memo";case Bn:e=t._payload,t=t._init;try{return mc(t(e))}catch{}}return null}function Y0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mc(e);case 8:return e===ku?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q0(t){var e=Qp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _o(t){t._valueTracker||(t._valueTracker=Q0(t))}function Kp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Qp(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Jo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gc(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gh(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xp(t,e){e=e.checked,e!=null&&wu(t,"checked",e,!1)}function yc(t,e){Xp(t,e);var n=rs(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vc(t,e.type,n):e.hasOwnProperty("defaultValue")&&vc(t,e.type,rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $h(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vc(t,e,n){(e!=="number"||Jo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ti=Array.isArray;function hr(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function _c(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(ti(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rs(n)}}function Zp(t,e){var n=rs(e.value),s=rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Yh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xo,ef=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xo=xo||document.createElement("div"),xo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K0=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){K0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function tf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function nf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=tf(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var X0=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wc(t,e){if(e){if(X0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function kc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tc=null;function Eu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sc=null,dr=null,pr=null;function Qh(t){if(t=eo(t)){if(typeof Sc!="function")throw Error(M(280));var e=t.stateNode;e&&(e=cl(e),Sc(t.stateNode,t.type,e))}}function sf(t){dr?pr?pr.push(t):pr=[t]:dr=t}function rf(){if(dr){var t=dr,e=pr;if(pr=dr=null,Qh(t),e)for(t=0;t<e.length;t++)Qh(e[t])}}function of(t,e){return t(e)}function af(){}var Fl=!1;function lf(t,e,n){if(Fl)return t(e,n);Fl=!0;try{return of(t,e,n)}finally{Fl=!1,(dr!==null||pr!==null)&&(af(),rf())}}function yi(t,e){var n=t.stateNode;if(n===null)return null;var s=cl(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Ec=!1;if(Cn)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{Ec=!1}function Z0(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ii=!1,ea=null,ta=!1,Cc=null,J0={onError:function(t){ii=!0,ea=t}};function ey(t,e,n,s,r,i,o,a,l){ii=!1,ea=null,Z0.apply(J0,arguments)}function ty(t,e,n,s,r,i,o,a,l){if(ey.apply(this,arguments),ii){if(ii){var c=ea;ii=!1,ea=null}else throw Error(M(198));ta||(ta=!0,Cc=c)}}function Us(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kh(t){if(Us(t)!==t)throw Error(M(188))}function ny(t){var e=t.alternate;if(!e){if(e=Us(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Kh(r),t;if(i===s)return Kh(r),e;i=i.sibling}throw Error(M(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==s)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function uf(t){return t=ny(t),t!==null?hf(t):null}function hf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hf(t);if(e!==null)return e;t=t.sibling}return null}var df=Et.unstable_scheduleCallback,Xh=Et.unstable_cancelCallback,sy=Et.unstable_shouldYield,ry=Et.unstable_requestPaint,Me=Et.unstable_now,iy=Et.unstable_getCurrentPriorityLevel,Cu=Et.unstable_ImmediatePriority,pf=Et.unstable_UserBlockingPriority,na=Et.unstable_NormalPriority,oy=Et.unstable_LowPriority,ff=Et.unstable_IdlePriority,il=null,an=null;function ay(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(il,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:uy,ly=Math.log,cy=Math.LN2;function uy(t){return t>>>=0,t===0?32:31-(ly(t)/cy|0)|0}var wo=64,ko=4194304;function ni(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sa(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=ni(a):(i&=o,i!==0&&(s=ni(i)))}else o=n&~r,o!==0?s=ni(o):i!==0&&(s=ni(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-$t(e),r=1<<n,s|=t[n],e&=~r;return s}function hy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dy(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-$t(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=hy(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Nc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mf(){var t=wo;return wo<<=1,!(wo&4194240)&&(wo=64),t}function Vl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$t(e),t[e]=n}function py(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-$t(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Nu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-$t(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var le=0;function gf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yf,bu,vf,_f,xf,bc=!1,To=[],Yn=null,Qn=null,Kn=null,vi=new Map,_i=new Map,Un=[],fy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zh(t,e){switch(t){case"focusin":case"focusout":Yn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":vi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(e.pointerId)}}function Yr(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=eo(e),e!==null&&bu(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function my(t,e,n,s,r){switch(e){case"focusin":return Yn=Yr(Yn,t,e,n,s,r),!0;case"dragenter":return Qn=Yr(Qn,t,e,n,s,r),!0;case"mouseover":return Kn=Yr(Kn,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return vi.set(i,Yr(vi.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,_i.set(i,Yr(_i.get(i)||null,t,e,n,s,r)),!0}return!1}function wf(t){var e=ws(t.target);if(e!==null){var n=Us(e);if(n!==null){if(e=n.tag,e===13){if(e=cf(n),e!==null){t.blockedOn=e,xf(t.priority,function(){vf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ac(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Tc=s,n.target.dispatchEvent(s),Tc=null}else return e=eo(n),e!==null&&bu(e),t.blockedOn=n,!1;e.shift()}return!0}function Jh(t,e,n){Bo(t)&&n.delete(e)}function gy(){bc=!1,Yn!==null&&Bo(Yn)&&(Yn=null),Qn!==null&&Bo(Qn)&&(Qn=null),Kn!==null&&Bo(Kn)&&(Kn=null),vi.forEach(Jh),_i.forEach(Jh)}function Qr(t,e){t.blockedOn===e&&(t.blockedOn=null,bc||(bc=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,gy)))}function xi(t){function e(r){return Qr(r,t)}if(0<To.length){Qr(To[0],t);for(var n=1;n<To.length;n++){var s=To[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Yn!==null&&Qr(Yn,t),Qn!==null&&Qr(Qn,t),Kn!==null&&Qr(Kn,t),vi.forEach(e),_i.forEach(e),n=0;n<Un.length;n++)s=Un[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)wf(n),n.blockedOn===null&&Un.shift()}var fr=On.ReactCurrentBatchConfig,ra=!0;function yy(t,e,n,s){var r=le,i=fr.transition;fr.transition=null;try{le=1,Au(t,e,n,s)}finally{le=r,fr.transition=i}}function vy(t,e,n,s){var r=le,i=fr.transition;fr.transition=null;try{le=4,Au(t,e,n,s)}finally{le=r,fr.transition=i}}function Au(t,e,n,s){if(ra){var r=Ac(t,e,n,s);if(r===null)Yl(t,e,s,ia,n),Zh(t,s);else if(my(r,t,e,n,s))s.stopPropagation();else if(Zh(t,s),e&4&&-1<fy.indexOf(t)){for(;r!==null;){var i=eo(r);if(i!==null&&yf(i),i=Ac(t,e,n,s),i===null&&Yl(t,e,s,ia,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else Yl(t,e,s,null,n)}}var ia=null;function Ac(t,e,n,s){if(ia=null,t=Eu(s),t=ws(t),t!==null)if(e=Us(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ia=t,null}function kf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iy()){case Cu:return 1;case pf:return 4;case na:case oy:return 16;case ff:return 536870912;default:return 16}default:return 16}}var $n=null,Du=null,qo=null;function Tf(){if(qo)return qo;var t,e=Du,n=e.length,s,r="value"in $n?$n.value:$n.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return qo=r.slice(t,1<s?1-s:void 0)}function zo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function So(){return!0}function ed(){return!1}function bt(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?So:ed,this.isPropagationStopped=ed,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),e}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iu=bt(Vr),Ji=ke({},Vr,{view:0,detail:0}),_y=bt(Ji),Ll,Bl,Kr,ol=ke({},Ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kr&&(Kr&&t.type==="mousemove"?(Ll=t.screenX-Kr.screenX,Bl=t.screenY-Kr.screenY):Bl=Ll=0,Kr=t),Ll)},movementY:function(t){return"movementY"in t?t.movementY:Bl}}),td=bt(ol),xy=ke({},ol,{dataTransfer:0}),wy=bt(xy),ky=ke({},Ji,{relatedTarget:0}),ql=bt(ky),Ty=ke({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sy=bt(Ty),Ey=ke({},Vr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cy=bt(Ey),Ny=ke({},Vr,{data:0}),nd=bt(Ny),by={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ay={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dy[t])?!!e[t]:!1}function Mu(){return Iy}var My=ke({},Ji,{key:function(t){if(t.key){var e=by[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ay[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mu,charCode:function(t){return t.type==="keypress"?zo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Oy=bt(My),Ry=ke({},ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sd=bt(Ry),Py=ke({},Ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mu}),jy=bt(Py),Fy=ke({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vy=bt(Fy),Ly=ke({},ol,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),By=bt(Ly),qy=[9,13,27,32],Ou=Cn&&"CompositionEvent"in window,oi=null;Cn&&"documentMode"in document&&(oi=document.documentMode);var zy=Cn&&"TextEvent"in window&&!oi,Sf=Cn&&(!Ou||oi&&8<oi&&11>=oi),rd=String.fromCharCode(32),id=!1;function Ef(t,e){switch(t){case"keyup":return qy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var er=!1;function Uy(t,e){switch(t){case"compositionend":return Cf(e);case"keypress":return e.which!==32?null:(id=!0,rd);case"textInput":return t=e.data,t===rd&&id?null:t;default:return null}}function Wy(t,e){if(er)return t==="compositionend"||!Ou&&Ef(t,e)?(t=Tf(),qo=Du=$n=null,er=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sf&&e.locale!=="ko"?null:e.data;default:return null}}var Gy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function od(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gy[t.type]:e==="textarea"}function Nf(t,e,n,s){sf(s),e=oa(e,"onChange"),0<e.length&&(n=new Iu("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ai=null,wi=null;function $y(t){Vf(t,0)}function al(t){var e=sr(t);if(Kp(e))return t}function Hy(t,e){if(t==="change")return e}var bf=!1;if(Cn){var zl;if(Cn){var Ul="oninput"in document;if(!Ul){var ad=document.createElement("div");ad.setAttribute("oninput","return;"),Ul=typeof ad.oninput=="function"}zl=Ul}else zl=!1;bf=zl&&(!document.documentMode||9<document.documentMode)}function ld(){ai&&(ai.detachEvent("onpropertychange",Af),wi=ai=null)}function Af(t){if(t.propertyName==="value"&&al(wi)){var e=[];Nf(e,wi,t,Eu(t)),lf($y,e)}}function Yy(t,e,n){t==="focusin"?(ld(),ai=e,wi=n,ai.attachEvent("onpropertychange",Af)):t==="focusout"&&ld()}function Qy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return al(wi)}function Ky(t,e){if(t==="click")return al(e)}function Xy(t,e){if(t==="input"||t==="change")return al(e)}function Zy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:Zy;function ki(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!hc.call(e,r)||!Yt(t[r],e[r]))return!1}return!0}function cd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ud(t,e){var n=cd(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cd(n)}}function Df(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Df(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function If(){for(var t=window,e=Jo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jo(t.document)}return e}function Ru(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jy(t){var e=If(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Df(n.ownerDocument.documentElement,n)){if(s!==null&&Ru(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=ud(n,i);var o=ud(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ev=Cn&&"documentMode"in document&&11>=document.documentMode,tr=null,Dc=null,li=null,Ic=!1;function hd(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ic||tr==null||tr!==Jo(s)||(s=tr,"selectionStart"in s&&Ru(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),li&&ki(li,s)||(li=s,s=oa(Dc,"onSelect"),0<s.length&&(e=new Iu("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=tr)))}function Eo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var nr={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionend:Eo("Transition","TransitionEnd")},Wl={},Mf={};Cn&&(Mf=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function ll(t){if(Wl[t])return Wl[t];if(!nr[t])return t;var e=nr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Mf)return Wl[t]=e[n];return t}var Of=ll("animationend"),Rf=ll("animationiteration"),Pf=ll("animationstart"),jf=ll("transitionend"),Ff=new Map,dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(t,e){Ff.set(t,e),zs(e,[t])}for(var Gl=0;Gl<dd.length;Gl++){var $l=dd[Gl],tv=$l.toLowerCase(),nv=$l[0].toUpperCase()+$l.slice(1);us(tv,"on"+nv)}us(Of,"onAnimationEnd");us(Rf,"onAnimationIteration");us(Pf,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(jf,"onTransitionEnd");wr("onMouseEnter",["mouseout","mouseover"]);wr("onMouseLeave",["mouseout","mouseover"]);wr("onPointerEnter",["pointerout","pointerover"]);wr("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sv=new Set("cancel close invalid load scroll toggle".split(" ").concat(si));function pd(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,ty(s,e,void 0,t),t.currentTarget=null}function Vf(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;pd(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;pd(r,a,c),i=l}}}if(ta)throw t=Cc,ta=!1,Cc=null,t}function pe(t,e){var n=e[jc];n===void 0&&(n=e[jc]=new Set);var s=t+"__bubble";n.has(s)||(Lf(e,t,2,!1),n.add(s))}function Hl(t,e,n){var s=0;e&&(s|=4),Lf(n,t,s,e)}var Co="_reactListening"+Math.random().toString(36).slice(2);function Ti(t){if(!t[Co]){t[Co]=!0,Gp.forEach(function(n){n!=="selectionchange"&&(sv.has(n)||Hl(n,!1,t),Hl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Co]||(e[Co]=!0,Hl("selectionchange",!1,e))}}function Lf(t,e,n,s){switch(kf(e)){case 1:var r=yy;break;case 4:r=vy;break;default:r=Au}n=r.bind(null,e,n,t),r=void 0,!Ec||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Yl(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ws(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}lf(function(){var c=i,u=Eu(n),h=[];e:{var d=Ff.get(t);if(d!==void 0){var g=Iu,y=t;switch(t){case"keypress":if(zo(n)===0)break e;case"keydown":case"keyup":g=Oy;break;case"focusin":y="focus",g=ql;break;case"focusout":y="blur",g=ql;break;case"beforeblur":case"afterblur":g=ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=td;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=wy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=jy;break;case Of:case Rf:case Pf:g=Sy;break;case jf:g=Vy;break;case"scroll":g=_y;break;case"wheel":g=By;break;case"copy":case"cut":case"paste":g=Cy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=sd}var _=(e&4)!==0,x=!_&&t==="scroll",f=_?d!==null?d+"Capture":null:d;_=[];for(var p=c,v;p!==null;){v=p;var k=v.stateNode;if(v.tag===5&&k!==null&&(v=k,f!==null&&(k=yi(p,f),k!=null&&_.push(Si(p,k,v)))),x)break;p=p.return}0<_.length&&(d=new g(d,y,null,n,u),h.push({event:d,listeners:_}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",d&&n!==Tc&&(y=n.relatedTarget||n.fromElement)&&(ws(y)||y[Nn]))break e;if((g||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=c,y=y?ws(y):null,y!==null&&(x=Us(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=c),g!==y)){if(_=td,k="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=sd,k="onPointerLeave",f="onPointerEnter",p="pointer"),x=g==null?d:sr(g),v=y==null?d:sr(y),d=new _(k,p+"leave",g,n,u),d.target=x,d.relatedTarget=v,k=null,ws(u)===c&&(_=new _(f,p+"enter",y,n,u),_.target=v,_.relatedTarget=x,k=_),x=k,g&&y)t:{for(_=g,f=y,p=0,v=_;v;v=Qs(v))p++;for(v=0,k=f;k;k=Qs(k))v++;for(;0<p-v;)_=Qs(_),p--;for(;0<v-p;)f=Qs(f),v--;for(;p--;){if(_===f||f!==null&&_===f.alternate)break t;_=Qs(_),f=Qs(f)}_=null}else _=null;g!==null&&fd(h,d,g,_,!1),y!==null&&x!==null&&fd(h,x,y,_,!0)}}e:{if(d=c?sr(c):window,g=d.nodeName&&d.nodeName.toLowerCase(),g==="select"||g==="input"&&d.type==="file")var w=Hy;else if(od(d))if(bf)w=Xy;else{w=Qy;var S=Yy}else(g=d.nodeName)&&g.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=Ky);if(w&&(w=w(t,c))){Nf(h,w,n,u);break e}S&&S(t,d,c),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&vc(d,"number",d.value)}switch(S=c?sr(c):window,t){case"focusin":(od(S)||S.contentEditable==="true")&&(tr=S,Dc=c,li=null);break;case"focusout":li=Dc=tr=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,hd(h,n,u);break;case"selectionchange":if(ev)break;case"keydown":case"keyup":hd(h,n,u)}var E;if(Ou)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else er?Ef(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Sf&&n.locale!=="ko"&&(er||T!=="onCompositionStart"?T==="onCompositionEnd"&&er&&(E=Tf()):($n=u,Du="value"in $n?$n.value:$n.textContent,er=!0)),S=oa(c,T),0<S.length&&(T=new nd(T,t,null,n,u),h.push({event:T,listeners:S}),E?T.data=E:(E=Cf(n),E!==null&&(T.data=E)))),(E=zy?Uy(t,n):Wy(t,n))&&(c=oa(c,"onBeforeInput"),0<c.length&&(u=new nd("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=E))}Vf(h,e)})}function Si(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oa(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=yi(t,n),i!=null&&s.unshift(Si(t,i,r)),i=yi(t,e),i!=null&&s.push(Si(t,i,r))),t=t.return}return s}function Qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fd(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=yi(n,i),l!=null&&o.unshift(Si(n,l,a))):r||(l=yi(n,i),l!=null&&o.push(Si(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rv=/\r\n?/g,iv=/\u0000|\uFFFD/g;function md(t){return(typeof t=="string"?t:""+t).replace(rv,`
`).replace(iv,"")}function No(t,e,n){if(e=md(e),md(t)!==e&&n)throw Error(M(425))}function aa(){}var Mc=null,Oc=null;function Rc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pc=typeof setTimeout=="function"?setTimeout:void 0,ov=typeof clearTimeout=="function"?clearTimeout:void 0,gd=typeof Promise=="function"?Promise:void 0,av=typeof queueMicrotask=="function"?queueMicrotask:typeof gd<"u"?function(t){return gd.resolve(null).then(t).catch(lv)}:Pc;function lv(t){setTimeout(function(){throw t})}function Ql(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),xi(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);xi(e)}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lr=Math.random().toString(36).slice(2),sn="__reactFiber$"+Lr,Ei="__reactProps$"+Lr,Nn="__reactContainer$"+Lr,jc="__reactEvents$"+Lr,cv="__reactListeners$"+Lr,uv="__reactHandles$"+Lr;function ws(t){var e=t[sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Nn]||n[sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yd(t);t!==null;){if(n=t[sn])return n;t=yd(t)}return e}t=n,n=t.parentNode}return null}function eo(t){return t=t[sn]||t[Nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function cl(t){return t[Ei]||null}var Fc=[],rr=-1;function hs(t){return{current:t}}function fe(t){0>rr||(t.current=Fc[rr],Fc[rr]=null,rr--)}function he(t,e){rr++,Fc[rr]=t.current,t.current=e}var is={},tt=hs(is),ft=hs(!1),Ds=is;function kr(t,e){var n=t.type.contextTypes;if(!n)return is;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function mt(t){return t=t.childContextTypes,t!=null}function la(){fe(ft),fe(tt)}function vd(t,e,n){if(tt.current!==is)throw Error(M(168));he(tt,e),he(ft,n)}function Bf(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(M(108,Y0(t)||"Unknown",r));return ke({},n,s)}function ca(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||is,Ds=tt.current,he(tt,t),he(ft,ft.current),!0}function _d(t,e,n){var s=t.stateNode;if(!s)throw Error(M(169));n?(t=Bf(t,e,Ds),s.__reactInternalMemoizedMergedChildContext=t,fe(ft),fe(tt),he(tt,t)):fe(ft),he(ft,n)}var vn=null,ul=!1,Kl=!1;function qf(t){vn===null?vn=[t]:vn.push(t)}function hv(t){ul=!0,qf(t)}function ds(){if(!Kl&&vn!==null){Kl=!0;var t=0,e=le;try{var n=vn;for(le=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}vn=null,ul=!1}catch(r){throw vn!==null&&(vn=vn.slice(t+1)),df(Cu,ds),r}finally{le=e,Kl=!1}}return null}var ir=[],or=0,ua=null,ha=0,Dt=[],It=0,Is=null,_n=1,xn="";function vs(t,e){ir[or++]=ha,ir[or++]=ua,ua=t,ha=e}function zf(t,e,n){Dt[It++]=_n,Dt[It++]=xn,Dt[It++]=Is,Is=t;var s=_n;t=xn;var r=32-$t(s)-1;s&=~(1<<r),n+=1;var i=32-$t(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,_n=1<<32-$t(e)+r|n<<r|s,xn=i+t}else _n=1<<i|n<<r|s,xn=t}function Pu(t){t.return!==null&&(vs(t,1),zf(t,1,0))}function ju(t){for(;t===ua;)ua=ir[--or],ir[or]=null,ha=ir[--or],ir[or]=null;for(;t===Is;)Is=Dt[--It],Dt[It]=null,xn=Dt[--It],Dt[It]=null,_n=Dt[--It],Dt[It]=null}var Tt=null,wt=null,ye=!1,qt=null;function Uf(t,e){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tt=t,wt=Xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tt=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Is!==null?{id:_n,overflow:xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tt=t,wt=null,!0):!1;default:return!1}}function Vc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lc(t){if(ye){var e=wt;if(e){var n=e;if(!xd(t,e)){if(Vc(t))throw Error(M(418));e=Xn(n.nextSibling);var s=Tt;e&&xd(t,e)?Uf(s,n):(t.flags=t.flags&-4097|2,ye=!1,Tt=t)}}else{if(Vc(t))throw Error(M(418));t.flags=t.flags&-4097|2,ye=!1,Tt=t}}}function wd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function bo(t){if(t!==Tt)return!1;if(!ye)return wd(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rc(t.type,t.memoizedProps)),e&&(e=wt)){if(Vc(t))throw Wf(),Error(M(418));for(;e;)Uf(t,e),e=Xn(e.nextSibling)}if(wd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=Xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=Tt?Xn(t.stateNode.nextSibling):null;return!0}function Wf(){for(var t=wt;t;)t=Xn(t.nextSibling)}function Tr(){wt=Tt=null,ye=!1}function Fu(t){qt===null?qt=[t]:qt.push(t)}var dv=On.ReactCurrentBatchConfig;function Xr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var s=n.stateNode}if(!s)throw Error(M(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Ao(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function kd(t){var e=t._init;return e(t._payload)}function Gf(t){function e(f,p){if(t){var v=f.deletions;v===null?(f.deletions=[p],f.flags|=16):v.push(p)}}function n(f,p){if(!t)return null;for(;p!==null;)e(f,p),p=p.sibling;return null}function s(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function r(f,p){return f=ts(f,p),f.index=0,f.sibling=null,f}function i(f,p,v){return f.index=v,t?(v=f.alternate,v!==null?(v=v.index,v<p?(f.flags|=2,p):v):(f.flags|=2,p)):(f.flags|=1048576,p)}function o(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,p,v,k){return p===null||p.tag!==6?(p=sc(v,f.mode,k),p.return=f,p):(p=r(p,v),p.return=f,p)}function l(f,p,v,k){var w=v.type;return w===Js?u(f,p,v.props.children,k,v.key):p!==null&&(p.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bn&&kd(w)===p.type)?(k=r(p,v.props),k.ref=Xr(f,p,v),k.return=f,k):(k=Qo(v.type,v.key,v.props,null,f.mode,k),k.ref=Xr(f,p,v),k.return=f,k)}function c(f,p,v,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=rc(v,f.mode,k),p.return=f,p):(p=r(p,v.children||[]),p.return=f,p)}function u(f,p,v,k,w){return p===null||p.tag!==7?(p=bs(v,f.mode,k,w),p.return=f,p):(p=r(p,v),p.return=f,p)}function h(f,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=sc(""+p,f.mode,v),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case vo:return v=Qo(p.type,p.key,p.props,null,f.mode,v),v.ref=Xr(f,null,p),v.return=f,v;case Zs:return p=rc(p,f.mode,v),p.return=f,p;case Bn:var k=p._init;return h(f,k(p._payload),v)}if(ti(p)||$r(p))return p=bs(p,f.mode,v,null),p.return=f,p;Ao(f,p)}return null}function d(f,p,v,k){var w=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:a(f,p,""+v,k);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case vo:return v.key===w?l(f,p,v,k):null;case Zs:return v.key===w?c(f,p,v,k):null;case Bn:return w=v._init,d(f,p,w(v._payload),k)}if(ti(v)||$r(v))return w!==null?null:u(f,p,v,k,null);Ao(f,v)}return null}function g(f,p,v,k,w){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(v)||null,a(p,f,""+k,w);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case vo:return f=f.get(k.key===null?v:k.key)||null,l(p,f,k,w);case Zs:return f=f.get(k.key===null?v:k.key)||null,c(p,f,k,w);case Bn:var S=k._init;return g(f,p,v,S(k._payload),w)}if(ti(k)||$r(k))return f=f.get(v)||null,u(p,f,k,w,null);Ao(p,k)}return null}function y(f,p,v,k){for(var w=null,S=null,E=p,T=p=0,b=null;E!==null&&T<v.length;T++){E.index>T?(b=E,E=null):b=E.sibling;var C=d(f,E,v[T],k);if(C===null){E===null&&(E=b);break}t&&E&&C.alternate===null&&e(f,E),p=i(C,p,T),S===null?w=C:S.sibling=C,S=C,E=b}if(T===v.length)return n(f,E),ye&&vs(f,T),w;if(E===null){for(;T<v.length;T++)E=h(f,v[T],k),E!==null&&(p=i(E,p,T),S===null?w=E:S.sibling=E,S=E);return ye&&vs(f,T),w}for(E=s(f,E);T<v.length;T++)b=g(E,f,T,v[T],k),b!==null&&(t&&b.alternate!==null&&E.delete(b.key===null?T:b.key),p=i(b,p,T),S===null?w=b:S.sibling=b,S=b);return t&&E.forEach(function(D){return e(f,D)}),ye&&vs(f,T),w}function _(f,p,v,k){var w=$r(v);if(typeof w!="function")throw Error(M(150));if(v=w.call(v),v==null)throw Error(M(151));for(var S=w=null,E=p,T=p=0,b=null,C=v.next();E!==null&&!C.done;T++,C=v.next()){E.index>T?(b=E,E=null):b=E.sibling;var D=d(f,E,C.value,k);if(D===null){E===null&&(E=b);break}t&&E&&D.alternate===null&&e(f,E),p=i(D,p,T),S===null?w=D:S.sibling=D,S=D,E=b}if(C.done)return n(f,E),ye&&vs(f,T),w;if(E===null){for(;!C.done;T++,C=v.next())C=h(f,C.value,k),C!==null&&(p=i(C,p,T),S===null?w=C:S.sibling=C,S=C);return ye&&vs(f,T),w}for(E=s(f,E);!C.done;T++,C=v.next())C=g(E,f,T,C.value,k),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?T:C.key),p=i(C,p,T),S===null?w=C:S.sibling=C,S=C);return t&&E.forEach(function(A){return e(f,A)}),ye&&vs(f,T),w}function x(f,p,v,k){if(typeof v=="object"&&v!==null&&v.type===Js&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case vo:e:{for(var w=v.key,S=p;S!==null;){if(S.key===w){if(w=v.type,w===Js){if(S.tag===7){n(f,S.sibling),p=r(S,v.props.children),p.return=f,f=p;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Bn&&kd(w)===S.type){n(f,S.sibling),p=r(S,v.props),p.ref=Xr(f,S,v),p.return=f,f=p;break e}n(f,S);break}else e(f,S);S=S.sibling}v.type===Js?(p=bs(v.props.children,f.mode,k,v.key),p.return=f,f=p):(k=Qo(v.type,v.key,v.props,null,f.mode,k),k.ref=Xr(f,p,v),k.return=f,f=k)}return o(f);case Zs:e:{for(S=v.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(f,p.sibling),p=r(p,v.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else e(f,p);p=p.sibling}p=rc(v,f.mode,k),p.return=f,f=p}return o(f);case Bn:return S=v._init,x(f,p,S(v._payload),k)}if(ti(v))return y(f,p,v,k);if($r(v))return _(f,p,v,k);Ao(f,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(f,p.sibling),p=r(p,v),p.return=f,f=p):(n(f,p),p=sc(v,f.mode,k),p.return=f,f=p),o(f)):n(f,p)}return x}var Sr=Gf(!0),$f=Gf(!1),da=hs(null),pa=null,ar=null,Vu=null;function Lu(){Vu=ar=pa=null}function Bu(t){var e=da.current;fe(da),t._currentValue=e}function Bc(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function mr(t,e){pa=t,Vu=ar=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pt=!0),t.firstContext=null)}function Pt(t){var e=t._currentValue;if(Vu!==t)if(t={context:t,memoizedValue:e,next:null},ar===null){if(pa===null)throw Error(M(308));ar=t,pa.dependencies={lanes:0,firstContext:t}}else ar=ar.next=t;return e}var ks=null;function qu(t){ks===null?ks=[t]:ks.push(t)}function Hf(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,qu(e)):(n.next=r.next,r.next=n),e.interleaved=n,bn(t,s)}function bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qn=!1;function zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ee&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,bn(t,n)}return r=s.interleaved,r===null?(e.next=e,qu(s)):(e.next=r.next,r.next=e),s.interleaved=e,bn(t,n)}function Uo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Nu(t,n)}}function Td(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fa(t,e,n,s){var r=t.updateQueue;qn=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var h=r.baseState;o=0,u=c=l=null,a=i;do{var d=a.lane,g=a.eventTime;if((s&d)===d){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,_=a;switch(d=e,g=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){h=y.call(g,h,d);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,d=typeof y=="function"?y.call(g,h,d):y,d==null)break e;h=ke({},h,d);break e;case 2:qn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else g={eventTime:g,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=h):u=u.next=g,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Os|=o,t.lanes=o,t.memoizedState=h}}function Sd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(M(191,r));r.call(s)}}}var to={},ln=hs(to),Ci=hs(to),Ni=hs(to);function Ts(t){if(t===to)throw Error(M(174));return t}function Uu(t,e){switch(he(Ni,e),he(Ci,t),he(ln,to),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xc(e,t)}fe(ln),he(ln,e)}function Er(){fe(ln),fe(Ci),fe(Ni)}function Qf(t){Ts(Ni.current);var e=Ts(ln.current),n=xc(e,t.type);e!==n&&(he(Ci,t),he(ln,n))}function Wu(t){Ci.current===t&&(fe(ln),fe(Ci))}var _e=hs(0);function ma(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xl=[];function Gu(){for(var t=0;t<Xl.length;t++)Xl[t]._workInProgressVersionPrimary=null;Xl.length=0}var Wo=On.ReactCurrentDispatcher,Zl=On.ReactCurrentBatchConfig,Ms=0,we=null,Fe=null,Ue=null,ga=!1,ci=!1,bi=0,pv=0;function Xe(){throw Error(M(321))}function $u(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function Hu(t,e,n,s,r,i){if(Ms=i,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wo.current=t===null||t.memoizedState===null?yv:vv,t=n(s,r),ci){i=0;do{if(ci=!1,bi=0,25<=i)throw Error(M(301));i+=1,Ue=Fe=null,e.updateQueue=null,Wo.current=_v,t=n(s,r)}while(ci)}if(Wo.current=ya,e=Fe!==null&&Fe.next!==null,Ms=0,Ue=Fe=we=null,ga=!1,e)throw Error(M(300));return t}function Yu(){var t=bi!==0;return bi=0,t}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?we.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function jt(){if(Fe===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Ue===null?we.memoizedState:Ue.next;if(e!==null)Ue=e,Fe=t;else{if(t===null)throw Error(M(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ue===null?we.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Ai(t,e){return typeof e=="function"?e(t):e}function Jl(t){var e=jt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var s=Fe,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((Ms&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=s):l=l.next=h,we.lanes|=u,Os|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,Yt(s,e.memoizedState)||(pt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,we.lanes|=i,Os|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ec(t){var e=jt(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);Yt(i,e.memoizedState)||(pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function Kf(){}function Xf(t,e){var n=we,s=jt(),r=e(),i=!Yt(s.memoizedState,r);if(i&&(s.memoizedState=r,pt=!0),s=s.queue,Qu(em.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Di(9,Jf.bind(null,n,s,r,e),void 0,null),We===null)throw Error(M(349));Ms&30||Zf(n,e,r)}return r}function Zf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Jf(t,e,n,s){e.value=n,e.getSnapshot=s,tm(e)&&nm(t)}function em(t,e,n){return n(function(){tm(e)&&nm(t)})}function tm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yt(t,n)}catch{return!0}}function nm(t){var e=bn(t,1);e!==null&&Ht(e,t,1,-1)}function Ed(t){var e=nn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},e.queue=t,t=t.dispatch=gv.bind(null,we,t),[e.memoizedState,t]}function Di(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function sm(){return jt().memoizedState}function Go(t,e,n,s){var r=nn();we.flags|=t,r.memoizedState=Di(1|e,n,void 0,s===void 0?null:s)}function hl(t,e,n,s){var r=jt();s=s===void 0?null:s;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,s!==null&&$u(s,o.deps)){r.memoizedState=Di(e,n,i,s);return}}we.flags|=t,r.memoizedState=Di(1|e,n,i,s)}function Cd(t,e){return Go(8390656,8,t,e)}function Qu(t,e){return hl(2048,8,t,e)}function rm(t,e){return hl(4,2,t,e)}function im(t,e){return hl(4,4,t,e)}function om(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function am(t,e,n){return n=n!=null?n.concat([t]):null,hl(4,4,om.bind(null,e,t),n)}function Ku(){}function lm(t,e){var n=jt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&$u(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function cm(t,e){var n=jt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&$u(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function um(t,e,n){return Ms&21?(Yt(n,e)||(n=mf(),we.lanes|=n,Os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pt=!0),t.memoizedState=n)}function fv(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var s=Zl.transition;Zl.transition={};try{t(!1),e()}finally{le=n,Zl.transition=s}}function hm(){return jt().memoizedState}function mv(t,e,n){var s=es(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},dm(t))pm(e,n);else if(n=Hf(t,e,n,s),n!==null){var r=ot();Ht(n,t,s,r),fm(n,e,s)}}function gv(t,e,n){var s=es(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(dm(t))pm(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,Yt(a,o)){var l=e.interleaved;l===null?(r.next=r,qu(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=Hf(t,e,r,s),n!==null&&(r=ot(),Ht(n,t,s,r),fm(n,e,s))}}function dm(t){var e=t.alternate;return t===we||e!==null&&e===we}function pm(t,e){ci=ga=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fm(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Nu(t,n)}}var ya={readContext:Pt,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},yv={readContext:Pt,useCallback:function(t,e){return nn().memoizedState=[t,e===void 0?null:e],t},useContext:Pt,useEffect:Cd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Go(4194308,4,om.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Go(4194308,4,t,e)},useInsertionEffect:function(t,e){return Go(4,2,t,e)},useMemo:function(t,e){var n=nn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=nn();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=mv.bind(null,we,t),[s.memoizedState,t]},useRef:function(t){var e=nn();return t={current:t},e.memoizedState=t},useState:Ed,useDebugValue:Ku,useDeferredValue:function(t){return nn().memoizedState=t},useTransition:function(){var t=Ed(!1),e=t[0];return t=fv.bind(null,t[1]),nn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=we,r=nn();if(ye){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),We===null)throw Error(M(349));Ms&30||Zf(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Cd(em.bind(null,s,i,t),[t]),s.flags|=2048,Di(9,Jf.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=nn(),e=We.identifierPrefix;if(ye){var n=xn,s=_n;n=(s&~(1<<32-$t(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=bi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vv={readContext:Pt,useCallback:lm,useContext:Pt,useEffect:Qu,useImperativeHandle:am,useInsertionEffect:rm,useLayoutEffect:im,useMemo:cm,useReducer:Jl,useRef:sm,useState:function(){return Jl(Ai)},useDebugValue:Ku,useDeferredValue:function(t){var e=jt();return um(e,Fe.memoizedState,t)},useTransition:function(){var t=Jl(Ai)[0],e=jt().memoizedState;return[t,e]},useMutableSource:Kf,useSyncExternalStore:Xf,useId:hm,unstable_isNewReconciler:!1},_v={readContext:Pt,useCallback:lm,useContext:Pt,useEffect:Qu,useImperativeHandle:am,useInsertionEffect:rm,useLayoutEffect:im,useMemo:cm,useReducer:ec,useRef:sm,useState:function(){return ec(Ai)},useDebugValue:Ku,useDeferredValue:function(t){var e=jt();return Fe===null?e.memoizedState=t:um(e,Fe.memoizedState,t)},useTransition:function(){var t=ec(Ai)[0],e=jt().memoizedState;return[t,e]},useMutableSource:Kf,useSyncExternalStore:Xf,useId:hm,unstable_isNewReconciler:!1};function Lt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qc(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dl={isMounted:function(t){return(t=t._reactInternals)?Us(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=ot(),r=es(t),i=kn(s,r);i.payload=e,n!=null&&(i.callback=n),e=Zn(t,i,r),e!==null&&(Ht(e,t,r,s),Uo(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=ot(),r=es(t),i=kn(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zn(t,i,r),e!==null&&(Ht(e,t,r,s),Uo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ot(),s=es(t),r=kn(n,s);r.tag=2,e!=null&&(r.callback=e),e=Zn(t,r,s),e!==null&&(Ht(e,t,s,n),Uo(e,t,s))}};function Nd(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!ki(n,s)||!ki(r,i):!0}function mm(t,e,n){var s=!1,r=is,i=e.contextType;return typeof i=="object"&&i!==null?i=Pt(i):(r=mt(e)?Ds:tt.current,s=e.contextTypes,i=(s=s!=null)?kr(t,r):is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dl,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function bd(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&dl.enqueueReplaceState(e,e.state,null)}function zc(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},zu(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Pt(i):(i=mt(e)?Ds:tt.current,r.context=kr(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qc(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&dl.enqueueReplaceState(r,r.state,null),fa(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Cr(t,e){try{var n="",s=e;do n+=H0(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function tc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Uc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xv=typeof WeakMap=="function"?WeakMap:Map;function gm(t,e,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){_a||(_a=!0,Jc=s),Uc(t,e)},n}function ym(t,e,n){n=kn(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Uc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Uc(t,e),typeof s!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ad(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new xv;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=Rv.bind(null,t,e,n),e.then(t,t))}function Dd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Id(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kn(-1,1),e.tag=2,Zn(n,e,1))),n.lanes|=1),t)}var wv=On.ReactCurrentOwner,pt=!1;function st(t,e,n,s){e.child=t===null?$f(e,null,n,s):Sr(e,t.child,n,s)}function Md(t,e,n,s,r){n=n.render;var i=e.ref;return mr(e,r),s=Hu(t,e,n,s,i,r),n=Yu(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,An(t,e,r)):(ye&&n&&Pu(e),e.flags|=1,st(t,e,s,r),e.child)}function Od(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!rh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vm(t,e,i,s,r)):(t=Qo(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ki,n(o,s)&&t.ref===e.ref)return An(t,e,r)}return e.flags|=1,t=ts(i,s),t.ref=e.ref,t.return=e,e.child=t}function vm(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(ki(i,s)&&t.ref===e.ref)if(pt=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(pt=!0);else return e.lanes=t.lanes,An(t,e,r)}return Wc(t,e,n,s,r)}function _m(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(cr,xt),xt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(cr,xt),xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,he(cr,xt),xt|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,he(cr,xt),xt|=s;return st(t,e,r,n),e.child}function xm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wc(t,e,n,s,r){var i=mt(n)?Ds:tt.current;return i=kr(e,i),mr(e,r),n=Hu(t,e,n,s,i,r),s=Yu(),t!==null&&!pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,An(t,e,r)):(ye&&s&&Pu(e),e.flags|=1,st(t,e,n,r),e.child)}function Rd(t,e,n,s,r){if(mt(n)){var i=!0;ca(e)}else i=!1;if(mr(e,r),e.stateNode===null)$o(t,e),mm(e,n,s),zc(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Pt(c):(c=mt(n)?Ds:tt.current,c=kr(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&bd(e,o,s,c),qn=!1;var d=e.memoizedState;o.state=d,fa(e,s,o,r),l=e.memoizedState,a!==s||d!==l||ft.current||qn?(typeof u=="function"&&(qc(e,n,u,s),l=e.memoizedState),(a=qn||Nd(e,n,a,s,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Yf(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Lt(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Pt(l):(l=mt(n)?Ds:tt.current,l=kr(e,l));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&bd(e,o,s,l),qn=!1,d=e.memoizedState,o.state=d,fa(e,s,o,r);var y=e.memoizedState;a!==h||d!==y||ft.current||qn?(typeof g=="function"&&(qc(e,n,g,s),y=e.memoizedState),(c=qn||Nd(e,n,c,s,d,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),s=!1)}return Gc(t,e,n,s,i,r)}function Gc(t,e,n,s,r,i){xm(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&_d(e,n,!1),An(t,e,i);s=e.stateNode,wv.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Sr(e,t.child,null,i),e.child=Sr(e,null,a,i)):st(t,e,a,i),e.memoizedState=s.state,r&&_d(e,n,!0),e.child}function wm(t){var e=t.stateNode;e.pendingContext?vd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vd(t,e.context,!1),Uu(t,e.containerInfo)}function Pd(t,e,n,s,r){return Tr(),Fu(r),e.flags|=256,st(t,e,n,s),e.child}var $c={dehydrated:null,treeContext:null,retryLane:0};function Hc(t){return{baseLanes:t,cachePool:null,transitions:null}}function km(t,e,n){var s=e.pendingProps,r=_e.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),he(_e,r&1),t===null)return Lc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ml(o,s,0,null),t=bs(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Hc(n),e.memoizedState=$c,t):Xu(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return kv(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=ts(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=ts(a,i):(i=bs(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?Hc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$c,s}return i=t.child,t=i.sibling,s=ts(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Xu(t,e){return e=ml({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Do(t,e,n,s){return s!==null&&Fu(s),Sr(e,t.child,null,n),t=Xu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kv(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=tc(Error(M(422))),Do(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=ml({mode:"visible",children:s.children},r,0,null),i=bs(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Sr(e,t.child,null,o),e.child.memoizedState=Hc(o),e.memoizedState=$c,i);if(!(e.mode&1))return Do(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(M(419)),s=tc(i,s,void 0),Do(t,e,o,s)}if(a=(o&t.childLanes)!==0,pt||a){if(s=We,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,bn(t,r),Ht(s,t,r,-1))}return sh(),s=tc(Error(M(421))),Do(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Pv.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,wt=Xn(r.nextSibling),Tt=e,ye=!0,qt=null,t!==null&&(Dt[It++]=_n,Dt[It++]=xn,Dt[It++]=Is,_n=t.id,xn=t.overflow,Is=e),e=Xu(e,s.children),e.flags|=4096,e)}function jd(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Bc(t.return,e,n)}function nc(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Tm(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(st(t,e,s.children,n),s=_e.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jd(t,n,e);else if(t.tag===19)jd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(he(_e,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ma(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),nc(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ma(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}nc(e,!0,n,null,i);break;case"together":nc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $o(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function An(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=ts(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ts(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tv(t,e,n){switch(e.tag){case 3:wm(e),Tr();break;case 5:Qf(e);break;case 1:mt(e.type)&&ca(e);break;case 4:Uu(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;he(da,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(he(_e,_e.current&1),e.flags|=128,null):n&e.child.childLanes?km(t,e,n):(he(_e,_e.current&1),t=An(t,e,n),t!==null?t.sibling:null);he(_e,_e.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Tm(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),he(_e,_e.current),s)break;return null;case 22:case 23:return e.lanes=0,_m(t,e,n)}return An(t,e,n)}var Sm,Yc,Em,Cm;Sm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yc=function(){};Em=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,Ts(ln.current);var i=null;switch(n){case"input":r=gc(t,r),s=gc(t,s),i=[];break;case"select":r=ke({},r,{value:void 0}),s=ke({},s,{value:void 0}),i=[];break;case"textarea":r=_c(t,r),s=_c(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=aa)}wc(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(mi.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(mi.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&pe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Cm=function(t,e,n,s){n!==s&&(e.flags|=4)};function Zr(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Sv(t,e,n){var s=e.pendingProps;switch(ju(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(e),null;case 1:return mt(e.type)&&la(),Ze(e),null;case 3:return s=e.stateNode,Er(),fe(ft),fe(tt),Gu(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(bo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qt!==null&&(nu(qt),qt=null))),Yc(t,e),Ze(e),null;case 5:Wu(e);var r=Ts(Ni.current);if(n=e.type,t!==null&&e.stateNode!=null)Em(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(M(166));return Ze(e),null}if(t=Ts(ln.current),bo(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[sn]=e,s[Ei]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",s),pe("close",s);break;case"iframe":case"object":case"embed":pe("load",s);break;case"video":case"audio":for(r=0;r<si.length;r++)pe(si[r],s);break;case"source":pe("error",s);break;case"img":case"image":case"link":pe("error",s),pe("load",s);break;case"details":pe("toggle",s);break;case"input":Gh(s,i),pe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},pe("invalid",s);break;case"textarea":Hh(s,i),pe("invalid",s)}wc(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&No(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&No(s.textContent,a,t),r=["children",""+a]):mi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pe("scroll",s)}switch(n){case"input":_o(s),$h(s,i,!0);break;case"textarea":_o(s),Yh(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=aa)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[sn]=e,t[Ei]=s,Sm(t,e,!1,!1),e.stateNode=t;e:{switch(o=kc(n,s),n){case"dialog":pe("cancel",t),pe("close",t),r=s;break;case"iframe":case"object":case"embed":pe("load",t),r=s;break;case"video":case"audio":for(r=0;r<si.length;r++)pe(si[r],t);r=s;break;case"source":pe("error",t),r=s;break;case"img":case"image":case"link":pe("error",t),pe("load",t),r=s;break;case"details":pe("toggle",t),r=s;break;case"input":Gh(t,s),r=gc(t,s),pe("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=ke({},s,{value:void 0}),pe("invalid",t);break;case"textarea":Hh(t,s),r=_c(t,s),pe("invalid",t);break;default:r=s}wc(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?nf(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ef(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&gi(t,l):typeof l=="number"&&gi(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&pe("scroll",t):l!=null&&wu(t,i,l,o))}switch(n){case"input":_o(t),$h(t,s,!1);break;case"textarea":_o(t),Yh(t);break;case"option":s.value!=null&&t.setAttribute("value",""+rs(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?hr(t,!!s.multiple,i,!1):s.defaultValue!=null&&hr(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=aa)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ze(e),null;case 6:if(t&&e.stateNode!=null)Cm(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(M(166));if(n=Ts(Ni.current),Ts(ln.current),bo(e)){if(s=e.stateNode,n=e.memoizedProps,s[sn]=e,(i=s.nodeValue!==n)&&(t=Tt,t!==null))switch(t.tag){case 3:No(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[sn]=e,e.stateNode=s}return Ze(e),null;case 13:if(fe(_e),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&wt!==null&&e.mode&1&&!(e.flags&128))Wf(),Tr(),e.flags|=98560,i=!1;else if(i=bo(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[sn]=e}else Tr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ze(e),i=!1}else qt!==null&&(nu(qt),qt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||_e.current&1?Be===0&&(Be=3):sh())),e.updateQueue!==null&&(e.flags|=4),Ze(e),null);case 4:return Er(),Yc(t,e),t===null&&Ti(e.stateNode.containerInfo),Ze(e),null;case 10:return Bu(e.type._context),Ze(e),null;case 17:return mt(e.type)&&la(),Ze(e),null;case 19:if(fe(_e),i=e.memoizedState,i===null)return Ze(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Zr(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ma(t),o!==null){for(e.flags|=128,Zr(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(_e,_e.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>Nr&&(e.flags|=128,s=!0,Zr(i,!1),e.lanes=4194304)}else{if(!s)if(t=ma(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ye)return Ze(e),null}else 2*Me()-i.renderingStartTime>Nr&&n!==1073741824&&(e.flags|=128,s=!0,Zr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=_e.current,he(_e,s?n&1|2:n&1),e):(Ze(e),null);case 22:case 23:return nh(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?xt&1073741824&&(Ze(e),e.subtreeFlags&6&&(e.flags|=8192)):Ze(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Ev(t,e){switch(ju(e),e.tag){case 1:return mt(e.type)&&la(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Er(),fe(ft),fe(tt),Gu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wu(e),null;case 13:if(fe(_e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Tr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fe(_e),null;case 4:return Er(),null;case 10:return Bu(e.type._context),null;case 22:case 23:return nh(),null;case 24:return null;default:return null}}var Io=!1,Je=!1,Cv=typeof WeakSet=="function"?WeakSet:Set,L=null;function lr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Se(t,e,s)}else n.current=null}function Qc(t,e,n){try{n()}catch(s){Se(t,e,s)}}var Fd=!1;function Nv(t,e){if(Mc=ra,t=If(),Ru(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var g;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==i||s!==0&&h.nodeType!==3||(l=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)d=h,h=g;for(;;){if(h===t)break t;if(d===n&&++c===r&&(a=o),d===i&&++u===s&&(l=o),(g=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oc={focusedElem:t,selectionRange:n},ra=!1,L=e;L!==null;)if(e=L,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,L=t;else for(;L!==null;){e=L;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,x=y.memoizedState,f=e.stateNode,p=f.getSnapshotBeforeUpdate(e.elementType===e.type?_:Lt(e.type,_),x);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(k){Se(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}return y=Fd,Fd=!1,y}function ui(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Qc(e,n,i)}r=r.next}while(r!==s)}}function pl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Kc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Nm(t){var e=t.alternate;e!==null&&(t.alternate=null,Nm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sn],delete e[Ei],delete e[jc],delete e[cv],delete e[uv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bm(t){return t.tag===5||t.tag===3||t.tag===4}function Vd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xc(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=aa));else if(s!==4&&(t=t.child,t!==null))for(Xc(t,e,n),t=t.sibling;t!==null;)Xc(t,e,n),t=t.sibling}function Zc(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Zc(t,e,n),t=t.sibling;t!==null;)Zc(t,e,n),t=t.sibling}var $e=null,Bt=!1;function Vn(t,e,n){for(n=n.child;n!==null;)Am(t,e,n),n=n.sibling}function Am(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(il,n)}catch{}switch(n.tag){case 5:Je||lr(n,e);case 6:var s=$e,r=Bt;$e=null,Vn(t,e,n),$e=s,Bt=r,$e!==null&&(Bt?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(Bt?(t=$e,n=n.stateNode,t.nodeType===8?Ql(t.parentNode,n):t.nodeType===1&&Ql(t,n),xi(t)):Ql($e,n.stateNode));break;case 4:s=$e,r=Bt,$e=n.stateNode.containerInfo,Bt=!0,Vn(t,e,n),$e=s,Bt=r;break;case 0:case 11:case 14:case 15:if(!Je&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Qc(n,e,o),r=r.next}while(r!==s)}Vn(t,e,n);break;case 1:if(!Je&&(lr(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Se(n,e,a)}Vn(t,e,n);break;case 21:Vn(t,e,n);break;case 22:n.mode&1?(Je=(s=Je)||n.memoizedState!==null,Vn(t,e,n),Je=s):Vn(t,e,n);break;default:Vn(t,e,n)}}function Ld(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Cv),e.forEach(function(s){var r=jv.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function Vt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$e=a.stateNode,Bt=!1;break e;case 3:$e=a.stateNode.containerInfo,Bt=!0;break e;case 4:$e=a.stateNode.containerInfo,Bt=!0;break e}a=a.return}if($e===null)throw Error(M(160));Am(i,o,r),$e=null,Bt=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Se(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dm(e,t),e=e.sibling}function Dm(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vt(e,t),tn(t),s&4){try{ui(3,t,t.return),pl(3,t)}catch(_){Se(t,t.return,_)}try{ui(5,t,t.return)}catch(_){Se(t,t.return,_)}}break;case 1:Vt(e,t),tn(t),s&512&&n!==null&&lr(n,n.return);break;case 5:if(Vt(e,t),tn(t),s&512&&n!==null&&lr(n,n.return),t.flags&32){var r=t.stateNode;try{gi(r,"")}catch(_){Se(t,t.return,_)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Xp(r,i),kc(a,o);var c=kc(a,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?nf(r,h):u==="dangerouslySetInnerHTML"?ef(r,h):u==="children"?gi(r,h):wu(r,u,h,c)}switch(a){case"input":yc(r,i);break;case"textarea":Zp(r,i);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?hr(r,!!i.multiple,g,!1):d!==!!i.multiple&&(i.defaultValue!=null?hr(r,!!i.multiple,i.defaultValue,!0):hr(r,!!i.multiple,i.multiple?[]:"",!1))}r[Ei]=i}catch(_){Se(t,t.return,_)}}break;case 6:if(Vt(e,t),tn(t),s&4){if(t.stateNode===null)throw Error(M(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(_){Se(t,t.return,_)}}break;case 3:if(Vt(e,t),tn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{xi(e.containerInfo)}catch(_){Se(t,t.return,_)}break;case 4:Vt(e,t),tn(t);break;case 13:Vt(e,t),tn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(eh=Me())),s&4&&Ld(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Je=(c=Je)||u,Vt(e,t),Je=c):Vt(e,t),tn(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(L=t,u=t.child;u!==null;){for(h=L=u;L!==null;){switch(d=L,g=d.child,d.tag){case 0:case 11:case 14:case 15:ui(4,d,d.return);break;case 1:lr(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){s=d,n=d.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){Se(s,n,_)}}break;case 5:lr(d,d.return);break;case 22:if(d.memoizedState!==null){qd(h);continue}}g!==null?(g.return=d,L=g):qd(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=tf("display",o))}catch(_){Se(t,t.return,_)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(_){Se(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vt(e,t),tn(t),s&4&&Ld(t);break;case 21:break;default:Vt(e,t),tn(t)}}function tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bm(n)){var s=n;break e}n=n.return}throw Error(M(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(gi(r,""),s.flags&=-33);var i=Vd(t);Zc(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=Vd(t);Xc(t,a,o);break;default:throw Error(M(161))}}catch(l){Se(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bv(t,e,n){L=t,Im(t)}function Im(t,e,n){for(var s=(t.mode&1)!==0;L!==null;){var r=L,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||Io;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Je;a=Io;var c=Je;if(Io=o,(Je=l)&&!c)for(L=r;L!==null;)o=L,l=o.child,o.tag===22&&o.memoizedState!==null?zd(r):l!==null?(l.return=o,L=l):zd(r);for(;i!==null;)L=i,Im(i),i=i.sibling;L=r,Io=a,Je=c}Bd(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,L=i):Bd(t)}}function Bd(t){for(;L!==null;){var e=L;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Je||pl(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Je)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Lt(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Sd(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sd(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&xi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Je||e.flags&512&&Kc(e)}catch(d){Se(e,e.return,d)}}if(e===t){L=null;break}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}}function qd(t){for(;L!==null;){var e=L;if(e===t){L=null;break}var n=e.sibling;if(n!==null){n.return=e.return,L=n;break}L=e.return}}function zd(t){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pl(4,e)}catch(l){Se(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Se(e,r,l)}}var i=e.return;try{Kc(e)}catch(l){Se(e,i,l)}break;case 5:var o=e.return;try{Kc(e)}catch(l){Se(e,o,l)}}}catch(l){Se(e,e.return,l)}if(e===t){L=null;break}var a=e.sibling;if(a!==null){a.return=e.return,L=a;break}L=e.return}}var Av=Math.ceil,va=On.ReactCurrentDispatcher,Zu=On.ReactCurrentOwner,Ot=On.ReactCurrentBatchConfig,ee=0,We=null,Pe=null,He=0,xt=0,cr=hs(0),Be=0,Ii=null,Os=0,fl=0,Ju=0,hi=null,ht=null,eh=0,Nr=1/0,gn=null,_a=!1,Jc=null,Jn=null,Mo=!1,Hn=null,xa=0,di=0,eu=null,Ho=-1,Yo=0;function ot(){return ee&6?Me():Ho!==-1?Ho:Ho=Me()}function es(t){return t.mode&1?ee&2&&He!==0?He&-He:dv.transition!==null?(Yo===0&&(Yo=mf()),Yo):(t=le,t!==0||(t=window.event,t=t===void 0?16:kf(t.type)),t):1}function Ht(t,e,n,s){if(50<di)throw di=0,eu=null,Error(M(185));Zi(t,n,s),(!(ee&2)||t!==We)&&(t===We&&(!(ee&2)&&(fl|=n),Be===4&&Wn(t,He)),gt(t,s),n===1&&ee===0&&!(e.mode&1)&&(Nr=Me()+500,ul&&ds()))}function gt(t,e){var n=t.callbackNode;dy(t,e);var s=sa(t,t===We?He:0);if(s===0)n!==null&&Xh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Xh(n),e===1)t.tag===0?hv(Ud.bind(null,t)):qf(Ud.bind(null,t)),av(function(){!(ee&6)&&ds()}),n=null;else{switch(gf(s)){case 1:n=Cu;break;case 4:n=pf;break;case 16:n=na;break;case 536870912:n=ff;break;default:n=na}n=Lm(n,Mm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Mm(t,e){if(Ho=-1,Yo=0,ee&6)throw Error(M(327));var n=t.callbackNode;if(gr()&&t.callbackNode!==n)return null;var s=sa(t,t===We?He:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=wa(t,s);else{e=s;var r=ee;ee|=2;var i=Rm();(We!==t||He!==e)&&(gn=null,Nr=Me()+500,Ns(t,e));do try{Mv();break}catch(a){Om(t,a)}while(1);Lu(),va.current=i,ee=r,Pe!==null?e=0:(We=null,He=0,e=Be)}if(e!==0){if(e===2&&(r=Nc(t),r!==0&&(s=r,e=tu(t,r))),e===1)throw n=Ii,Ns(t,0),Wn(t,s),gt(t,Me()),n;if(e===6)Wn(t,s);else{if(r=t.current.alternate,!(s&30)&&!Dv(r)&&(e=wa(t,s),e===2&&(i=Nc(t),i!==0&&(s=i,e=tu(t,i))),e===1))throw n=Ii,Ns(t,0),Wn(t,s),gt(t,Me()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(M(345));case 2:_s(t,ht,gn);break;case 3:if(Wn(t,s),(s&130023424)===s&&(e=eh+500-Me(),10<e)){if(sa(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){ot(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Pc(_s.bind(null,t,ht,gn),e);break}_s(t,ht,gn);break;case 4:if(Wn(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-$t(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Me()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Av(s/1960))-s,10<s){t.timeoutHandle=Pc(_s.bind(null,t,ht,gn),s);break}_s(t,ht,gn);break;case 5:_s(t,ht,gn);break;default:throw Error(M(329))}}}return gt(t,Me()),t.callbackNode===n?Mm.bind(null,t):null}function tu(t,e){var n=hi;return t.current.memoizedState.isDehydrated&&(Ns(t,e).flags|=256),t=wa(t,e),t!==2&&(e=ht,ht=n,e!==null&&nu(e)),t}function nu(t){ht===null?ht=t:ht.push.apply(ht,t)}function Dv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!Yt(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~Ju,e&=~fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$t(e),s=1<<n;t[n]=-1,e&=~s}}function Ud(t){if(ee&6)throw Error(M(327));gr();var e=sa(t,0);if(!(e&1))return gt(t,Me()),null;var n=wa(t,e);if(t.tag!==0&&n===2){var s=Nc(t);s!==0&&(e=s,n=tu(t,s))}if(n===1)throw n=Ii,Ns(t,0),Wn(t,e),gt(t,Me()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_s(t,ht,gn),gt(t,Me()),null}function th(t,e){var n=ee;ee|=1;try{return t(e)}finally{ee=n,ee===0&&(Nr=Me()+500,ul&&ds())}}function Rs(t){Hn!==null&&Hn.tag===0&&!(ee&6)&&gr();var e=ee;ee|=1;var n=Ot.transition,s=le;try{if(Ot.transition=null,le=1,t)return t()}finally{le=s,Ot.transition=n,ee=e,!(ee&6)&&ds()}}function nh(){xt=cr.current,fe(cr)}function Ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ov(n)),Pe!==null)for(n=Pe.return;n!==null;){var s=n;switch(ju(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&la();break;case 3:Er(),fe(ft),fe(tt),Gu();break;case 5:Wu(s);break;case 4:Er();break;case 13:fe(_e);break;case 19:fe(_e);break;case 10:Bu(s.type._context);break;case 22:case 23:nh()}n=n.return}if(We=t,Pe=t=ts(t.current,null),He=xt=e,Be=0,Ii=null,Ju=fl=Os=0,ht=hi=null,ks!==null){for(e=0;e<ks.length;e++)if(n=ks[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}ks=null}return t}function Om(t,e){do{var n=Pe;try{if(Lu(),Wo.current=ya,ga){for(var s=we.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}ga=!1}if(Ms=0,Ue=Fe=we=null,ci=!1,bi=0,Zu.current=null,n===null||n.return===null){Be=1,Ii=e,Pe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=He,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Dd(o);if(g!==null){g.flags&=-257,Id(g,o,a,i,e),g.mode&1&&Ad(i,c,e),e=g,l=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){Ad(i,c,e),sh();break e}l=Error(M(426))}}else if(ye&&a.mode&1){var x=Dd(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Id(x,o,a,i,e),Fu(Cr(l,a));break e}}i=l=Cr(l,a),Be!==4&&(Be=2),hi===null?hi=[i]:hi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var f=gm(i,l,e);Td(i,f);break e;case 1:a=l;var p=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Jn===null||!Jn.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=ym(i,a,e);Td(i,k);break e}}i=i.return}while(i!==null)}jm(n)}catch(w){e=w,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(1)}function Rm(){var t=va.current;return va.current=ya,t===null?ya:t}function sh(){(Be===0||Be===3||Be===2)&&(Be=4),We===null||!(Os&268435455)&&!(fl&268435455)||Wn(We,He)}function wa(t,e){var n=ee;ee|=2;var s=Rm();(We!==t||He!==e)&&(gn=null,Ns(t,e));do try{Iv();break}catch(r){Om(t,r)}while(1);if(Lu(),ee=n,va.current=s,Pe!==null)throw Error(M(261));return We=null,He=0,Be}function Iv(){for(;Pe!==null;)Pm(Pe)}function Mv(){for(;Pe!==null&&!sy();)Pm(Pe)}function Pm(t){var e=Vm(t.alternate,t,xt);t.memoizedProps=t.pendingProps,e===null?jm(t):Pe=e,Zu.current=null}function jm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ev(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Pe=null;return}}else if(n=Sv(n,e,xt),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);Be===0&&(Be=5)}function _s(t,e,n){var s=le,r=Ot.transition;try{Ot.transition=null,le=1,Ov(t,e,n,s)}finally{Ot.transition=r,le=s}return null}function Ov(t,e,n,s){do gr();while(Hn!==null);if(ee&6)throw Error(M(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(py(t,i),t===We&&(Pe=We=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mo||(Mo=!0,Lm(na,function(){return gr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ot.transition,Ot.transition=null;var o=le;le=1;var a=ee;ee|=4,Zu.current=null,Nv(t,n),Dm(n,t),Jy(Oc),ra=!!Mc,Oc=Mc=null,t.current=n,bv(n),ry(),ee=a,le=o,Ot.transition=i}else t.current=n;if(Mo&&(Mo=!1,Hn=t,xa=r),i=t.pendingLanes,i===0&&(Jn=null),ay(n.stateNode),gt(t,Me()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(_a)throw _a=!1,t=Jc,Jc=null,t;return xa&1&&t.tag!==0&&gr(),i=t.pendingLanes,i&1?t===eu?di++:(di=0,eu=t):di=0,ds(),null}function gr(){if(Hn!==null){var t=gf(xa),e=Ot.transition,n=le;try{if(Ot.transition=null,le=16>t?16:t,Hn===null)var s=!1;else{if(t=Hn,Hn=null,xa=0,ee&6)throw Error(M(331));var r=ee;for(ee|=4,L=t.current;L!==null;){var i=L,o=i.child;if(L.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(L=c;L!==null;){var u=L;switch(u.tag){case 0:case 11:case 15:ui(8,u,i)}var h=u.child;if(h!==null)h.return=u,L=h;else for(;L!==null;){u=L;var d=u.sibling,g=u.return;if(Nm(u),u===c){L=null;break}if(d!==null){d.return=g,L=d;break}L=g}}}var y=i.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}L=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,L=o;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ui(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,L=f;break e}L=i.return}}var p=t.current;for(L=p;L!==null;){o=L;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,L=v;else e:for(o=p;L!==null;){if(a=L,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pl(9,a)}}catch(w){Se(a,a.return,w)}if(a===o){L=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,L=k;break e}L=a.return}}if(ee=r,ds(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(il,t)}catch{}s=!0}return s}finally{le=n,Ot.transition=e}}return!1}function Wd(t,e,n){e=Cr(n,e),e=gm(t,e,1),t=Zn(t,e,1),e=ot(),t!==null&&(Zi(t,1,e),gt(t,e))}function Se(t,e,n){if(t.tag===3)Wd(t,t,n);else for(;e!==null;){if(e.tag===3){Wd(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Jn===null||!Jn.has(s))){t=Cr(n,t),t=ym(e,t,1),e=Zn(e,t,1),t=ot(),e!==null&&(Zi(e,1,t),gt(e,t));break}}e=e.return}}function Rv(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=ot(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(He&n)===n&&(Be===4||Be===3&&(He&130023424)===He&&500>Me()-eh?Ns(t,0):Ju|=n),gt(t,e)}function Fm(t,e){e===0&&(t.mode&1?(e=ko,ko<<=1,!(ko&130023424)&&(ko=4194304)):e=1);var n=ot();t=bn(t,e),t!==null&&(Zi(t,e,n),gt(t,n))}function Pv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fm(t,n)}function jv(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(M(314))}s!==null&&s.delete(e),Fm(t,n)}var Vm;Vm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pt=!1,Tv(t,e,n);pt=!!(t.flags&131072)}else pt=!1,ye&&e.flags&1048576&&zf(e,ha,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;$o(t,e),t=e.pendingProps;var r=kr(e,tt.current);mr(e,n),r=Hu(null,e,s,t,r,n);var i=Yu();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mt(s)?(i=!0,ca(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,zu(e),r.updater=dl,e.stateNode=r,r._reactInternals=e,zc(e,s,t,n),e=Gc(null,e,s,!0,i,n)):(e.tag=0,ye&&i&&Pu(e),st(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch($o(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=Vv(s),t=Lt(s,t),r){case 0:e=Wc(null,e,s,t,n);break e;case 1:e=Rd(null,e,s,t,n);break e;case 11:e=Md(null,e,s,t,n);break e;case 14:e=Od(null,e,s,Lt(s.type,t),n);break e}throw Error(M(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Lt(s,r),Wc(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Lt(s,r),Rd(t,e,s,r,n);case 3:e:{if(wm(e),t===null)throw Error(M(387));s=e.pendingProps,i=e.memoizedState,r=i.element,Yf(t,e),fa(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Cr(Error(M(423)),e),e=Pd(t,e,s,n,r);break e}else if(s!==r){r=Cr(Error(M(424)),e),e=Pd(t,e,s,n,r);break e}else for(wt=Xn(e.stateNode.containerInfo.firstChild),Tt=e,ye=!0,qt=null,n=$f(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tr(),s===r){e=An(t,e,n);break e}st(t,e,s,n)}e=e.child}return e;case 5:return Qf(e),t===null&&Lc(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Rc(s,r)?o=null:i!==null&&Rc(s,i)&&(e.flags|=32),xm(t,e),st(t,e,o,n),e.child;case 6:return t===null&&Lc(e),null;case 13:return km(t,e,n);case 4:return Uu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Sr(e,null,s,n):st(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Lt(s,r),Md(t,e,s,r,n);case 7:return st(t,e,e.pendingProps,n),e.child;case 8:return st(t,e,e.pendingProps.children,n),e.child;case 12:return st(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,he(da,s._currentValue),s._currentValue=o,i!==null)if(Yt(i.value,o)){if(i.children===r.children&&!ft.current){e=An(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=kn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Bc(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(M(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Bc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}st(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,mr(e,n),r=Pt(r),s=s(r),e.flags|=1,st(t,e,s,n),e.child;case 14:return s=e.type,r=Lt(s,e.pendingProps),r=Lt(s.type,r),Od(t,e,s,r,n);case 15:return vm(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Lt(s,r),$o(t,e),e.tag=1,mt(s)?(t=!0,ca(e)):t=!1,mr(e,n),mm(e,s,r),zc(e,s,r,n),Gc(null,e,s,!0,t,n);case 19:return Tm(t,e,n);case 22:return _m(t,e,n)}throw Error(M(156,e.tag))};function Lm(t,e){return df(t,e)}function Fv(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,e,n,s){return new Fv(t,e,n,s)}function rh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vv(t){if(typeof t=="function")return rh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tu)return 11;if(t===Su)return 14}return 2}function ts(t,e){var n=t.alternate;return n===null?(n=Mt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qo(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")rh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Js:return bs(n.children,r,i,e);case ku:o=8,r|=8;break;case dc:return t=Mt(12,n,e,r|2),t.elementType=dc,t.lanes=i,t;case pc:return t=Mt(13,n,e,r),t.elementType=pc,t.lanes=i,t;case fc:return t=Mt(19,n,e,r),t.elementType=fc,t.lanes=i,t;case Yp:return ml(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $p:o=10;break e;case Hp:o=9;break e;case Tu:o=11;break e;case Su:o=14;break e;case Bn:o=16,s=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Mt(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function bs(t,e,n,s){return t=Mt(7,t,s,e),t.lanes=n,t}function ml(t,e,n,s){return t=Mt(22,t,s,e),t.elementType=Yp,t.lanes=n,t.stateNode={isHidden:!1},t}function sc(t,e,n){return t=Mt(6,t,null,e),t.lanes=n,t}function rc(t,e,n){return e=Mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lv(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ih(t,e,n,s,r,i,o,a,l){return t=new Lv(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zu(i),t}function Bv(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zs,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Bm(t){if(!t)return is;t=t._reactInternals;e:{if(Us(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(mt(n))return Bf(t,n,e)}return e}function qm(t,e,n,s,r,i,o,a,l){return t=ih(n,s,!0,t,r,i,o,a,l),t.context=Bm(null),n=t.current,s=ot(),r=es(n),i=kn(s,r),i.callback=e??null,Zn(n,i,r),t.current.lanes=r,Zi(t,r,s),gt(t,s),t}function gl(t,e,n,s){var r=e.current,i=ot(),o=es(r);return n=Bm(n),e.context===null?e.context=n:e.pendingContext=n,e=kn(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Zn(r,e,o),t!==null&&(Ht(t,r,o,i),Uo(t,r,o)),o}function ka(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function oh(t,e){Gd(t,e),(t=t.alternate)&&Gd(t,e)}function qv(){return null}var zm=typeof reportError=="function"?reportError:function(t){console.error(t)};function ah(t){this._internalRoot=t}yl.prototype.render=ah.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));gl(t,e,null,null)};yl.prototype.unmount=ah.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rs(function(){gl(null,t,null,null)}),e[Nn]=null}};function yl(t){this._internalRoot=t}yl.prototype.unstable_scheduleHydration=function(t){if(t){var e=_f();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&wf(t)}};function lh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $d(){}function zv(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=ka(o);i.call(c)}}var o=qm(e,s,t,0,null,!1,!1,"",$d);return t._reactRootContainer=o,t[Nn]=o.current,Ti(t.nodeType===8?t.parentNode:t),Rs(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=ka(l);a.call(c)}}var l=ih(t,0,!1,null,null,!1,!1,"",$d);return t._reactRootContainer=l,t[Nn]=l.current,Ti(t.nodeType===8?t.parentNode:t),Rs(function(){gl(e,l,n,s)}),l}function _l(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=ka(o);a.call(l)}}gl(e,o,t,r)}else o=zv(n,e,t,r,s);return ka(o)}yf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ni(e.pendingLanes);n!==0&&(Nu(e,n|1),gt(e,Me()),!(ee&6)&&(Nr=Me()+500,ds()))}break;case 13:Rs(function(){var s=bn(t,1);if(s!==null){var r=ot();Ht(s,t,1,r)}}),oh(t,1)}};bu=function(t){if(t.tag===13){var e=bn(t,134217728);if(e!==null){var n=ot();Ht(e,t,134217728,n)}oh(t,134217728)}};vf=function(t){if(t.tag===13){var e=es(t),n=bn(t,e);if(n!==null){var s=ot();Ht(n,t,e,s)}oh(t,e)}};_f=function(){return le};xf=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};Sc=function(t,e,n){switch(e){case"input":if(yc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=cl(s);if(!r)throw Error(M(90));Kp(s),yc(s,r)}}}break;case"textarea":Zp(t,n);break;case"select":e=n.value,e!=null&&hr(t,!!n.multiple,e,!1)}};of=th;af=Rs;var Uv={usingClientEntryPoint:!1,Events:[eo,sr,cl,sf,rf,th]},Jr={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wv={bundleType:Jr.bundleType,version:Jr.version,rendererPackageName:Jr.rendererPackageName,rendererConfig:Jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uf(t),t===null?null:t.stateNode},findFiberByHostInstance:Jr.findFiberByHostInstance||qv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{il=Oo.inject(Wv),an=Oo}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uv;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lh(e))throw Error(M(200));return Bv(t,e,null,n)};Nt.createRoot=function(t,e){if(!lh(t))throw Error(M(299));var n=!1,s="",r=zm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=ih(t,1,!1,null,null,n,!1,s,r),t[Nn]=e.current,Ti(t.nodeType===8?t.parentNode:t),new ah(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=uf(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return Rs(t)};Nt.hydrate=function(t,e,n){if(!vl(e))throw Error(M(200));return _l(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!lh(t))throw Error(M(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=zm;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=qm(e,null,t,1,n??null,r,!1,i,o),t[Nn]=e.current,Ti(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new yl(e)};Nt.render=function(t,e,n){if(!vl(e))throw Error(M(200));return _l(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!vl(t))throw Error(M(40));return t._reactRootContainer?(Rs(function(){_l(null,null,t,!1,function(){t._reactRootContainer=null,t[Nn]=null})}),!0):!1};Nt.unstable_batchedUpdates=th;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!vl(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return _l(t,e,n,!1,s)};Nt.version="18.3.1-next-f1338f8080-20240426";function Um(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Um)}catch(t){console.error(t)}}Um(),zp.exports=Nt;var Gv=zp.exports,Hd=Gv;uc.createRoot=Hd.createRoot,uc.hydrateRoot=Hd.hydrateRoot;var $v={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yv=(t,e)=>{const n=K.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},c)=>K.createElement("svg",{ref:c,...$v,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:`lucide lucide-${Hv(t)}`,...l},[...e.map(([u,h])=>K.createElement(u,h)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var _t=Yv;const ch=_t("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Ut=_t("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Yd=_t("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Ps=_t("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Wm=_t("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Gn=_t("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),uh=_t("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Qv=_t("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Kv=_t("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Xv=_t("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),xl=_t("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Zv=_t("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ta=_t("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),Jv=_t("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),e_=["House","Deep House","Progressive House","Tech House","Bass House","Acid House","Tribal House","Techno","Minimal Techno","Industrial Techno","Melodic Techno","Hard Techno","Acid Techno","Trance","Progressive Trance","Psytrance","Hard Trance","Uplifting Trance","Tech Trance","Dubstep","Riddim","Brostep","Melodic Dubstep","Future Riddim","Future Bass","Melodic Bass","Hybrid Trap","Wave","Trap (EDM)","Festival Trap","Hard Trap","Drum and Bass","Jungle","Liquid DnB","Neurofunk","Jump Up","Hardstep","Breakbeat","Big Beat","UK Garage","2-Step","Speed Garage","Hardcore","Happy Hardcore","Gabber","Speedcore","Electro","Electro House","Complextro","Moombahton","Moombahcore","Ambient","Dark Ambient","Drone","Space Ambient","Cinematic Ambient","Downtempo","Chillout","Lounge","Trip Hop","Chillstep","New Age","Meditation","Nature Sounds","Synthwave","Retrowave","Darksynth","Cyberpunk","Outrun","Vaporwave","Future Funk","Mallsoft","Slushwave","Hip Hop","Boom Bap","Trap","Lo-fi Hip Hop","Cloud Rap","Drill","Phonk","Memphis Rap","Crunk","Gangsta Rap","Conscious Rap","Grime","UK Drill","Afrobeat","Afro House","R&B","Contemporary R&B","Neo-Soul","Soul","Funk","P-Funk","Gospel","Blues","Smooth Jazz","Pop","Indie Pop","Synth-Pop","Electropop","K-Pop","J-Pop","Dance Pop","Teen Pop","Art Pop","Bedroom Pop","Rock","Alternative Rock","Indie Rock","Post-Rock","Math Rock","Hard Rock","Metal","Heavy Metal","Death Metal","Black Metal","Punk Rock","Post-Punk","Hardcore Punk","Pop Punk","Nu Metal","Metalcore","Deathcore","Progressive Metal","Shoegaze","Dream Pop","Noise Rock","Jazz","Smooth Jazz","Fusion Jazz","Bebop","Swing","Reggae","Dub","Dancehall","Ska","Rocksteady","Latin","Salsa","Bachata","Reggaeton","Cumbia","Flamenco","Tango","Bossa Nova","Samba","World Music","Celtic","Indian Classical","Arabic","African","Experimental","Noise","Industrial","EBM","Darkwave","IDM","Glitch","Microsound","Lowercase","Field Recording","Musique Concrète","Acousmatic","Electroacoustic"],t_=["Dark","Atmospheric","Energetic","Uplifting","Chill","Relaxed","Aggressive","Intense","Melancholic","Euphoric","Dreamy","Ethereal","Raw","Gritty","Smooth","Sophisticated","Nostalgic","Retro","Futuristic","Hypnotic","Driving","Peaceful","Romantic","Joyful"],n_=["Ableton Live","Logic Pro X","FL Studio","Pro Tools","Cubase","Studio One","Reason","Bitwig Studio","Reaper","GarageBand"],s_=["C Major","G Major","D Major","A Major","E Major","B Major","F# Major","C# Major","F Major","Bb Major","Eb Major","Ab Major","Db Major","Gb Major","Cb Major","A Minor","E Minor","B Minor","F# Minor","C# Minor","G# Minor","D# Minor","A# Minor","D Minor","G Minor","C Minor","F Minor","Bb Minor","Eb Minor","Ab Minor"],ic={Pop:["I-V-vi-IV","vi-IV-I-V","I-vi-IV-V"],Rock:["I-bVII-IV-I","vi-IV-I-V","I-V-vi-IV"],Jazz:["ii-V-I","I-vi-ii-V","iii-vi-ii-V-I"],Electronic:["i-bVII-bVI-bVII","i-v-bVI-bVII","i-bIII-bVII-bVI"],"Hip Hop":["i-bVII-bVI-bVII","i-iv-bVII-bIII","i-bVI-bVII-i"],Ambient:["I-iii-vi-IV","vi-I-iii-IV","I-V-iii-vi"]},r_={Ambient:[60,90],"Hip Hop":[70,140],House:[120,130],Techno:[120,150],Trance:[128,140],Dubstep:[140,150],"Drum and Bass":[160,180],Pop:[100,130],Rock:[110,140]};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qd;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Qd||(Qd={}));var Kd;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Kd||(Kd={}));var Xd;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Xd||(Xd={}));var Zd;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(Zd||(Zd={}));var Sa;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER"})(Sa||(Sa={}));var Jd;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(Jd||(Jd={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ep extends Mi{constructor(e,n){super(e),this.response=n}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="https://generativelanguage.googleapis.com",o_="v1",a_="0.2.1",l_="genai-js";var js;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(js||(js={}));class no{constructor(e,n,s,r){this.model=e,this.task=n,this.apiKey=s,this.stream=r}toString(){let e=`${i_}/${o_}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}function c_(){return`${l_}/${a_}`}async function so(t,e,n){let s;try{if(s=await fetch(t.toString(),Object.assign(Object.assign({},u_(n)),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":c_(),"x-goog-api-key":t.apiKey},body:e})),!s.ok){let r="";try{const i=await s.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`)}catch{}throw new Error(`[${s.status} ${s.statusText}] ${r}`)}}catch(r){const i=new Mi(`Error fetching from ${t.toString()}: ${r.message}`);throw i.stack=r.stack,i}return s}function u_(t){const e={};if((t==null?void 0:t.timeout)>=0){const n=new AbortController,s=n.signal;setTimeout(()=>n.abort(),t.timeout),e.signal=s}return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Gm(t.candidates[0]))throw new ep(`${Ea(t)}`,t);return h_(t)}else if(t.promptFeedback)throw new ep(`Text not available. ${Ea(t)}`,t);return""},t}function h_(t){var e,n,s,r;return!((r=(s=(n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s[0])===null||r===void 0)&&r.text?t.candidates[0].content.parts[0].text:""}const d_=[Sa.RECITATION,Sa.SAFETY];function Gm(t){return!!t.finishReason&&d_.includes(t.finishReason)}function Ea(t){var e,n,s;let r="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)r+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((s=t.candidates)===null||s===void 0)&&s[0]){const i=t.candidates[0];Gm(i)&&(r+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(r+=`: ${i.finishMessage}`))}return r}function Oi(t){return this instanceof Oi?(this.v=t,this):new Oi(t)}function p_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),r,i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(d){s[d]&&(r[d]=function(g){return new Promise(function(y,_){i.push([d,g,y,_])>1||a(d,g)})})}function a(d,g){try{l(s[d](g))}catch(y){h(i[0][3],y)}}function l(d){d.value instanceof Oi?Promise.resolve(d.value.v).then(c,u):h(i[0][2],d)}function c(d){a("next",d)}function u(d){a("throw",d)}function h(d,g){d(g),i.shift(),i.length&&a(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function f_(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=y_(e),[s,r]=n.tee();return{stream:g_(s),response:m_(r)}}async function m_(t){const e=[],n=t.getReader();for(;;){const{done:s,value:r}=await n.read();if(s)return hh(v_(e));e.push(r)}}function g_(t){return p_(this,arguments,function*(){const n=t.getReader();for(;;){const{value:s,done:r}=yield Oi(n.read());if(r)break;yield yield Oi(hh(s))}})}function y_(t){const e=t.getReader();return new ReadableStream({start(s){let r="";return i();function i(){return e.read().then(({value:o,done:a})=>{if(a){if(r.trim()){s.error(new Mi("Failed to parse stream"));return}s.close();return}r+=o;let l=r.match(tp),c;for(;l;){try{c=JSON.parse(l[1])}catch{s.error(new Mi(`Error parsing JSON response: "${l[1]}"`));return}s.enqueue(c),r=r.substring(l[0].length),l=r.match(tp)}return i()})}}})}function v_(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const s of t)if(s.candidates)for(const r of s.candidates){const i=r.index;if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:r.index}),n.candidates[i].citationMetadata=r.citationMetadata,n.candidates[i].finishReason=r.finishReason,n.candidates[i].finishMessage=r.finishMessage,n.candidates[i].safetyRatings=r.safetyRatings,r.content&&r.content.parts){n.candidates[i].content||(n.candidates[i].content={role:r.content.role||"user",parts:[{text:""}]});for(const o of r.content.parts)o.text&&(n.candidates[i].content.parts[0].text+=o.text)}}return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $m(t,e,n,s){const r=new no(e,js.STREAM_GENERATE_CONTENT,t,!0),i=await so(r,JSON.stringify(n),s);return f_(i)}async function Hm(t,e,n,s){const r=new no(e,js.GENERATE_CONTENT,t,!1),o=await(await so(r,JSON.stringify(n),s)).json();return{response:hh(o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){let n=[];if(typeof t=="string")n=[{text:t}];else for(const s of t)typeof s=="string"?n.push({text:s}):n.push(s);return{role:e,parts:n}}function oc(t){return t.contents?t:{contents:[pi(t,"user")]}}function __(t){return typeof t=="string"||Array.isArray(t)?{content:pi(t,"user")}:t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="SILENT_ERROR";class x_{constructor(e,n,s,r){this.model=n,this.params=s,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s!=null&&s.history&&(this._history=s.history.map(i=>{if(!i.role)throw new Error("Missing role for history item: "+JSON.stringify(i));return pi(i.parts,i.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var n,s;await this._sendPromise;const r=pi(e,"user"),i={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,contents:[...this._history,r]};let o;return this._sendPromise=this._sendPromise.then(()=>Hm(this._apiKey,this.model,i,this.requestOptions)).then(a=>{var l;if(a.response.candidates&&a.response.candidates.length>0){this._history.push(r);const c=Object.assign({parts:[],role:"model"},(l=a.response.candidates)===null||l===void 0?void 0:l[0].content);this._history.push(c)}else{const c=Ea(a.response);c&&console.warn(`sendMessage() was unsuccessful. ${c}. Inspect response object for details.`)}o=a}),await this._sendPromise,o}async sendMessageStream(e){var n,s;await this._sendPromise;const r=pi(e,"user"),i={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,contents:[...this._history,r]},o=$m(this._apiKey,this.model,i,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>o).catch(a=>{throw new Error(np)}).then(a=>a.response).then(a=>{if(a.candidates&&a.candidates.length>0){this._history.push(r);const l=Object.assign({},a.candidates[0].content);l.role||(l.role="model"),this._history.push(l)}else{const l=Ea(a);l&&console.warn(`sendMessageStream() was unsuccessful. ${l}. Inspect response object for details.`)}}).catch(a=>{a.message!==np&&console.error(a)}),o}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(t,e,n,s){const r=new no(e,js.COUNT_TOKENS,t,!1);return(await so(r,JSON.stringify(Object.assign(Object.assign({},n),{model:e})),s)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k_(t,e,n,s){const r=new no(e,js.EMBED_CONTENT,t,!1);return(await so(r,JSON.stringify(n),s)).json()}async function T_(t,e,n,s){const r=new no(e,js.BATCH_EMBED_CONTENTS,t,!1),i=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await so(r,JSON.stringify({requests:i}),s)).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n,s){this.apiKey=e,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.requestOptions=s||{}}async generateContent(e){const n=oc(e);return Hm(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},n),this.requestOptions)}async generateContentStream(e){const n=oc(e);return $m(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},n),this.requestOptions)}startChat(e){return new x_(this.apiKey,this.model,e,this.requestOptions)}async countTokens(e){const n=oc(e);return w_(this.apiKey,this.model,n)}async embedContent(e){const n=__(e);return k_(this.apiKey,this.model,n)}async batchEmbedContents(e){return T_(this.apiKey,this.model,e,this.requestOptions)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Mi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new S_(this.apiKey,e,n)}}const sp={}.VITE_GEMINI_API_KEY||"demo-key";class C_{constructor(){sp!=="demo-key"?(this.genAI=new E_(sp),this.model=this.genAI.getGenerativeModel({model:"gemini-pro"})):(console.warn("Using demo mode - AI features will return mock data"),this.genAI=null,this.model=null)}async generateGuidebook(e){if(!this.model)return this.getMockGuidebook(e);const n=this.buildGuidebookPrompt(e);try{return(await(await this.model.generateContent(n)).response).text()}catch(s){return console.error("Error generating guidebook:",s),this.getMockGuidebook(e)}}async generateMidiSuggestions(e){if(!this.model)return this.getMockMidiSuggestions(e);const n=this.buildMidiPrompt(e);try{const r=await(await this.model.generateContent(n)).response;return this.parseMidiSuggestions(r.text())}catch(s){return console.error("Error generating MIDI suggestions:",s),this.getMockMidiSuggestions(e)}}buildGuidebookPrompt(e){const{genre:n,vibe:s,artistReference:r,daw:i,plugins:o,instruments:a}=e;return`Create a comprehensive music production guidebook for:
    
Genre: ${n.join(", ")||"Not specified"}
Vibe: ${s.join(", ")||"Not specified"}
Artist Reference: ${r||"General style"}
DAW: ${i||"Any DAW"}
Available Plugins: ${o||"Standard plugins"}
Instruments: ${a||"Standard instruments"}

Please provide a detailed guide covering:
1. Song Structure & Arrangement
2. Sound Design & Synthesis
3. Mixing Techniques
4. Recommended Plugins & Settings
5. Chord Progressions & Harmony
6. Rhythm & Groove Patterns
7. Production Tips & Tricks
8. Reference Tracks for Inspiration

Format the response in clear sections with practical, actionable advice.`}buildMidiPrompt(e){const{genre:n,key:s,tempo:r,chordProgression:i}=e;return`Generate MIDI composition suggestions for:
    
Genre: ${n}
Key: ${s}
Tempo: ${r} BPM
Chord Progression: ${i}

Provide specific MIDI patterns for:
1. Main chord progression (with exact notes and timing)
2. Bass line pattern
3. Lead melody ideas
4. Drum pattern (kick, snare, hi-hat patterns)
5. Arpeggiated sequences
6. Pad/atmosphere parts

Include note names, octaves, velocities, and timing information.`}parseMidiSuggestions(e){return{chords:this.extractChordPattern(e),bass:this.extractBassPattern(e),melody:this.extractMelodyPattern(e),drums:this.extractDrumPattern(e)}}extractChordPattern(e){return[{note:"C4",time:0,duration:1,velocity:80},{note:"E4",time:0,duration:1,velocity:80},{note:"G4",time:0,duration:1,velocity:80}]}extractBassPattern(e){return[{note:"C2",time:0,duration:.5,velocity:100},{note:"C2",time:.5,duration:.5,velocity:80}]}extractMelodyPattern(e){return[{note:"C5",time:0,duration:.25,velocity:90},{note:"D5",time:.25,duration:.25,velocity:85},{note:"E5",time:.5,duration:.5,velocity:95}]}extractDrumPattern(e){return{kick:[{time:0,velocity:127},{time:.5,velocity:100}],snare:[{time:.25,velocity:110},{time:.75,velocity:105}],hihat:[{time:0,velocity:80},{time:.125,velocity:60},{time:.25,velocity:80}]}}getMockGuidebook(e){var s;return`# ${((s=e.genre)==null?void 0:s[0])||"Electronic"} Production Guide

## Song Structure
- **Intro**: 8-16 bars with atmospheric elements
- **Verse**: Main groove with minimal elements
- **Chorus**: Full arrangement with lead elements
- **Bridge**: Breakdown or variation section
- **Outro**: Gradual fade or hard stop

## Sound Design
- **Synthesis**: Use subtractive synthesis for bass, FM for leads
- **Effects**: Reverb for space, delay for rhythm, distortion for character
- **Layering**: Combine multiple sounds for richness

## Mixing Tips
- **EQ**: High-pass non-bass elements, boost presence frequencies
- **Compression**: Control dynamics, add punch to drums
- **Stereo Width**: Use panning and stereo effects for space

## Recommended Plugins
- **Synthesizers**: Serum, Massive X, Operator
- **Effects**: FabFilter Pro-Q, Valhalla VintageVerb, Soundtoys
- **Drums**: Battery, Addictive Drums, samples

## Chord Progressions
- **Popular**: vi-IV-I-V (Am-F-C-G in C major)
- **Alternative**: i-bVII-bVI-bVII (Am-G-F-G)
- **Jazz**: ii-V-I (Dm-G-C)

## Production Tips
1. Start with a strong drum pattern
2. Build around a central musical idea
3. Use reference tracks for comparison
4. Leave space in the mix
5. Automate for movement and interest

## Reference Artists
Listen to and analyze tracks by genre leaders for inspiration and technique study.`}getMockMidiSuggestions(e){return{chords:[{note:"C4",time:0,duration:1,velocity:80},{note:"E4",time:0,duration:1,velocity:80},{note:"G4",time:0,duration:1,velocity:80},{note:"F4",time:1,duration:1,velocity:80},{note:"A4",time:1,duration:1,velocity:80},{note:"C5",time:1,duration:1,velocity:80}],bass:[{note:"C2",time:0,duration:.5,velocity:100},{note:"C2",time:.5,duration:.5,velocity:80},{note:"F2",time:1,duration:.5,velocity:100},{note:"F2",time:1.5,duration:.5,velocity:80}],melody:[{note:"C5",time:0,duration:.25,velocity:90},{note:"D5",time:.25,duration:.25,velocity:85},{note:"E5",time:.5,duration:.5,velocity:95},{note:"G5",time:1,duration:.5,velocity:90}],drums:{kick:[{time:0,velocity:127},{time:.5,velocity:100},{time:1,velocity:127}],snare:[{time:.25,velocity:110},{time:.75,velocity:105},{time:1.25,velocity:110}],hihat:[{time:0,velocity:80},{time:.125,velocity:60},{time:.25,velocity:80},{time:.375,velocity:60},{time:.5,velocity:80},{time:.625,velocity:60}]}}}}const Ym=new C_;function N_(t){return typeof t=="number"}function b_(t){return typeof t=="string"}function A_(t){return typeof t<"u"}function D_(t,e){return Math.pow(2,(t-69)/12)*(e||440)}var I_=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,M_=[0,2,4,5,7,9,11];function O_(t,e,n){if(typeof t!="string")return null;var s=I_.exec(t);if(!s||!e&&s[4])return null;var r={letter:s[1].toUpperCase(),acc:s[2].replace(/x/g,"##")};r.pc=r.letter+r.acc,r.step=(r.letter.charCodeAt(0)+3)%7,r.alt=r.acc[0]==="b"?-r.acc.length:r.acc.length;var i=M_[r.step]+r.alt;return r.chroma=i<0?12+i:i%12,s[3]&&(r.oct=+s[3],r.midi=i+12*(r.oct+1),r.freq=D_(r.midi,n)),e&&(r.tonicOf=s[4]),r}function R_(t){if((N_(t)||b_(t))&&t>=0&&t<128)return+t;var e=O_(t);return e&&A_(e.midi)?e.midi:null}function P_(t){return Array.isArray(t)&&t.length===2?t[0]*7+t[1]*12+12:R_(t)}var j_="C Db D Eb E F Gb G Ab A Bb B".split(" "),F_="C C# D D# E F F# G G# A A# B".split(" ");function Qm(t,e){if(t===!0||t===!1)return function(i){return Qm(i,t)};t=Math.round(t);var n=e===!0?F_:j_,s=n[t%12],r=Math.floor(t/12)-1;return s+r}const V_=Object.freeze(Object.defineProperty({__proto__:null,note:Qm,toMidi:P_},Symbol.toStringTag,{value:"Module"})),L_=v0(V_);var rp=L_,se={VERSION:"2.1.4",HEADER_CHUNK_TYPE:[77,84,104,100],HEADER_CHUNK_LENGTH:[0,0,0,6],HEADER_CHUNK_FORMAT0:[0,0],HEADER_CHUNK_FORMAT1:[0,1],HEADER_CHUNK_DIVISION:[0,128],TRACK_CHUNK_TYPE:[77,84,114,107],META_EVENT_ID:255,META_TEXT_ID:1,META_COPYRIGHT_ID:2,META_TRACK_NAME_ID:3,META_INSTRUMENT_NAME_ID:4,META_LYRIC_ID:5,META_MARKER_ID:6,META_CUE_POINT:7,META_TEMPO_ID:81,META_SMTPE_OFFSET:84,META_TIME_SIGNATURE_ID:88,META_KEY_SIGNATURE_ID:89,META_END_OF_TRACK_ID:[47,0],CONTROLLER_CHANGE_STATUS:176,PITCH_BEND_STATUS:224};function su(t){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(t)}function ru(){ru=function(r,i){return new n(r,void 0,i)};var t=RegExp.prototype,e=new WeakMap;function n(r,i,o){var a=new RegExp(r,i);return e.set(a,o||e.get(r)),Ca(a,n.prototype)}function s(r,i){var o=e.get(i);return Object.keys(o).reduce(function(a,l){return a[l]=r[o[l]],a},Object.create(null))}return B_(n,RegExp),n.prototype.exec=function(r){var i=t.exec.call(this,r);return i&&(i.groups=s(i,this)),i},n.prototype[Symbol.replace]=function(r,i){if(typeof i=="string"){var o=e.get(this);return t[Symbol.replace].call(this,r,i.replace(/\$<([^>]+)>/g,function(l,c){return"$"+o[c]}))}if(typeof i=="function"){var a=this;return t[Symbol.replace].call(this,r,function(){var l=arguments;return typeof l[l.length-1]!="object"&&(l=[].slice.call(l)).push(s(l,a)),i.apply(this,l)})}return t[Symbol.replace].call(this,r,i)},ru.apply(this,arguments)}function Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ip(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Ne(t,e,n){return e&&ip(t.prototype,e),n&&ip(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function B_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ca(t,e)}function Ca(t,e){return Ca=Object.setPrototypeOf||function(s,r){return s.__proto__=r,s},Ca(t,e)}var z=function(){function t(){Ce(this,t)}return Ne(t,null,[{key:"version",value:function(){return se.VERSION}},{key:"stringToBytes",value:function(n){return n.split("").map(function(s){return s.charCodeAt()})}},{key:"isNumeric",value:function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},{key:"getPitch",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"C4";return 60-rp.toMidi(s)+rp.toMidi(n)}},{key:"numberToVariableLength",value:function(n){n=Math.round(n);for(var s=n&127;n=n>>7;)s<<=8,s|=n&127|128;for(var r=[];r.push(s&255),s&128;)s>>=8;return r}},{key:"stringByteCount",value:function(n){return encodeURI(n).split(/%..|./).length-1}},{key:"numberFromBytes",value:function(n){var s="",r;return n.forEach(function(i){r=i.toString(16),r.length==1&&(r="0"+r),s+=r}),parseInt(s,16)}},{key:"numberToBytes",value:function(n,s){s=s||1;var r=n.toString(16);r.length&1&&(r="0"+r);var i=r.match(/.{2}/g);if(i=i.map(function(o){return parseInt(o,16)}),i.length<s)for(;s-i.length>0;)i.unshift(0);return i}},{key:"toArray",value:function(n){return Array.isArray(n)?n:[n]}},{key:"convertVelocity",value:function(n){return n=n>100?100:n,Math.round(n/100*127)}},{key:"getTickDuration",value:function(n){if(Array.isArray(n))return n.map(function(o){return t.getTickDuration(o)}).reduce(function(o,a){return o+a},0);if(n=n.toString(),n.toLowerCase().charAt(0)==="t"){var s=parseInt(n.substring(1));if(isNaN(s)||s<0)throw new Error(n+" is not a valid duration.");return s}var r=t.numberFromBytes(se.HEADER_CHUNK_DIVISION),i=r*t.getDurationMultiplier(n);return t.getRoundedIfClose(i)}},{key:"getRoundedIfClose",value:function(n){var s=Math.round(n);return Math.abs(s-n)<1e-6?s:n}},{key:"getPrecisionLoss",value:function(n){var s=Math.round(n);return s-n}},{key:"getDurationMultiplier",value:function(n){if(n==="0")return 0;var s=n.match(ru(/^(d+)?(\d+)(?:t(\d*))?/,{dotted:1,base:2,tuplet:3}));if(s){var r=Number(s.groups.base),i=r===1||(r&r-1)===0;if(i){var o=r/4,a=1/o,l=s.groups,c=l.dotted,u=l.tuplet;if(c){var h=c.length,d=Math.pow(2,h);a=a+a*((d-1)/d)}if(typeof u=="string"){var g=a*2,y=Number(u||"3");a=g/y}return a}}throw new Error(n+" is not a valid duration.")}}]),t}(),Km=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="controller",this.data=z.numberToVariableLength(e.delta).concat(se.CONTROLLER_CHANGE_STATUS,e.controllerNumber,e.controllerValue)}),Xm=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="cue-point";var n=z.stringToBytes(e.text);this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_CUE_POINT,z.numberToVariableLength(n.length),n)}),Ko=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="end-track",this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_END_OF_TRACK_ID)}),Zm=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="instrument-name";var n=z.stringToBytes(e.text);this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_INSTRUMENT_NAME_ID,z.numberToVariableLength(n.length),n)}),Jm=Ne(function t(e,n){Ce(this,t),this.type="key-signature";var s=n||0;if(e=e||0,typeof n>"u"){var r=[["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"],["ab","eb","bb","f","c","g","d","a","e","b","f#","c#","g#","d#","a#"]],i=e.length,o=e||"C";if(e[0]===e[0].toLowerCase()&&(s=1),i>1)switch(e.charAt(i-1)){case"m":s=1,o=e.charAt(0).toLowerCase(),o=o.concat(e.substring(1,i-1));break;case"-":s=1,o=e.charAt(0).toLowerCase(),o=o.concat(e.substring(1,i-1));break;case"M":s=0,o=e.charAt(0).toUpperCase(),o=o.concat(e.substring(1,i-1));break;case"+":s=0,o=e.charAt(0).toUpperCase(),o=o.concat(e.substring(1,i-1));break}var a=r[s].indexOf(o);e=a===-1?0:a-7}this.data=z.numberToVariableLength(0).concat(se.META_EVENT_ID,se.META_KEY_SIGNATURE_ID,[2],z.numberToBytes(e,1),z.numberToBytes(s,1))}),eg=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="lyric";var n=z.stringToBytes(e.text);this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_LYRIC_ID,z.numberToVariableLength(n.length),n)}),tg=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="marker";var n=z.stringToBytes(e.text);this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_MARKER_ID,z.numberToVariableLength(n.length),n)}),yr=function(){function t(e){Ce(this,t),e=Object.assign({channel:1,startTick:null,velocity:50,wait:0},e),this.type="note-on",this.channel=e.channel,this.pitch=e.pitch,this.wait=e.wait,this.velocity=e.velocity,this.startTick=e.startTick,this.tick=null,this.delta=null,this.data=e.data}return Ne(t,[{key:"buildData",value:function(n,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.data=[],this.startTick?(this.tick=z.getRoundedIfClose(this.startTick),n.tickPointer==0&&(this.delta=this.tick)):(this.delta=z.getTickDuration(this.wait),this.tick=z.getRoundedIfClose(n.tickPointer+this.delta)),this.deltaWithPrecisionCorrection=z.getRoundedIfClose(this.delta-s),this.data=z.numberToVariableLength(this.deltaWithPrecisionCorrection).concat(this.getStatusByte(),z.getPitch(this.pitch,r.middleC),z.convertVelocity(this.velocity)),this}},{key:"getStatusByte",value:function(){return 144+this.channel-1}}]),t}(),fi=function(){function t(e){Ce(this,t),e=Object.assign({channel:1,velocity:50,tick:null},e),this.type="note-off",this.channel=e.channel,this.pitch=e.pitch,this.duration=e.duration,this.velocity=e.velocity,this.tick=e.tick,this.delta=z.getTickDuration(this.duration),this.data=e.data}return Ne(t,[{key:"buildData",value:function(n,s){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.tick===null&&(this.tick=z.getRoundedIfClose(this.delta+n.tickPointer)),this.deltaWithPrecisionCorrection=z.getRoundedIfClose(this.delta-s),this.data=z.numberToVariableLength(this.deltaWithPrecisionCorrection).concat(this.getStatusByte(),z.getPitch(this.pitch,r.middleC),z.convertVelocity(this.velocity)),this}},{key:"getStatusByte",value:function(){return 128+this.channel-1}}]),t}(),Na=function(){function t(e){Ce(this,t),e=Object.assign({channel:1,repeat:1,sequential:!1,startTick:null,velocity:50,wait:0},e),this.data=[],this.type="note",this.pitch=z.toArray(e.pitch),this.channel=e.channel,this.duration=e.duration,this.grace=e.grace,this.repeat=e.repeat,this.sequential=e.sequential,this.startTick=e.startTick,this.velocity=e.velocity,this.wait=e.wait,this.tickDuration=z.getTickDuration(this.duration),this.restDuration=z.getTickDuration(this.wait),this.events=[]}return Ne(t,[{key:"buildData",value:function(){var n=this;if(this.data=[],this.grace){var s=1;this.grace=z.toArray(this.grace),this.grace.forEach(function(){var o=new t({pitch:n.grace,duration:"T"+s});n.data=n.data.concat(o.data)})}if(this.sequential)for(var i=0;i<this.repeat;i++)this.pitch.forEach(function(o,a){var l=new yr({channel:n.channel,wait:a>0?0:n.wait,velocity:n.velocity,pitch:o,startTick:n.startTick}),c=new fi({channel:n.channel,duration:n.duration,velocity:n.velocity,pitch:o});n.events.push(l,c)});else for(var r=0;r<this.repeat;r++)this.pitch.forEach(function(o,a){var l;a==0?l=new yr({channel:n.channel,wait:n.wait,velocity:n.velocity,pitch:o,startTick:n.startTick}):l=new yr({channel:n.channel,wait:0,velocity:n.velocity,pitch:o,startTick:n.startTick}),n.events.push(l)}),this.pitch.forEach(function(o,a){var l;a==0?l=new fi({channel:n.channel,duration:n.duration,velocity:n.velocity,pitch:o,tick:n.startTick!==null?z.getTickDuration(n.duration)+n.startTick:null}):l=new fi({channel:n.channel,duration:0,velocity:n.velocity,pitch:o,tick:n.startTick!==null?z.getTickDuration(n.duration)+n.startTick:null}),n.events.push(l)});return this}}]),t}(),q_=function(e){return e<=0?Math.floor(16384*(e+1)/2):Math.floor(16383*(e+1)/2)},ng=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="pitch-bend";var n=q_(e.bend),s=e.channel||0,r=n&127,i=n>>7&127;this.data=z.numberToVariableLength(e.delta).concat(se.PITCH_BEND_STATUS|s,r,i)}),z_=function(){function t(e){Ce(this,t),this.fields=Object.assign({channel:1,delta:0},e),this.type="program",this.data=z.numberToVariableLength(this.fields.delta).concat(this.getStatusByte(),this.fields.instrument)}return Ne(t,[{key:"getStatusByte",value:function(){return 192+this.fields.channel-1}}]),t}(),iu=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="tempo",this.tick=e.tick;var n=Math.round(6e7/e.bpm);this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_TEMPO_ID,[3],z.numberToBytes(n,3))}),sg=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="text";var n=z.stringToBytes(e.text);this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_TEXT_ID,z.numberToVariableLength(n.length),n)}),rg=Ne(function t(e,n,s,r){Ce(this,t),this.type="time-signature",this.data=z.numberToVariableLength(0).concat(se.META_EVENT_ID,se.META_TIME_SIGNATURE_ID,[4],z.numberToBytes(e,1),z.numberToBytes(Math.log2(n),1),z.numberToBytes(s||24,1),z.numberToBytes(r||8,1))}),U_=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="copyright";var n=z.stringToBytes(e.text);this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_COPYRIGHT_ID,z.numberToVariableLength(n.length),n)}),ig=Ne(function t(e){Ce(this,t),e=Object.assign({delta:0},e),this.type="track-name";var n=z.stringToBytes(e.text);this.data=z.numberToVariableLength(e.delta).concat(se.META_EVENT_ID,se.META_TRACK_NAME_ID,z.numberToVariableLength(n.length),n)}),og=function(){function t(){Ce(this,t),this.type=se.TRACK_CHUNK_TYPE,this.data=[],this.size=[],this.events=[],this.explicitTickEvents=[],this.tickPointer=0}return Ne(t,[{key:"addEvent",value:function(n,s){var r=this;return z.toArray(n).forEach(function(i,o){if(i instanceof Na){if(typeof s=="function"){var a=s(o,i);if(su(a)==="object")for(var l in a)switch(l){case"channel":i.channel=a[l];break;case"duration":i.duration=a[l];break;case"sequential":i.sequential=a[l];break;case"velocity":i.velocity=z.convertVelocity(a[l]);break}}i.startTick!==null?r.explicitTickEvents.push(i):i.buildData().events.forEach(function(c){return r.events.push(c)})}else i instanceof Ko&&r.removeEventsByType("end-track"),r.events.push(i)}),this}},{key:"buildData",value:function(){var n=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(!this.events.length||!(this.events[this.events.length-1]instanceof Ko))&&this.addEvent(new Ko),this.data=[],this.size=[],this.tickPointer=0;var r=0;return this.events.forEach(function(i){if(i instanceof yr||i instanceof fi){var o=i.buildData(n,r,s);r=z.getPrecisionLoss(i.deltaWithPrecisionCorrection||0),n.data=n.data.concat(o.data),n.tickPointer=z.getRoundedIfClose(i.tick)}else i instanceof iu&&(n.tickPointer=z.getRoundedIfClose(i.tick)),n.data=n.data.concat(i.data)}),this.mergeExplicitTickEvents(),this.size=z.numberToBytes(this.data.length,4),this}},{key:"mergeExplicitTickEvents",value:function(){var n=this;this.explicitTickEvents.length&&(this.explicitTickEvents.sort(function(s,r){return s.startTick-r.startTick}),this.explicitTickEvents.forEach(function(s){s.buildData().events.forEach(function(r){return r.buildData(n)}),s.events.forEach(function(r){return n.mergeSingleEvent(r)})}),this.explicitTickEvents=[],this.buildData())}},{key:"mergeTrack",value:function(n){var s=this;this.buildData(),n.buildData().events.forEach(function(r){return s.mergeSingleEvent(r)})}},{key:"mergeSingleEvent",value:function(n){if(!this.events.length){this.addEvent(n);return}for(var s,r=0;r<this.events.length&&!(this.events[r].tick>n.tick);r++)s=r;var i=s+1;n.delta=n.tick-this.events[s].tick,this.events.splice(i,0,n);for(var o=i+1;o<this.events.length;o++)this.events[o].delta=this.events[o].tick-this.events[o-1].tick}},{key:"removeEventsByType",value:function(n){var s=this;return this.events.forEach(function(r,i){r.type===n&&s.events.splice(i,1)}),this}},{key:"setTempo",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.addEvent(new iu({bpm:n,tick:s}))}},{key:"setTimeSignature",value:function(n,s,r,i){return this.addEvent(new rg(n,s,r,i))}},{key:"setKeySignature",value:function(n,s){return this.addEvent(new Jm(n,s))}},{key:"addText",value:function(n){return this.addEvent(new sg({text:n}))}},{key:"addCopyright",value:function(n){return this.addEvent(new U_({text:n}))}},{key:"addTrackName",value:function(n){return this.addEvent(new ig({text:n}))}},{key:"addInstrumentName",value:function(n){return this.addEvent(new Zm({text:n}))}},{key:"addMarker",value:function(n){return this.addEvent(new tg({text:n}))}},{key:"addCuePoint",value:function(n){return this.addEvent(new Xm({text:n}))}},{key:"addLyric",value:function(n){return this.addEvent(new eg({text:n}))}},{key:"polyModeOn",value:function(){var n=new yr({data:[0,176,126,0]});return this.addEvent(n)}},{key:"setPitchBend",value:function(n){return this.addEvent(new ng({bend:n}))}},{key:"controllerChange",value:function(n,s){return this.addEvent(new Km({controllerNumber:n,controllerValue:s}))}}]),t}(),W_=function(){function t(){Ce(this,t)}return Ne(t,[{key:"trackFromVoice",value:function(n){var s=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{addRenderedAccidentals:!1},i=new og,o=[];return n.tickables.forEach(function(a){a.noteType==="n"?(i.addEvent(new Na({pitch:a.keys.map(function(l,c){return s.convertPitch(l,c,a,r.addRenderedAccidentals)}),duration:s.convertDuration(a),wait:o})),o=[]):a.noteType==="r"&&o.push(s.convertDuration(a))}),o.length>0&&i.addEvent(new Na({pitch:"[c4]",duration:"0",wait:o,velocity:"0"})),i}},{key:"convertPitch",value:function(n,s,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=n.split("/"),a=o[0].substring(1).replace("n","");if(i){var l;(l=r.getAccidentals())===null||l===void 0||l.forEach(function(c){c.index===s&&(c.type==="n"?a="":a+=c.type)})}return o[0][0]+a+o[1]}},{key:"convertDuration",value:function(n){return"d".repeat(n.dots)+this.convertBaseDuration(n.duration)+(n.tuplet?"t"+n.tuplet.num_notes:"")}},{key:"convertBaseDuration",value:function(n){switch(n){case"w":return"1";case"h":return"2";case"q":return"4";default:return n}}}]),t}(),G_=Ne(function t(e){Ce(this,t),this.type=se.HEADER_CHUNK_TYPE;var n=e>1?se.HEADER_CHUNK_FORMAT1:se.HEADER_CHUNK_FORMAT0;this.data=n.concat(z.numberToBytes(e,2),se.HEADER_CHUNK_DIVISION),this.size=[0,0,0,this.data.length]}),$_=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ce(this,t),this.tracks=z.toArray(e),this.options=n}return Ne(t,[{key:"buildData",value:function(){var n=this,s=[];return s.push(new G_(this.tracks.length)),this.tracks.forEach(function(r){s.push(r.buildData(n.options))}),s}},{key:"buildFile",value:function(){var n=[];return this.buildData().forEach(function(s){return n=n.concat(s.type,s.size,s.data)}),new Uint8Array(n)}},{key:"base64",value:function(){return typeof btoa=="function"?btoa(String.fromCharCode.apply(null,this.buildFile())):Buffer.from(this.buildFile()).toString("base64")}},{key:"dataUri",value:function(){return"data:audio/midi;base64,"+this.base64()}},{key:"setOption",value:function(n,s){return this.options[n]=s,this}},{key:"stdout",value:function(){return process.stdout.write(Buffer.from(this.buildFile()))}}]),t}(),H_={Constants:se,ControllerChangeEvent:Km,CuePointEvent:Xm,EndTrackEvent:Ko,InstrumentNameEvent:Zm,KeySignatureEvent:Jm,LyricEvent:eg,MarkerEvent:tg,NoteOnEvent:yr,NoteOffEvent:fi,NoteEvent:Na,PitchBendEvent:ng,ProgramChangeEvent:z_,TempoEvent:iu,TextEvent:sg,TimeSignatureEvent:rg,Track:og,TrackNameEvent:ig,Utils:z,VexFlow:W_,Writer:$_},Y_=H_;const Ae=Dp(Y_);class Q_{constructor(){this.track=new Ae.Track}generateMidiFile(e,n={}){const{tempo:s=120,timeSignature:r=[4,4],key:i="C",trackName:o="Generated Track"}=n,a=new Ae.Track;return a.addEvent(new Ae.ProgramChangeEvent({instrument:1})),a.addEvent(new Ae.TimeSignatureEvent(r[0],r[1])),a.addEvent(new Ae.KeySignatureEvent(i,"major")),a.addEvent(new Ae.TempoEvent({bpm:s})),a.addEvent(new Ae.TrackNameEvent({text:o})),e.chords&&e.chords.length>0&&this.addChordsToTrack(a,e.chords),e.bass&&e.bass.length>0&&this.addBassToTrack(a,e.bass),e.melody&&e.melody.length>0&&this.addMelodyToTrack(a,e.melody),new Ae.Writer(a).dataUri()}addChordsToTrack(e,n){const s=this.groupNotesByTime(n);Object.keys(s).forEach(r=>{const i=s[r],o=i.map(c=>c.note),a=i[0].duration||"4",l=i[0].velocity||80;e.addEvent(new Ae.NoteEvent({pitch:o,duration:this.convertDurationToMidi(a),velocity:l,startTick:this.convertTimeToTicks(parseFloat(r))}))})}addBassToTrack(e,n){n.forEach(s=>{e.addEvent(new Ae.NoteEvent({pitch:s.note,duration:this.convertDurationToMidi(s.duration||.5),velocity:s.velocity||100,startTick:this.convertTimeToTicks(s.time)}))})}addMelodyToTrack(e,n){n.forEach(s=>{e.addEvent(new Ae.NoteEvent({pitch:s.note,duration:this.convertDurationToMidi(s.duration||.25),velocity:s.velocity||90,startTick:this.convertTimeToTicks(s.time)}))})}generateDrumMidi(e,n={}){const{tempo:s=120,bars:r=4}=n,i=new Ae.Track;i.addEvent(new Ae.ProgramChangeEvent({instrument:128})),i.addEvent(new Ae.TempoEvent({bpm:s})),i.addEvent(new Ae.TrackNameEvent({text:"Drums"}));const o={kick:36,snare:38,hihat:42,openhat:46,crash:49,ride:51};return Object.keys(e).forEach(l=>{o[l]&&e[l].forEach(u=>{i.addEvent(new Ae.NoteEvent({pitch:o[l],duration:"8",velocity:u.velocity||100,startTick:this.convertTimeToTicks(u.time)}))})}),new Ae.Writer(i).dataUri()}groupNotesByTime(e){return e.reduce((n,s)=>{const r=s.time.toString();return n[r]||(n[r]=[]),n[r].push(s),n},{})}convertDurationToMidi(e){return e>=1?"4":e>=.5?"8":e>=.25?"16":"32"}convertTimeToTicks(e){return Math.round(e*480)}generateChordProgression(e,n,s={}){const{octave:r=4,duration:i=1,velocity:o=80}=s,a={I:[0,4,7],ii:[2,5,9],iii:[4,7,11],IV:[5,9,0],V:[7,11,2],vi:[9,0,4],"vii°":[11,2,5]},c={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11}[e]||0,u=[];return n.forEach((h,d)=>{const g=a[h];g&&g.forEach(y=>{const _=60+c+y+(r-4)*12;u.push({note:this.midiNoteToName(_),time:d*i,duration:i,velocity:o})})}),u}midiNoteToName(e){const n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],s=Math.floor(e/12)-1;return`${n[e%12]}${s}`}downloadMidi(e,n="generated-track.mid"){const s=document.createElement("a");s.href=e,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s)}async playMidiData(e){if(!e||!e.notes)return null;try{await Tone.start();const n=new Tone.PolySynth().toDestination(),s=Tone.now();return e.notes.forEach(r=>{n.triggerAttackRelease(r.note,r.duration||.5,s+(r.time||0),(r.velocity||80)/127)}),{stop:()=>n.dispose()}}catch(n){return console.error("Error playing MIDI data:",n),null}}async exportMidiData(e){if(!e||!e.notes)throw new Error("Invalid MIDI data");const n=new Ae.Track;n.addEvent(new Ae.ProgramChangeEvent({instrument:1})),e.notes.map(l=>{const c=this.noteToPitch(l.note);return new Ae.NoteEvent({pitch:[c],duration:this.durationToTicks(l.duration||.5),velocity:l.velocity||80,startTick:this.timeToTicks(l.time||0)})}).forEach(l=>n.addEvent(l));const i=new Ae.Writer(n).dataUri(),o=atob(i.split(",")[1]),a=new Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);return new Blob([new Uint8Array(a)],{type:"audio/midi"})}noteToPitch(e){const n={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},s=e.match(/([A-G][#b]?)(\d+)/);if(!s)return 60;const[,r,i]=s;return(parseInt(i)+1)*12+n[r]}durationToTicks(e){return Math.round(e*480)}timeToTicks(e){return Math.round(e*480)}}const wn=new Q_,ag="14.9.17",op=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),ap=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),ou=(t,e)=>({startTime:e,type:"setValue",value:t}),lg=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),cg=(t,e,{startTime:n,target:s,timeConstant:r})=>s+(e-s)*Math.exp((n-t)/r),ur=t=>t.type==="exponentialRampToValue",ba=t=>t.type==="linearRampToValue",zn=t=>ur(t)||ba(t),dh=t=>t.type==="setValue",yn=t=>t.type==="setValueCurve",Aa=(t,e,n,s)=>{const r=t[e];return r===void 0?s:zn(r)||dh(r)?r.value:yn(r)?r.values[r.values.length-1]:cg(n,Aa(t,e-1,r.startTime,s),r)},lp=(t,e,n,s,r)=>n===void 0?[s.insertTime,r]:zn(n)?[n.endTime,n.value]:dh(n)?[n.startTime,n.value]:yn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Aa(t,e-1,n.startTime,r)],au=t=>t.type==="cancelAndHold",lu=t=>t.type==="cancelScheduledValues",Ln=t=>au(t)||lu(t)?t.cancelTime:ur(t)||ba(t)?t.endTime:t.startTime,cp=(t,e,n,{endTime:s,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((t-e)/(s-e)):0,up=(t,e,n,{endTime:s,value:r})=>n+(t-e)/(s-e)*(r-n),K_=(t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]},X_=(t,{duration:e,startTime:n,values:s})=>{const r=(t-n)/e*(s.length-1);return K_(s,r)},Ro=t=>t.type==="setTarget";class Z_{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Ln(e);if(au(e)||lu(e)){const s=this._automationEvents.findIndex(i=>lu(e)&&yn(i)?i.startTime+i.duration>=n:Ln(i)>=n),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),au(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&zn(r)){if(i!==void 0&&Ro(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:yn(i)?i.startTime+i.duration:Ln(i),a=i===void 0?this._defaultValue:yn(i)?i.values[i.values.length-1]:i.value,l=ur(r)?cp(n,o,a,r):up(n,o,a,r),c=ur(r)?op(l,n,this._currenTime):ap(l,n,this._currenTime);this._automationEvents.push(c)}if(i!==void 0&&Ro(i)&&this._automationEvents.push(ou(this.getValue(n),n)),i!==void 0&&yn(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,l=Math.max(2,1+Math.ceil(o*a)),c=o/(l-1)*a,u=i.values.slice(0,l);if(c<1)for(let h=1;h<l;h+=1){const d=c*h%1;u[h]=i.values[h-1]*(1-d)+i.values[h]*d}this._automationEvents[this._automationEvents.length-1]=lg(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>Ln(o)>n),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&yn(r)&&Ln(r)+r.duration>n)return!1;const i=ur(e)?op(e.value,e.endTime,this._currenTime):ba(e)?ap(e.value,n,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(yn(e)&&n+e.duration>Ln(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(s=>Ln(s)>e);if(n>1){const s=this._automationEvents.slice(n-1),r=s[0];Ro(r)&&s.unshift(ou(Aa(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Ln(o)>e),s=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(i!==void 0&&Ro(i)&&(s===void 0||!zn(s)||s.insertTime>e))return cg(e,Aa(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&dh(i)&&(s===void 0||!zn(s)))return i.value;if(i!==void 0&&yn(i)&&(s===void 0||!zn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?X_(e,i):i.values[i.values.length-1];if(i!==void 0&&zn(i)&&(s===void 0||!zn(s)))return i.value;if(s!==void 0&&ur(s)){const[o,a]=lp(this._automationEvents,r,i,s,this._defaultValue);return cp(e,o,a,s)}if(s!==void 0&&ba(s)){const[o,a]=lp(this._automationEvents,r,i,s,this._defaultValue);return up(e,o,a,s)}return this._defaultValue}}const J_=t=>({cancelTime:t,type:"cancelAndHold"}),e1=t=>({cancelTime:t,type:"cancelScheduledValues"}),t1=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),n1=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),s1=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),r1=()=>new DOMException("","AbortError"),i1=t=>(e,n,[s,r,i],o)=>{t(e[r],[n,s,i],a=>a[0]===n&&a[1]===s,o)},o1=t=>(e,n,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},a1=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},br=new WeakSet,ug=new WeakMap,ph=new WeakMap,hg=new WeakMap,fh=new WeakMap,wl=new WeakMap,dg=new WeakMap,cu=new WeakMap,uu=new WeakMap,hu=new WeakMap,pg={construct(){return pg}},l1=t=>{try{const e=new Proxy(t,pg);new e}catch{return!1}return!0},hp=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,dp=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),r=s.match(hp);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(hp)}return[n.join(";"),s]},pp=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},fp=t=>{if(!l1(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},c1=(t,e,n,s,r,i,o,a,l,c,u,h,d)=>{let g=0;return(y,_,x={credentials:"omit"})=>{const f=u.get(y);if(f!==void 0&&f.has(_))return Promise.resolve();const p=c.get(y);if(p!==void 0){const w=p.get(_);if(w!==void 0)return w}const v=i(y),k=v.audioWorklet===void 0?r(_).then(([w,S])=>{const[E,T]=dp(w,S),b=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return n(b)}).then(()=>{const w=d._AWGS.pop();if(w===void 0)throw new SyntaxError;s(v.currentTime,v.sampleRate,()=>w(class{},void 0,(S,E)=>{if(S.trim()==="")throw e();const T=uu.get(v);if(T!==void 0){if(T.has(S))throw e();fp(E),pp(E.parameterDescriptors),T.set(S,E)}else fp(E),pp(E.parameterDescriptors),uu.set(v,new Map([[S,E]]))},v.sampleRate,void 0,void 0))}):Promise.all([r(_),Promise.resolve(t(h,h))]).then(([[w,S],E])=>{const T=g+1;g=T;const[b,C]=dp(w,S),j=`${b};((AudioWorkletProcessor,registerProcessor)=>{${C}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,$=new Blob([j],{type:"application/javascript; charset=utf-8"}),q=URL.createObjectURL($);return v.audioWorklet.addModule(q,x).then(()=>{if(a(v))return v;const U=o(v);return U.audioWorklet.addModule(q,x).then(()=>U)}).then(U=>{if(l===null)throw new SyntaxError;try{new l(U,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(q))});return p===void 0?c.set(y,new Map([[_,k]])):p.set(_,k),k.then(()=>{const w=u.get(y);w===void 0?u.set(y,new Set([_])):w.add(_)}).finally(()=>{const w=c.get(y);w!==void 0&&w.delete(_)}),k}},Qt=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},kl=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return t.delete(s),s},fg=(t,e,n,s)=>{const r=Qt(t,e),i=kl(r,o=>o[0]===n&&o[1]===s);return r.size===0&&t.delete(e),i},ro=t=>Qt(dg,t),Ar=t=>{if(br.has(t))throw new Error("The AudioNode is already stored.");br.add(t),ro(t).forEach(e=>e(!0))},mg=t=>"port"in t,io=t=>{if(!br.has(t))throw new Error("The AudioNode is not stored.");br.delete(t),ro(t).forEach(e=>e(!1))},du=(t,e)=>{!mg(t)&&e.every(n=>n.size===0)&&io(t)},u1=(t,e,n,s,r,i,o,a,l,c,u,h,d)=>{const g=new WeakMap;return(y,_,x,f,p)=>{const{activeInputs:v,passiveInputs:k}=i(_),{outputs:w}=i(y),S=a(y),E=T=>{const b=l(_),C=l(y);if(T){const D=fg(k,y,x,f);t(v,y,D,!1),!p&&!h(y)&&n(C,b,x,f),d(_)&&Ar(_)}else{const D=s(v,y,x,f);e(k,f,D,!1),!p&&!h(y)&&r(C,b,x,f);const A=o(_);if(A===0)u(_)&&du(_,v);else{const P=g.get(_);P!==void 0&&clearTimeout(P),g.set(_,setTimeout(()=>{u(_)&&du(_,v)},A*1e3))}}};return c(w,[_,x,f],T=>T[0]===_&&T[1]===x&&T[2]===f,!0)?(S.add(E),u(y)?t(v,y,[x,f,E],!0):e(k,f,[y,x,E],!0),!0):!1}},h1=t=>(e,n,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,n,i]])):t(a,[r,n,i],l=>l[0]===r&&l[1]===n,o)},d1=t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)},p1=t=>(e,n)=>{t(e).add(n)},f1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},m1=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=r(a),u={...f1,...l},h=s(c,u),d=i(c)?e():null;super(a,!1,h,d),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},nt=(t,e)=>t.context===e,g1=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!nt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,c)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Da=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},dn=()=>new DOMException("","IndexSizeError"),mh=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(s){throw s.code===12?dn():s}})(t.getChannelData)},y1={numberOfChannels:1},v1=(t,e,n,s,r,i,o,a)=>{let l=null;return class gg{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:g}={...y1,...u};l===null&&(l=new r(1,1,44100));const y=s!==null&&e(i,i)?new s({length:h,numberOfChannels:d,sampleRate:g}):l.createBuffer(d,h,g);if(y.numberOfChannels===0)throw n();return typeof y.copyFromChannel!="function"?(o(y),mh(y)):e(Da,()=>Da(y))||a(y),t.add(y),y}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===gg.prototype||t.has(u)}}},dt=-34028234663852886e22,rt=-dt,Tn=t=>br.has(t),_1={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},x1=(t,e,n,s,r,i,o,a)=>class extends t{constructor(c,u){const h=i(c),d={..._1,...u},g=r(h,d),y=o(h),_=y?e():null;super(c,!1,g,_),this._audioBufferSourceNodeRenderer=_,this._isBufferNullified=!1,this._isBufferSet=d.buffer!==null,this._nativeAudioBufferSourceNode=g,this._onended=null,this._playbackRate=n(this,y,g.playbackRate,rt,dt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===u?c:h}get playbackRate(){return this._playbackRate}start(c=0,u=0,h){if(this._nativeAudioBufferSourceNode.start(c,u,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[c,u]:[c,u,h]),this.context.state!=="closed"){Ar(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Tn(this)&&io(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},w1=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let h=n(c);const d=nt(h,u);if(!d){const g={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(u,g),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(u,h),d?await t(u,c.playbackRate,h.playbackRate):await s(u,c.playbackRate,h.playbackRate),await r(c,u,h),h};return{set start(c){o=c},set stop(c){a=c},render(c,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):l(c,u)}}},k1=t=>"playbackRate"in t,T1=t=>"frequency"in t&&"gain"in t,S1=t=>"offset"in t,E1=t=>!("frequency"in t)&&"gain"in t,C1=t=>"detune"in t&&"frequency"in t&&!("gain"in t),N1=t=>"pan"in t,it=t=>Qt(ug,t),oo=t=>Qt(hg,t),pu=(t,e)=>{const{activeInputs:n}=it(t);n.forEach(r=>r.forEach(([i])=>{e.includes(t)||pu(i,[...e,t])}));const s=k1(t)?[t.playbackRate]:mg(t)?Array.from(t.parameters.values()):T1(t)?[t.Q,t.detune,t.frequency,t.gain]:S1(t)?[t.offset]:E1(t)?[t.gain]:C1(t)?[t.detune,t.frequency]:N1(t)?[t.pan]:[];for(const r of s){const i=oo(r);i!==void 0&&i.activeInputs.forEach(([o])=>pu(o,e))}Tn(t)&&io(t)},yg=t=>{pu(t.destination,[])},b1=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),A1=(t,e,n,s,r,i,o,a,l)=>class extends t{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new l(u)}catch(y){throw y.code===12&&y.message==="sampleRate is not in range"?n():y}if(h===null)throw s();if(!b1(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&h.sampleRate!==u.sampleRate)throw n();super(h,2);const{latencyHint:d}=u,{sampleRate:g}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:d==="balanced"?512/g:d==="interactive"||d===void 0?256/g:d==="playback"?1024/g:Math.max(2,Math.min(128,Math.round(d*g/128)))*128/g,this._nativeAudioContext=h,l.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const y=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",y)};h.addEventListener("statechange",y)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),yg(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),this._nativeAudioContext.state==="running"?u():this.resume().then(u,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},D1=(t,e,n,s,r,i,o,a)=>class extends t{constructor(c,u){const h=i(c),d=o(h),g=r(h,u,d),y=d?e(a):null;super(c,!1,g,y),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=g}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},I1=t=>{const e=new WeakMap,n=async(s,r)=>{const i=r.destination;return e.set(r,i),await t(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):n(s,r)}}},M1=(t,e,n,s,r,i,o,a)=>(l,c)=>{const u=c.listener,h=()=>{const w=new Float32Array(1),S=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=o(c);let T=!1,b=[0,0,-1,0,1,0],C=[0,0,0];const D=()=>{if(T)return;T=!0;const $=s(c,256,9,0);$.onaudioprocess=({inputBuffer:q})=>{const U=[i(q,w,0),i(q,w,1),i(q,w,2),i(q,w,3),i(q,w,4),i(q,w,5)];U.some((O,R)=>O!==b[R])&&(u.setOrientation(...U),b=U);const I=[i(q,w,6),i(q,w,7),i(q,w,8)];I.some((O,R)=>O!==C[R])&&(u.setPosition(...I),C=I)},S.connect($)},A=$=>q=>{q!==b[$]&&(b[$]=q,u.setOrientation(...b))},P=$=>q=>{q!==C[$]&&(C[$]=q,u.setPosition(...C))},j=($,q,U)=>{const I=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q});I.connect(S,0,$),I.start(),Object.defineProperty(I.offset,"defaultValue",{get(){return q}});const O=t({context:l},E,I.offset,rt,dt);return a(O,"value",R=>()=>R.call(O),R=>V=>{try{R.call(O,V)}catch(H){if(H.code!==9)throw H}D(),E&&U(V)}),O.cancelAndHoldAtTime=(R=>E?()=>{throw r()}:(...V)=>{const H=R.apply(O,V);return D(),H})(O.cancelAndHoldAtTime),O.cancelScheduledValues=(R=>E?()=>{throw r()}:(...V)=>{const H=R.apply(O,V);return D(),H})(O.cancelScheduledValues),O.exponentialRampToValueAtTime=(R=>E?()=>{throw r()}:(...V)=>{const H=R.apply(O,V);return D(),H})(O.exponentialRampToValueAtTime),O.linearRampToValueAtTime=(R=>E?()=>{throw r()}:(...V)=>{const H=R.apply(O,V);return D(),H})(O.linearRampToValueAtTime),O.setTargetAtTime=(R=>E?()=>{throw r()}:(...V)=>{const H=R.apply(O,V);return D(),H})(O.setTargetAtTime),O.setValueAtTime=(R=>E?()=>{throw r()}:(...V)=>{const H=R.apply(O,V);return D(),H})(O.setValueAtTime),O.setValueCurveAtTime=(R=>E?()=>{throw r()}:(...V)=>{const H=R.apply(O,V);return D(),H})(O.setValueCurveAtTime),O};return{forwardX:j(0,0,A(0)),forwardY:j(1,0,A(1)),forwardZ:j(2,-1,A(2)),positionX:j(6,0,P(0)),positionY:j(7,0,P(1)),positionZ:j(8,0,P(2)),upX:j(3,0,A(3)),upY:j(4,1,A(4)),upZ:j(5,0,A(5))}},{forwardX:d,forwardY:g,forwardZ:y,positionX:_,positionY:x,positionZ:f,upX:p,upY:v,upZ:k}=u.forwardX===void 0?h():u;return{get forwardX(){return d},get forwardY(){return g},get forwardZ(){return y},get positionX(){return _},get positionY(){return x},get positionZ(){return f},get upX(){return p},get upY(){return v},get upZ(){return k}}},Ia=t=>"context"in t,ao=t=>Ia(t[0]),Ws=(t,e,n,s)=>{for(const r of t)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},mp=(t,e,[n,s],r)=>{Ws(t,[e,n,s],i=>i[0]===e&&i[1]===n,r)},gp=(t,[e,n,s],r)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,s]])):Ws(i,[n,s],o=>o[0]===n,r)},Br=t=>"inputs"in t,Ma=(t,e,n,s)=>{if(Br(e)){const r=e.inputs[s];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,s),[e,n,s]},vg=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},O1=(t,e,n)=>kl(t,s=>s[0]===e&&s[1]===n),_g=(t,e)=>{if(!ro(t).delete(e))throw new Error("Missing the expected event listener.")},xg=(t,e,n)=>{const s=Qt(t,e),r=kl(s,i=>i[0]===n);return s.size===0&&t.delete(e),r},Oa=(t,e,n,s)=>{Br(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},me=t=>Qt(ph,t),Ri=t=>Qt(fh,t),Fs=t=>cu.has(t),Xo=t=>!br.has(t),yp=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const s=t.createScriptProcessor(256,1,1),r=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(t.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?n(!0):n(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(t.destination)},a.start()}}),ac=(t,e)=>{const n=new Map;for(const s of t)for(const r of s){const i=n.get(r);n.set(r,i===void 0?1:i+1)}n.forEach((s,r)=>e(r,s))},Ra=t=>"context"in t,R1=t=>{const e=new Map;t.connect=(n=>(s,r=0,i=0)=>{const o=Ra(s)?n(s,r,i):n(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(l=>l.input!==i||l.output!==r)&&a.push({input:i,output:r}),o})(t.connect.bind(t)),t.disconnect=(n=>(s,r,i)=>{if(n.apply(t),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const l=a.filter(c=>c.output!==s);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(l=>l.output!==r&&(l.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(l=>{Ra(o)?t.connect(o,l.output,l.input):t.connect(o,l.output)})})(t.disconnect)},P1=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=oo(e),{outputs:o}=it(t),a=ro(t),l=c=>{const u=me(t),h=Ri(e);if(c){const d=xg(i,t,n);mp(r,t,d,!1),!s&&!Fs(t)&&u.connect(h,n)}else{const d=O1(r,t,n);gp(i,d,!1),!s&&!Fs(t)&&u.disconnect(h,n)}};return Ws(o,[e,n],c=>c[0]===e&&c[1]===n,!0)?(a.add(l),Tn(t)?mp(r,t,[n,l],!0):gp(i,[t,n,l],!0),!0):!1},j1=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=it(e),o=vg(r[s],t,n);return o===null?[fg(i,t,n,s)[2],!1]:[o[2],!0]},F1=(t,e,n)=>{const{activeInputs:s,passiveInputs:r}=oo(e),i=vg(s,t,n);return i===null?[xg(r,t,n)[1],!1]:[i[2],!0]},gh=(t,e,n,s,r)=>{const[i,o]=j1(t,n,s,r);if(i!==null&&(_g(t,i),o&&!e&&!Fs(t)&&Oa(me(t),me(n),s,r)),Tn(n)){const{activeInputs:a}=it(n);du(n,a)}},yh=(t,e,n,s)=>{const[r,i]=F1(t,n,s);r!==null&&(_g(t,r),i&&!e&&!Fs(t)&&me(t).disconnect(Ri(n),s))},V1=(t,e)=>{const n=it(t),s=[];for(const r of n.outputs)ao(r)?gh(t,e,...r):yh(t,e,...r),s.push(r[0]);return n.outputs.clear(),s},L1=(t,e,n)=>{const s=it(t),r=[];for(const i of s.outputs)i[1]===n&&(ao(i)?gh(t,e,...i):yh(t,e,...i),r.push(i[0]),s.outputs.delete(i));return r},B1=(t,e,n,s,r)=>{const i=it(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(ao(o)?gh(t,e,...o):yh(t,e,...o),i.outputs.delete(o),o[0]))},q1=(t,e,n,s,r,i,o,a,l,c,u,h,d,g,y,_)=>class extends c{constructor(f,p,v,k){super(v),this._context=f,this._nativeAudioNode=v;const w=u(f);h(w)&&n(yp,()=>yp(w,_))!==!0&&R1(v),ph.set(this,v),dg.set(this,new Set),f.state!=="closed"&&p&&Ar(this),t(this,k,v)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(f){this._nativeAudioNode.channelCount=f}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(f){this._nativeAudioNode.channelCountMode=f}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(f){this._nativeAudioNode.channelInterpretation=f}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(f,p=0,v=0){if(p<0||p>=this._nativeAudioNode.numberOfOutputs)throw r();const k=u(this._context),w=y(k);if(d(f)||g(f))throw i();if(Ia(f)){const T=me(f);try{const C=Ma(this._nativeAudioNode,T,p,v),D=Xo(this);(w||D)&&this._nativeAudioNode.disconnect(...C),this.context.state!=="closed"&&!D&&Xo(f)&&Ar(f)}catch(C){throw C.code===12?i():C}if(e(this,f,p,v,w)){const C=l([this],f);ac(C,s(w))}return f}const S=Ri(f);if(S.name==="playbackRate"&&S.maxValue===1024)throw o();try{this._nativeAudioNode.connect(S,p),(w||Xo(this))&&this._nativeAudioNode.disconnect(S,p)}catch(T){throw T.code===12?i():T}if(P1(this,f,p,w)){const T=l([this],f);ac(T,s(w))}}disconnect(f,p,v){let k;const w=u(this._context),S=y(w);if(f===void 0)k=V1(this,S);else if(typeof f=="number"){if(f<0||f>=this.numberOfOutputs)throw r();k=L1(this,S,f)}else{if(p!==void 0&&(p<0||p>=this.numberOfOutputs)||Ia(f)&&v!==void 0&&(v<0||v>=f.numberOfInputs))throw r();if(k=B1(this,S,f,p,v),k.length===0)throw i()}for(const E of k){const T=l([this],E);ac(T,a)}}},z1=(t,e,n,s,r,i,o,a,l,c,u,h,d)=>(g,y,_,x=null,f=null)=>{const p=_.value,v=new Z_(p),k=y?s(v):null,w={get defaultValue(){return p},get maxValue(){return x===null?_.maxValue:x},get minValue(){return f===null?_.minValue:f},get value(){return _.value},set value(S){_.value=S,w.setValueAtTime(S,g.context.currentTime)},cancelAndHoldAtTime(S){if(typeof _.cancelAndHoldAtTime=="function")k===null&&v.flush(g.context.currentTime),v.add(r(S)),_.cancelAndHoldAtTime(S);else{const E=Array.from(v).pop();k===null&&v.flush(g.context.currentTime),v.add(r(S));const T=Array.from(v).pop();_.cancelScheduledValues(S),E!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?_.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?_.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?_.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&_.setValueCurveAtTime(T.values,T.startTime,T.duration))}return w},cancelScheduledValues(S){return k===null&&v.flush(g.context.currentTime),v.add(i(S)),_.cancelScheduledValues(S),w},exponentialRampToValueAtTime(S,E){if(S===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const T=g.context.currentTime;return k===null&&v.flush(T),Array.from(v).length===0&&(v.add(c(p,T)),_.setValueAtTime(p,T)),v.add(o(S,E)),_.exponentialRampToValueAtTime(S,E),w},linearRampToValueAtTime(S,E){const T=g.context.currentTime;return k===null&&v.flush(T),Array.from(v).length===0&&(v.add(c(p,T)),_.setValueAtTime(p,T)),v.add(a(S,E)),_.linearRampToValueAtTime(S,E),w},setTargetAtTime(S,E,T){return k===null&&v.flush(g.context.currentTime),v.add(l(S,E,T)),_.setTargetAtTime(S,E,T),w},setValueAtTime(S,E){return k===null&&v.flush(g.context.currentTime),v.add(c(S,E)),_.setValueAtTime(S,E),w},setValueCurveAtTime(S,E,T){const b=S instanceof Float32Array?S:new Float32Array(S);if(h!==null&&h.name==="webkitAudioContext"){const C=E+T,D=g.context.sampleRate,A=Math.ceil(E*D),P=Math.floor(C*D),j=P-A,$=new Float32Array(j);for(let U=0;U<j;U+=1){const I=(b.length-1)/T*((A+U)/D-E),O=Math.floor(I),R=Math.ceil(I);$[U]=O===R?b[O]:(1-(I-O))*b[O]+(1-(R-I))*b[R]}k===null&&v.flush(g.context.currentTime),v.add(u($,E,T)),_.setValueCurveAtTime($,E,T);const q=P/D;q<C&&d(w,$[$.length-1],q),d(w,b[b.length-1],C)}else k===null&&v.flush(g.context.currentTime),v.add(u(b,E,T)),_.setValueCurveAtTime(b,E,T);return w}};return n.set(w,_),e.set(w,g),t(w,k),w},U1=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:s,value:r}=n;e.exponentialRampToValueAtTime(r,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:r}=n;e.linearRampToValueAtTime(r,s)}else if(n.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=n;e.setTargetAtTime(r,s,i)}else if(n.type==="setValue"){const{startTime:s,value:r}=n;e.setValueAtTime(r,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=n;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class wg{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((s,r)=>e.call(n,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const W1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},G1=(t,e,n,s,r,i,o,a,l,c,u,h,d,g)=>class extends e{constructor(_,x,f){var p;const v=a(_),k=l(v),w=u({...W1,...f});d(w);const S=uu.get(v),E=S==null?void 0:S.get(x),T=k||v.state!=="closed"?v:(p=o(v))!==null&&p!==void 0?p:v,b=r(T,k?null:_.baseLatency,c,x,E,w),C=k?s(x,w,E):null;super(_,!0,b,C);const D=[];b.parameters.forEach((P,j)=>{const $=n(this,k,P);D.push([j,$])}),this._nativeAudioWorkletNode=b,this._onprocessorerror=null,this._parameters=new wg(D),k&&t(v,this);const{activeInputs:A}=i(this);h(b,A)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(_){const x=typeof _=="function"?g(this,_):null;this._nativeAudioWorkletNode.onprocessorerror=x;const f=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=f!==null&&f===x?_:f}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Pa(t,e,n,s,r){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,r);else{const i=t.getChannelData(s);if(e[n].byteLength===0)e[n]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const kg=(t,e,n,s,r)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],s,r):e[n].byteLength!==0&&t.getChannelData(s).set(e[n],r)},ja=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));n.push(r)}return n},$1=(t,e)=>{const n=Qt(hu,t),s=me(e);return Qt(n,s)},H1=async(t,e,n,s,r,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=s.channelCount*s.numberOfInputs,c=r.reduce((x,f)=>x+f,0),u=c===0?null:n.createBuffer(c,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=it(t),d=await $1(n,t),g=ja(s.numberOfInputs,s.channelCount),y=ja(s.numberOfOutputs,r),_=Array.from(t.parameters.keys()).reduce((x,f)=>({...x,[f]:new Float32Array(128)}),{});for(let x=0;x<a;x+=128){if(s.numberOfInputs>0&&e!==null)for(let f=0;f<s.numberOfInputs;f+=1)for(let p=0;p<s.channelCount;p+=1)Pa(e,g[f],p,p,x);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:f},p)=>{Pa(e,_,f,l+p,x)});for(let f=0;f<s.numberOfInputs;f+=1)for(let p=0;p<r[f];p+=1)y[f][p].byteLength===0&&(y[f][p]=new Float32Array(128));try{const f=g.map((v,k)=>h.activeInputs[k].size===0?[]:v),p=o(x/n.sampleRate,n.sampleRate,()=>d.process(f,y,_));if(u!==null)for(let v=0,k=0;v<s.numberOfOutputs;v+=1){for(let w=0;w<r[v];w+=1)kg(u,y[v],w,k+w,x);k+=r[v]}if(!p)break}catch(f){t.dispatchEvent(new ErrorEvent("processorerror",{colno:f.colno,filename:f.filename,lineno:f.lineno,message:f.message}));break}}return u},Y1=(t,e,n,s,r,i,o,a,l,c,u,h,d,g,y,_)=>(x,f,p)=>{const v=new WeakMap;let k=null;const w=async(S,E)=>{let T=u(S),b=null;const C=nt(T,E),D=Array.isArray(f.outputChannelCount)?f.outputChannelCount:Array.from(f.outputChannelCount);if(h===null){const A=D.reduce((q,U)=>q+U,0),P=r(E,{channelCount:Math.max(1,A),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,A)}),j=[];for(let q=0;q<S.numberOfOutputs;q+=1)j.push(s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[q]}));const $=o(E,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1});$.connect=e.bind(null,j),$.disconnect=l.bind(null,j),b=[P,j,$]}else C||(T=new h(E,x));if(v.set(E,b===null?T:b[2]),b!==null){if(k===null){if(p===void 0)throw new Error("Missing the processor constructor.");if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const U=S.channelCount*S.numberOfInputs,I=p.parameterDescriptors===void 0?0:p.parameterDescriptors.length,O=U+I;k=H1(S,O===0?null:await(async()=>{const V=new d(O,Math.ceil(S.context.length/128)*128,E.sampleRate),H=[],ze=[];for(let te=0;te<f.numberOfInputs;te+=1)H.push(o(V,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,gain:1})),ze.push(r(V,{channelCount:f.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:f.channelCount}));const be=await Promise.all(Array.from(S.parameters.values()).map(async te=>{const Re=i(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:te.value});return await g(V,te,Re.offset),Re})),Q=s(V,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+I)});for(let te=0;te<f.numberOfInputs;te+=1){H[te].connect(ze[te]);for(let Re=0;Re<f.channelCount;Re+=1)ze[te].connect(Q,Re,te*f.channelCount+Re)}for(const[te,Re]of be.entries())Re.connect(Q,0,U+te),Re.start(0);return Q.connect(V.destination),await Promise.all(H.map(te=>y(S,V,te))),_(V)})(),E,f,D,p,c)}const A=await k,P=n(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[j,$,q]=b;A!==null&&(P.buffer=A,P.start(0)),P.connect(j);for(let U=0,I=0;U<S.numberOfOutputs;U+=1){const O=$[U];for(let R=0;R<D[U];R+=1)j.connect(O,I+R,R);I+=D[U]}return q}if(C)for(const[A,P]of S.parameters.entries())await t(E,P,T.parameters.get(A));else for(const[A,P]of S.parameters.entries())await g(E,P,T.parameters.get(A));return await y(S,E,T),T};return{render(S,E){a(E,S);const T=v.get(E);return T!==void 0?Promise.resolve(T):w(S,E)}}},Q1=(t,e,n,s,r,i,o,a,l,c,u,h,d,g,y,_,x,f,p,v)=>class extends y{constructor(w,S){super(w,S),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(E,T)=>t(this,E,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(w,S,E){return new n({length:S,numberOfChannels:w,sampleRate:E})}createBufferSource(){return new s(this)}createChannelMerger(w=6){return new i(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new o(this,{numberOfOutputs:w})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(w=1){return new u(this,{maxDelayTime:w})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(w,S){return new g(this,{feedback:S,feedforward:w})}createOscillator(){return new _(this)}createPanner(){return new x(this)}createPeriodicWave(w,S,E={disableNormalization:!1}){return new f(this,{...E,imag:S,real:w})}createStereoPanner(){return new p(this)}createWaveShaper(){return new v(this)}decodeAudioData(w,S,E){return c(this._nativeContext,w).then(T=>(typeof S=="function"&&S(T),T),T=>{throw typeof E=="function"&&E(T),T})}},K1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},X1=(t,e,n,s,r,i,o,a)=>class extends t{constructor(c,u){const h=i(c),d={...K1,...u},g=r(h,d),y=o(h),_=y?n():null;super(c,!1,g,_),this._Q=e(this,y,g.Q,rt,dt),this._detune=e(this,y,g.detune,1200*Math.log2(rt),-1200*Math.log2(rt)),this._frequency=e(this,y,g.frequency,c.sampleRate/2,0),this._gain=e(this,y,g.gain,40*Math.log10(rt),dt),this._nativeBiquadFilterNode=g,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,h)}catch(d){throw d.code===11?s():d}if(c.length!==u.length||u.length!==h.length)throw s()}},Z1=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=nt(c,l);if(!u){const h={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,h)}return i.set(l,c),u?(await t(l,a.Q,c.Q),await t(l,a.detune,c.detune),await t(l,a.frequency,c.frequency),await t(l,a.gain,c.gain)):(await s(l,a.Q,c.Q),await s(l,a.detune,c.detune),await s(l,a.frequency,c.frequency),await s(l,a.gain,c.gain)),await r(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},J1=(t,e)=>(n,s)=>{const r=e.get(n);if(r!==void 0)return r;const i=t.get(n);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},ex={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},tx=(t,e,n,s,r)=>class extends t{constructor(o,a){const l=s(o),c={...ex,...a},u=n(l,c),h=r(l)?e():null;super(o,!1,u,h)}},nx=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!nt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,c)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},sx={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},rx=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=s(a),u=i({...sx,...l}),h=n(c,u),d=r(c)?e():null;super(a,!1,h,d)}},ix=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!nt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,c)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},ox=t=>(e,n,s)=>t(n,e,s),ax=t=>(e,n,s=0,r=0)=>{const i=e[s];if(i===void 0)throw t();return Ra(n)?i.connect(n,0,r):i.connect(n,0)},lx=t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},cx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},ux=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),h={...cx,...c},d=s(u,h),g=i(u),y=g?n():null;super(l,!1,d,y),this._constantSourceNodeRenderer=y,this._nativeConstantSourceNode=d,this._offset=e(this,g,d.offset,rt,dt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Ar(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Tn(this)&&io(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},hx=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let h=n(c);const d=nt(h,u);if(!d){const g={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(u,g),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(u,h),d?await t(u,c.offset,h.offset):await s(u,c.offset,h.offset),await r(c,u,h),h};return{set start(c){o=c},set stop(c){a=c},render(c,u){const h=i.get(u);return h!==void 0?Promise.resolve(h):l(c,u)}}},dx=t=>e=>(t[0]=e,t[0]),px={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},fx=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=s(a),u={...px,...l},h=n(c,u),g=r(c)?e():null;super(a,!1,h,g),this._isBufferNullified=!1,this._nativeConvolverNode=h,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},mx=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!nt(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,c)}return s.set(o,a),Br(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},gx=(t,e)=>(n,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,r)}catch(i){throw i.name==="SyntaxError"?t():i}},yx=()=>new DOMException("","DataCloneError"),vp=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>r();try{e.postMessage(t,[t])}catch{}finally{r()}})},vx=(t,e,n,s,r,i,o,a,l,c,u)=>(h,d)=>{const g=o(h)?h:i(h);if(r.has(d)){const y=n();return Promise.reject(y)}try{r.add(d)}catch{}return e(l,()=>l(g))?g.decodeAudioData(d).then(y=>(vp(d).catch(()=>{}),e(a,()=>a(y))||u(y),t.add(y),y)):new Promise((y,_)=>{const x=async()=>{try{await vp(d)}catch{}},f=p=>{_(p),x()};try{g.decodeAudioData(d,p=>{typeof p.copyFromChannel!="function"&&(c(p),mh(p)),t.add(p),x().then(()=>y(p))},p=>{f(p===null?s():p)})}catch(p){f(p)}})},_x=(t,e,n,s,r,i,o,a)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const h=i(l.context),d=a(h);if(u===c){if(e.delete(l),!d&&o(l)){const g=s(l),{outputs:y}=n(l);for(const _ of y)if(ao(_)){const x=s(_[0]);t(g,x,_[1],_[2])}else{const x=r(_[0]);g.connect(x,_[1])}}}else e.set(l,u-c)},xx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},wx=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),h={...xx,...c},d=s(u,h),g=i(u),y=g?n(h.maxDelayTime):null;super(l,!1,d,y),this._delayTime=e(this,g,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},kx=(t,e,n,s,r)=>i=>{const o=new WeakMap,a=async(l,c)=>{let u=n(l);const h=nt(u,c);if(!h){const d={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(c,d)}return o.set(c,u),h?await t(c,l.delayTime,u.delayTime):await s(c,l.delayTime,u.delayTime),await r(l,c,u),u};return{render(l,c){const u=o.get(c);return u!==void 0?Promise.resolve(u):a(l,c)}}},Tx=t=>(e,n,s,r)=>t(e[r],i=>i[0]===n&&i[1]===s),Sx=t=>(e,n)=>{t(e).delete(n)},Ex=t=>"delayTime"in t,Cx=(t,e,n)=>function s(r,i){const o=Ia(i)?i:n(t,i);if(Ex(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>s([...r,o],l[0])).reduce((l,c)=>l.concat(c),[])},Po=(t,e,n)=>{const s=e[n];if(s===void 0)throw t();return s},Nx=t=>(e,n=void 0,s=void 0,r=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?Po(t,e,n).disconnect():Ra(n)?s===void 0?e.forEach(i=>i.disconnect(n)):r===void 0?Po(t,e,s).disconnect(n,0):Po(t,e,s).disconnect(n,0,r):s===void 0?e.forEach(i=>i.disconnect(n)):Po(t,e,s).disconnect(n,0),bx={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Ax=(t,e,n,s,r,i,o,a)=>class extends t{constructor(c,u){const h=i(c),d={...bx,...u},g=s(h,d),y=o(h),_=y?n():null;super(c,!1,g,_),this._attack=e(this,y,g.attack),this._knee=e(this,y,g.knee),this._nativeDynamicsCompressorNode=g,this._ratio=e(this,y,g.ratio),this._release=e(this,y,g.release),this._threshold=e(this,y,g.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Dx=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=nt(c,l);if(!u){const h={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,h)}return i.set(l,c),u?(await t(l,a.attack,c.attack),await t(l,a.knee,c.knee),await t(l,a.ratio,c.ratio),await t(l,a.release,c.release),await t(l,a.threshold,c.threshold)):(await s(l,a.attack,c.attack),await s(l,a.knee,c.knee),await s(l,a.ratio,c.ratio),await s(l,a.release,c.release),await s(l,a.threshold,c.threshold)),await r(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},Ix=()=>new DOMException("","EncodingError"),Mx=t=>e=>new Promise((n,s)=>{if(t===null){s(new SyntaxError);return}const r=t.document.head;if(r===null)s(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(u,h,d,g,y)=>{if(h===a||h===t.location.href&&d===1&&g===1)return c(),s(y),!1;if(l!==null)return l(u,h,d,g,y)},i.onerror=()=>{c(),s(new SyntaxError)},i.onload=()=>{c(),n()},i.src=a,i.type="module",r.appendChild(i)}}),Ox=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=t(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(n,i,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,r)}},Rx=t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},Px=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},jx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Fx=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=r(a),u={...jx,...l},h=s(c,u),d=i(c),g=d?n():null;super(a,!1,h,g),this._gain=e(this,d,h.gain,rt,dt)}get gain(){return this._gain}},Vx=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=nt(c,l);if(!u){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,h)}return i.set(l,c),u?await t(l,a.gain,c.gain):await s(l,a.gain,c.gain),await r(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},Lx=(t,e)=>n=>e(t,n),Bx=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},qx=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},zx=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},Ux=t=>e=>t.get(e),Ge=()=>new DOMException("","InvalidStateError"),Wx=t=>e=>{const n=t.get(e);if(n===void 0)throw Ge();return n},Gx=(t,e)=>n=>{let s=t.get(n);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s},$x=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Tl=()=>new DOMException("","InvalidAccessError"),Hx=t=>{t.getFrequencyResponse=(e=>(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw Tl();return e.call(t,n,s,r)})(t.getFrequencyResponse)},Yx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Qx=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=s(a),u=r(c),h={...Yx,...l},d=e(c,u?null:a.baseLatency,h),g=u?n(h.feedback,h.feedforward):null;super(a,!1,d,g),Hx(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}},Tg=(t,e,n,s,r,i,o,a,l,c,u)=>{const h=c.length;let d=a;for(let g=0;g<h;g+=1){let y=n[0]*c[g];for(let _=1;_<r;_+=1){const x=d-_&l-1;y+=n[_]*i[x],y-=t[_]*o[x]}for(let _=r;_<s;_+=1)y+=n[_]*i[d-_&l-1];for(let _=r;_<e;_+=1)y-=t[_]*o[d-_&l-1];i[d]=c[g],o[d]=y,d=d+1&l-1,u[g]=y}return d},Kx=(t,e,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,l=Math.min(o,a);if(r[0]!==1){for(let y=0;y<o;y+=1)i[y]/=r[0];for(let y=1;y<a;y+=1)r[y]/=r[0]}const c=32,u=new Float32Array(c),h=new Float32Array(c),d=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),g=t.numberOfChannels;for(let y=0;y<g;y+=1){const _=t.getChannelData(y),x=d.getChannelData(y);u.fill(0),h.fill(0),Tg(r,o,i,a,l,u,h,0,c,_,x)}return d},Xx=(t,e,n,s,r)=>(i,o)=>{const a=new WeakMap;let l=null;const c=async(u,h)=>{let d=null,g=e(u);const y=nt(g,h);if(h.createIIRFilter===void 0?d=t(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):y||(g=h.createIIRFilter(o,i)),a.set(h,d===null?g:d),d!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new n(u.context.destination.channelCount,u.context.length,h.sampleRate);l=(async()=>{await s(u,x,x.destination);const f=await r(x);return Kx(f,h,i,o)})()}const _=await l;return d.buffer=_,d.start(0),d}return await s(u,h,g),g};return{render(u,h){const d=a.get(h);return d!==void 0?Promise.resolve(d):c(u,h)}}},Zx=(t,e,n,s,r,i)=>o=>(a,l)=>{const c=t.get(a);if(c===void 0){if(!o&&i(a)){const u=s(a),{outputs:h}=n(a);for(const d of h)if(ao(d)){const g=s(d[0]);e(u,g,d[1],d[2])}else{const g=r(d[0]);u.disconnect(g,d[1])}}t.set(a,l)}else t.set(a,c+l)},Jx=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},ew=(t,e)=>n=>t.has(n)||e(n),tw=(t,e)=>n=>t.has(n)||e(n),nw=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},sw=t=>e=>t!==null&&e instanceof t,rw=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,iw=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,ow=(t,e)=>n=>t(n)||e(n),aw=t=>e=>t!==null&&e instanceof t,lw=t=>t!==null&&t.isSecureContext,cw=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(s(a))throw TypeError();super(i,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},uw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},hw=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i);if(s(a))throw new TypeError;const l={...uw,...o},c=e(a,l);super(i,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},dw=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(s(a))throw new TypeError;super(i,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},pw=(t,e,n)=>class extends t{constructor(r,i){const o=n(r),a=e(o,i);super(r,!0,a,null)}},fw=(t,e,n,s,r,i)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,wl.set(this,a),s(a)&&r.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Pi=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},mw=(t,e)=>(n,s,r)=>{const i=new Set;return n.connect=(o=>(a,l=0,c=0)=>{const u=i.size===0;if(e(a))return o.call(n,a,l,c),t(i,[a,l,c],h=>h[0]===a&&h[1]===l&&h[2]===c,!0),u&&s(),a;o.call(n,a,l),t(i,[a,l],h=>h[0]===a&&h[1]===l,!0),u&&s()})(n.connect),n.disconnect=(o=>(a,l,c)=>{const u=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(n,a,l,c):o.call(n,a,l);for(const d of i)d[0]===a&&(l===void 0||d[1]===l)&&(c===void 0||d[2]===c)&&i.delete(d)}const h=i.size===0;u&&h&&r()})(n.disconnect),n},ge=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n]&&(t[n]=s)},qe=(t,e)=>{ge(t,e,"channelCount"),ge(t,e,"channelCountMode"),ge(t,e,"channelInterpretation")},_p=t=>typeof t.getFloatTimeDomainData=="function",gw=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let r=0;r<s;r+=1)e[r]=(n[r]-128)*.0078125;return e}},yw=(t,e)=>(n,s)=>{const r=n.createAnalyser();if(qe(r,s),!(s.maxDecibels>s.minDecibels))throw e();return ge(r,s,"fftSize"),ge(r,s,"maxDecibels"),ge(r,s,"minDecibels"),ge(r,s,"smoothingTimeConstant"),t(_p,()=>_p(r))||gw(r),r},vw=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Ee=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n].value&&(t[n].value=s)},_w=t=>{t.start=(e=>{let n=!1;return(s=0,r=0,i)=>{if(n)throw Ge();e.call(t,s,r,i),n=!0}})(t.start)},vh=t=>{t.start=(e=>(n=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,r)})(t.start)},_h=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},xw=(t,e,n,s,r,i,o,a,l,c,u)=>(h,d)=>{const g=h.createBufferSource();return qe(g,d),Ee(g,d,"playbackRate"),ge(g,d,"buffer"),ge(g,d,"loop"),ge(g,d,"loopEnd"),ge(g,d,"loopStart"),e(n,()=>n(h))||_w(g),e(s,()=>s(h))||l(g),e(r,()=>r(h))||c(g,h),e(i,()=>i(h))||vh(g),e(o,()=>o(h))||u(g,h),e(a,()=>a(h))||_h(g),t(h,g),g},ww=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,kw=(t,e)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{i.channelCount=l}catch(c){if(l>i.maxChannelCount)throw c}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},Tw=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,Sw=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},Ew=(t,e,n,s,r)=>(i,o,a,l,c,u)=>{if(a!==null)try{const h=new a(i,l,u),d=new Map;let g=null;if(Object.defineProperties(h,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>g,set:y=>{typeof g=="function"&&h.removeEventListener("processorerror",g),g=typeof y=="function"?y:null,typeof g=="function"&&h.addEventListener("processorerror",g)}}}),h.addEventListener=(y=>(..._)=>{if(_[0]==="processorerror"){const x=typeof _[1]=="function"?_[1]:typeof _[1]=="object"&&_[1]!==null&&typeof _[1].handleEvent=="function"?_[1].handleEvent:null;if(x!==null){const f=d.get(_[1]);f!==void 0?_[1]=f:(_[1]=p=>{p.type==="error"?(Object.defineProperties(p,{type:{value:"processorerror"}}),x(p)):x(new ErrorEvent(_[0],{...p}))},d.set(x,_[1]))}}return y.call(h,"error",_[1],_[2]),y.call(h,..._)})(h.addEventListener),h.removeEventListener=(y=>(..._)=>{if(_[0]==="processorerror"){const x=d.get(_[1]);x!==void 0&&(d.delete(_[1]),_[1]=x)}return y.call(h,"error",_[1],_[2]),y.call(h,_[0],_[1],_[2])})(h.removeEventListener),u.numberOfOutputs!==0){const y=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(y).connect(i.destination),r(h,()=>y.disconnect(),()=>y.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(c===void 0)throw s();return Sw(u),e(i,o,c,u)},Sg=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Cw=t=>new Promise((e,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),n(i)},r.postMessage(t)}),Nw=async(t,e)=>{const n=await Cw(e);return new t(n)},bw=(t,e,n,s)=>{let r=hu.get(t);r===void 0&&(r=new WeakMap,hu.set(t,r));const i=Nw(n,s);return r.set(e,i),i},Aw=(t,e,n,s,r,i,o,a,l,c,u,h,d)=>(g,y,_,x)=>{if(x.numberOfInputs===0&&x.numberOfOutputs===0)throw l();const f=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(f.some(F=>F<1))throw l();if(f.length!==x.numberOfOutputs)throw e();if(x.channelCountMode!=="explicit")throw l();const p=x.channelCount*x.numberOfInputs,v=f.reduce((F,Y)=>F+Y,0),k=_.parameterDescriptors===void 0?0:_.parameterDescriptors.length;if(p+k>6||v>6)throw l();const w=new MessageChannel,S=[],E=[];for(let F=0;F<x.numberOfInputs;F+=1)S.push(o(g,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),E.push(r(g,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const T=[];if(_.parameterDescriptors!==void 0)for(const{defaultValue:F,maxValue:Y,minValue:je,name:ve}of _.parameterDescriptors){const ie=i(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:x.parameterData[ve]!==void 0?x.parameterData[ve]:F===void 0?0:F});Object.defineProperties(ie.offset,{defaultValue:{get:()=>F===void 0?0:F},maxValue:{get:()=>Y===void 0?rt:Y},minValue:{get:()=>je===void 0?dt:je}}),T.push(ie)}const b=s(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,p+k)}),C=Sg(y,g.sampleRate),D=a(g,C,p+k,Math.max(1,v)),A=r(g,{channelCount:Math.max(1,v),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,v)}),P=[];for(let F=0;F<x.numberOfOutputs;F+=1)P.push(s(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:f[F]}));for(let F=0;F<x.numberOfInputs;F+=1){S[F].connect(E[F]);for(let Y=0;Y<x.channelCount;Y+=1)E[F].connect(b,Y,F*x.channelCount+Y)}const j=new wg(_.parameterDescriptors===void 0?[]:_.parameterDescriptors.map(({name:F},Y)=>{const je=T[Y];return je.connect(b,0,p+Y),je.start(0),[F,je.offset]}));b.connect(D);let $=x.channelInterpretation,q=null;const U=x.numberOfOutputs===0?[D]:P,I={get bufferSize(){return C},get channelCount(){return x.channelCount},set channelCount(F){throw n()},get channelCountMode(){return x.channelCountMode},set channelCountMode(F){throw n()},get channelInterpretation(){return $},set channelInterpretation(F){for(const Y of S)Y.channelInterpretation=F;$=F},get context(){return D.context},get inputs(){return S},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get onprocessorerror(){return q},set onprocessorerror(F){typeof q=="function"&&I.removeEventListener("processorerror",q),q=typeof F=="function"?F:null,typeof q=="function"&&I.addEventListener("processorerror",q)},get parameters(){return j},get port(){return w.port2},addEventListener(...F){return D.addEventListener(F[0],F[1],F[2])},connect:t.bind(null,U),disconnect:c.bind(null,U),dispatchEvent(...F){return D.dispatchEvent(F[0])},removeEventListener(...F){return D.removeEventListener(F[0],F[1],F[2])}},O=new Map;w.port1.addEventListener=(F=>(...Y)=>{if(Y[0]==="message"){const je=typeof Y[1]=="function"?Y[1]:typeof Y[1]=="object"&&Y[1]!==null&&typeof Y[1].handleEvent=="function"?Y[1].handleEvent:null;if(je!==null){const ve=O.get(Y[1]);ve!==void 0?Y[1]=ve:(Y[1]=ie=>{u(g.currentTime,g.sampleRate,()=>je(ie))},O.set(je,Y[1]))}}return F.call(w.port1,Y[0],Y[1],Y[2])})(w.port1.addEventListener),w.port1.removeEventListener=(F=>(...Y)=>{if(Y[0]==="message"){const je=O.get(Y[1]);je!==void 0&&(O.delete(Y[1]),Y[1]=je)}return F.call(w.port1,Y[0],Y[1],Y[2])})(w.port1.removeEventListener);let R=null;Object.defineProperty(w.port1,"onmessage",{get:()=>R,set:F=>{typeof R=="function"&&w.port1.removeEventListener("message",R),R=typeof F=="function"?F:null,typeof R=="function"&&(w.port1.addEventListener("message",R),w.port1.start())}}),_.prototype.port=w.port1;let V=null;bw(g,I,_,x).then(F=>V=F);const ze=ja(x.numberOfInputs,x.channelCount),be=ja(x.numberOfOutputs,f),Q=_.parameterDescriptors===void 0?[]:_.parameterDescriptors.reduce((F,{name:Y})=>({...F,[Y]:new Float32Array(128)}),{});let te=!0;const Re=()=>{x.numberOfOutputs>0&&D.disconnect(A);for(let F=0,Y=0;F<x.numberOfOutputs;F+=1){const je=P[F];for(let ve=0;ve<f[F];ve+=1)A.disconnect(je,Y+ve,ve);Y+=f[F]}},G=new Map;D.onaudioprocess=({inputBuffer:F,outputBuffer:Y})=>{if(V!==null){const je=h(I);for(let ve=0;ve<C;ve+=128){for(let ie=0;ie<x.numberOfInputs;ie+=1)for(let Te=0;Te<x.channelCount;Te+=1)Pa(F,ze[ie],Te,Te,ve);_.parameterDescriptors!==void 0&&_.parameterDescriptors.forEach(({name:ie},Te)=>{Pa(F,Q,ie,p+Te,ve)});for(let ie=0;ie<x.numberOfInputs;ie+=1)for(let Te=0;Te<f[ie];Te+=1)be[ie][Te].byteLength===0&&(be[ie][Te]=new Float32Array(128));try{const ie=ze.map((At,Fn)=>{if(je[Fn].size>0)return G.set(Fn,C/128),At;const Ml=G.get(Fn);return Ml===void 0?[]:(At.every(g0=>g0.every(y0=>y0===0))&&(Ml===1?G.delete(Fn):G.set(Fn,Ml-1)),At)});te=u(g.currentTime+ve/g.sampleRate,g.sampleRate,()=>V.process(ie,be,Q));for(let At=0,Fn=0;At<x.numberOfOutputs;At+=1){for(let Gr=0;Gr<f[At];Gr+=1)kg(Y,be[At],Gr,Fn+Gr,ve);Fn+=f[At]}}catch(ie){te=!1,I.dispatchEvent(new ErrorEvent("processorerror",{colno:ie.colno,filename:ie.filename,lineno:ie.lineno,message:ie.message}))}if(!te){for(let ie=0;ie<x.numberOfInputs;ie+=1){S[ie].disconnect(E[ie]);for(let Te=0;Te<x.channelCount;Te+=1)E[ve].disconnect(b,Te,ie*x.channelCount+Te)}if(_.parameterDescriptors!==void 0){const ie=_.parameterDescriptors.length;for(let Te=0;Te<ie;Te+=1){const At=T[Te];At.disconnect(b,0,p+Te),At.stop()}}b.disconnect(D),D.onaudioprocess=null,ms?Re():Ys();break}}}};let ms=!1;const gs=o(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Hs=()=>D.connect(gs).connect(g.destination),Ys=()=>{D.disconnect(gs),gs.disconnect()},f0=()=>{if(te){Ys(),x.numberOfOutputs>0&&D.connect(A);for(let F=0,Y=0;F<x.numberOfOutputs;F+=1){const je=P[F];for(let ve=0;ve<f[F];ve+=1)A.connect(je,Y+ve,ve);Y+=f[F]}}ms=!0},m0=()=>{te&&(Hs(),Re()),ms=!1};return Hs(),d(I,f0,m0)},Eg=(t,e)=>{const n=t.createBiquadFilter();return qe(n,e),Ee(n,e,"Q"),Ee(n,e,"detune"),Ee(n,e,"frequency"),Ee(n,e,"gain"),ge(n,e,"type"),n},Dw=(t,e)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,r),qe(r,s),r},Iw=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Ge()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Ge()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Ge()}})},lo=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return qe(n,e),Iw(n),n},Mw=(t,e,n,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return qe(a,o),Ee(a,o,"offset"),e(s,()=>s(i))||vh(a),e(r,()=>r(i))||_h(a),t(i,a),a},qr=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Ow=(t,e,n,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),l=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,l.buffer=a,l.loop=!0;const h={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(y){c.channelCount=y},get channelCountMode(){return c.channelCountMode},set channelCountMode(y){c.channelCountMode=y},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(y){c.channelInterpretation=y},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(y){l.onended=y},addEventListener(...y){return l.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return l.dispatchEvent(y[0])},removeEventListener(...y){return l.removeEventListener(y[0],y[1],y[2])},start(y=0){l.start.call(l,y)},stop(y=0){l.stop.call(l,y)}},d=()=>l.connect(c),g=()=>l.disconnect(c);return t(r,l),s(qr(h,c),d,g)},Rw=(t,e)=>(n,s)=>{const r=n.createConvolver();if(qe(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),ge(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw t();return i.call(r,o)}),s.channelCountMode==="max"))throw t();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw t();return i.call(r,o)}),r},Cg=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return qe(n,e),Ee(n,e,"delayTime"),n},Pw=t=>(e,n)=>{const s=e.createDynamicsCompressor();if(qe(s,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Ee(s,n,"attack"),Ee(s,n,"knee"),Ee(s,n,"ratio"),Ee(s,n,"release"),Ee(s,n,"threshold"),s},vt=(t,e)=>{const n=t.createGain();return qe(n,e),Ee(n,e,"gain"),n},jw=t=>(e,n,s)=>{if(e.createIIRFilter===void 0)return t(e,n,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return qe(r,s),r};function Fw(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Vw(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function xp(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=Vw(n,e),n[0]+=t[s];return n}const Lw=(t,e,n,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:u})=>{const h=Sg(i,r.sampleRate),d=c instanceof Float64Array?c:new Float64Array(c),g=u instanceof Float64Array?u:new Float64Array(u),y=d.length,_=g.length,x=Math.min(y,_);if(y===0||y>20)throw s();if(d[0]===0)throw e();if(_===0||_>20)throw s();if(g[0]===0)throw e();if(d[0]!==1){for(let T=0;T<_;T+=1)g[T]/=d[0];for(let T=1;T<y;T+=1)d[T]/=d[0]}const f=n(r,h,o,o);f.channelCount=o,f.channelCountMode=a,f.channelInterpretation=l;const p=32,v=[],k=[],w=[];for(let T=0;T<o;T+=1){v.push(0);const b=new Float32Array(p),C=new Float32Array(p);b.fill(0),C.fill(0),k.push(b),w.push(C)}f.onaudioprocess=T=>{const b=T.inputBuffer,C=T.outputBuffer,D=b.numberOfChannels;for(let A=0;A<D;A+=1){const P=b.getChannelData(A),j=C.getChannelData(A);v[A]=Tg(d,y,g,_,x,k[A],w[A],v[A],p,P,j)}};const S=r.sampleRate/2;return qr({get bufferSize(){return h},get channelCount(){return f.channelCount},set channelCount(T){f.channelCount=T},get channelCountMode(){return f.channelCountMode},set channelCountMode(T){f.channelCountMode=T},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(T){f.channelInterpretation=T},get context(){return f.context},get inputs(){return[f]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},addEventListener(...T){return f.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return f.dispatchEvent(T[0])},getFrequencyResponse(T,b,C){if(T.length!==b.length||b.length!==C.length)throw t();const D=T.length;for(let A=0;A<D;A+=1){const P=-Math.PI*(T[A]/S),j=[Math.cos(P),Math.sin(P)],$=xp(g,j),q=xp(d,j),U=Fw($,q);b[A]=Math.sqrt(U[0]*U[0]+U[1]*U[1]),C[A]=Math.atan2(U[1],U[0])}},removeEventListener(...T){return f.removeEventListener(T[0],T[1],T[2])}},f)},Bw=(t,e)=>t.createMediaElementSource(e.mediaElement),qw=(t,e)=>{const n=t.createMediaStreamDestination();return qe(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},zw=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},Uw=(t,e)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=n.createMediaStreamSource(r);if(s.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},Ww=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,Gw=(t,e,n,s,r,i)=>(o,a)=>{const l=o.createOscillator();return qe(l,a),Ee(l,a,"detune"),Ee(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):ge(l,a,"type"),e(n,()=>n(o))||vh(l),e(s,()=>s(o))||i(l,o),e(r,()=>r(o))||_h(l),t(o,l),l},$w=t=>(e,n)=>{const s=e.createPanner();return s.orientationX===void 0?t(e,n):(qe(s,n),Ee(s,n,"orientationX"),Ee(s,n,"orientationY"),Ee(s,n,"orientationZ"),Ee(s,n,"positionX"),Ee(s,n,"positionY"),Ee(s,n,"positionZ"),ge(s,n,"coneInnerAngle"),ge(s,n,"coneOuterAngle"),ge(s,n,"coneOuterGain"),ge(s,n,"distanceModel"),ge(s,n,"maxDistance"),ge(s,n,"panningModel"),ge(s,n,"refDistance"),ge(s,n,"rolloffFactor"),s)},Hw=(t,e,n,s,r,i,o,a,l,c)=>(u,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:g,distanceModel:y,maxDistance:_,orientationX:x,orientationY:f,orientationZ:p,panningModel:v,positionX:k,positionY:w,positionZ:S,refDistance:E,rolloffFactor:T,...b})=>{const C=u.createPanner();if(b.channelCount>2||b.channelCountMode==="max")throw o();qe(C,b);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},A=n(u,{...D,channelInterpretation:"speakers",numberOfInputs:6}),P=s(u,{...b,gain:1}),j=s(u,{...D,gain:1}),$=s(u,{...D,gain:0}),q=s(u,{...D,gain:0}),U=s(u,{...D,gain:0}),I=s(u,{...D,gain:0}),O=s(u,{...D,gain:0}),R=r(u,256,6,1),V=i(u,{...D,curve:new Float32Array([1,1]),oversample:"none"});let H=[x,f,p],ze=[k,w,S];const be=new Float32Array(1);R.onaudioprocess=({inputBuffer:G})=>{const ms=[l(G,be,0),l(G,be,1),l(G,be,2)];ms.some((Hs,Ys)=>Hs!==H[Ys])&&(C.setOrientation(...ms),H=ms);const gs=[l(G,be,3),l(G,be,4),l(G,be,5)];gs.some((Hs,Ys)=>Hs!==ze[Ys])&&(C.setPosition(...gs),ze=gs)},Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0});const Q={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(G){if(G>2)throw o();P.channelCount=G,C.channelCount=G},get channelCountMode(){return C.channelCountMode},set channelCountMode(G){if(G==="max")throw o();P.channelCountMode=G,C.channelCountMode=G},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(G){P.channelInterpretation=G,C.channelInterpretation=G},get coneInnerAngle(){return C.coneInnerAngle},set coneInnerAngle(G){C.coneInnerAngle=G},get coneOuterAngle(){return C.coneOuterAngle},set coneOuterAngle(G){C.coneOuterAngle=G},get coneOuterGain(){return C.coneOuterGain},set coneOuterGain(G){if(G<0||G>1)throw e();C.coneOuterGain=G},get context(){return C.context},get distanceModel(){return C.distanceModel},set distanceModel(G){C.distanceModel=G},get inputs(){return[P]},get maxDistance(){return C.maxDistance},set maxDistance(G){if(G<0)throw new RangeError;C.maxDistance=G},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get orientationX(){return j.gain},get orientationY(){return $.gain},get orientationZ(){return q.gain},get panningModel(){return C.panningModel},set panningModel(G){C.panningModel=G},get positionX(){return U.gain},get positionY(){return I.gain},get positionZ(){return O.gain},get refDistance(){return C.refDistance},set refDistance(G){if(G<0)throw new RangeError;C.refDistance=G},get rolloffFactor(){return C.rolloffFactor},set rolloffFactor(G){if(G<0)throw new RangeError;C.rolloffFactor=G},addEventListener(...G){return P.addEventListener(G[0],G[1],G[2])},dispatchEvent(...G){return P.dispatchEvent(G[0])},removeEventListener(...G){return P.removeEventListener(G[0],G[1],G[2])}};h!==Q.coneInnerAngle&&(Q.coneInnerAngle=h),d!==Q.coneOuterAngle&&(Q.coneOuterAngle=d),g!==Q.coneOuterGain&&(Q.coneOuterGain=g),y!==Q.distanceModel&&(Q.distanceModel=y),_!==Q.maxDistance&&(Q.maxDistance=_),x!==Q.orientationX.value&&(Q.orientationX.value=x),f!==Q.orientationY.value&&(Q.orientationY.value=f),p!==Q.orientationZ.value&&(Q.orientationZ.value=p),v!==Q.panningModel&&(Q.panningModel=v),k!==Q.positionX.value&&(Q.positionX.value=k),w!==Q.positionY.value&&(Q.positionY.value=w),S!==Q.positionZ.value&&(Q.positionZ.value=S),E!==Q.refDistance&&(Q.refDistance=E),T!==Q.rolloffFactor&&(Q.rolloffFactor=T),(H[0]!==1||H[1]!==0||H[2]!==0)&&C.setOrientation(...H),(ze[0]!==0||ze[1]!==0||ze[2]!==0)&&C.setPosition(...ze);const te=()=>{P.connect(C),t(P,V,0,0),V.connect(j).connect(A,0,0),V.connect($).connect(A,0,1),V.connect(q).connect(A,0,2),V.connect(U).connect(A,0,3),V.connect(I).connect(A,0,4),V.connect(O).connect(A,0,5),A.connect(R).connect(u.destination)},Re=()=>{P.disconnect(C),a(P,V,0,0),V.disconnect(j),j.disconnect(A),V.disconnect($),$.disconnect(A),V.disconnect(q),q.disconnect(A),V.disconnect(U),U.disconnect(A),V.disconnect(I),I.disconnect(A),V.disconnect(O),O.disconnect(A),A.disconnect(R),R.disconnect(u.destination)};return c(qr(Q,C),te,Re)},Yw=t=>(e,{disableNormalization:n,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a},co=(t,e,n,s)=>t.createScriptProcessor(e,n,s),Qw=(t,e)=>(n,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,s);const i=n.createStereoPanner();return qe(i,s),Ee(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},Kw=(t,e,n,s,r,i)=>{const a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},h=(y,_,x,f)=>{const p=new Float32Array(16385),v=new Float32Array(16385);for(let b=0;b<16385;b+=1){const C=b/16384*l;p[b]=Math.cos(C),v[b]=Math.sin(C)}const k=n(y,{...c,gain:0}),w=s(y,{...u,curve:p}),S=s(y,{...u,curve:a}),E=n(y,{...c,gain:0}),T=s(y,{...u,curve:v});return{connectGraph(){_.connect(k),_.connect(S.inputs===void 0?S:S.inputs[0]),_.connect(E),S.connect(x),x.connect(w.inputs===void 0?w:w.inputs[0]),x.connect(T.inputs===void 0?T:T.inputs[0]),w.connect(k.gain),T.connect(E.gain),k.connect(f,0,0),E.connect(f,0,1)},disconnectGraph(){_.disconnect(k),_.disconnect(S.inputs===void 0?S:S.inputs[0]),_.disconnect(E),S.disconnect(x),x.disconnect(w.inputs===void 0?w:w.inputs[0]),x.disconnect(T.inputs===void 0?T:T.inputs[0]),w.disconnect(k.gain),T.disconnect(E.gain),k.disconnect(f,0,0),E.disconnect(f,0,1)}}},d=(y,_,x,f)=>{const p=new Float32Array(16385),v=new Float32Array(16385),k=new Float32Array(16385),w=new Float32Array(16385),S=Math.floor(16385/2);for(let U=0;U<16385;U+=1)if(U>S){const I=(U-S)/(16384-S)*l;p[U]=Math.cos(I),v[U]=Math.sin(I),k[U]=0,w[U]=1}else{const I=U/(16384-S)*l;p[U]=1,v[U]=0,k[U]=Math.cos(I),w[U]=Math.sin(I)}const E=e(y,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=n(y,{...c,gain:0}),b=s(y,{...u,curve:p}),C=n(y,{...c,gain:0}),D=s(y,{...u,curve:v}),A=s(y,{...u,curve:a}),P=n(y,{...c,gain:0}),j=s(y,{...u,curve:k}),$=n(y,{...c,gain:0}),q=s(y,{...u,curve:w});return{connectGraph(){_.connect(E),_.connect(A.inputs===void 0?A:A.inputs[0]),E.connect(T,0),E.connect(C,0),E.connect(P,1),E.connect($,1),A.connect(x),x.connect(b.inputs===void 0?b:b.inputs[0]),x.connect(D.inputs===void 0?D:D.inputs[0]),x.connect(j.inputs===void 0?j:j.inputs[0]),x.connect(q.inputs===void 0?q:q.inputs[0]),b.connect(T.gain),D.connect(C.gain),j.connect(P.gain),q.connect($.gain),T.connect(f,0,0),P.connect(f,0,0),C.connect(f,0,1),$.connect(f,0,1)},disconnectGraph(){_.disconnect(E),_.disconnect(A.inputs===void 0?A:A.inputs[0]),E.disconnect(T,0),E.disconnect(C,0),E.disconnect(P,1),E.disconnect($,1),A.disconnect(x),x.disconnect(b.inputs===void 0?b:b.inputs[0]),x.disconnect(D.inputs===void 0?D:D.inputs[0]),x.disconnect(j.inputs===void 0?j:j.inputs[0]),x.disconnect(q.inputs===void 0?q:q.inputs[0]),b.disconnect(T.gain),D.disconnect(C.gain),j.disconnect(P.gain),q.disconnect($.gain),T.disconnect(f,0,0),P.disconnect(f,0,0),C.disconnect(f,0,1),$.disconnect(f,0,1)}}},g=(y,_,x,f,p)=>{if(_===1)return h(y,x,f,p);if(_===2)return d(y,x,f,p);throw r()};return(y,{channelCount:_,channelCountMode:x,pan:f,...p})=>{if(x==="max")throw r();const v=t(y,{...p,channelCount:1,channelCountMode:x,numberOfInputs:2}),k=n(y,{...p,channelCount:_,channelCountMode:x,gain:1}),w=n(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:f});let{connectGraph:S,disconnectGraph:E}=g(y,_,k,w,v);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(A){k.channelCount!==A&&(b&&E(),{connectGraph:S,disconnectGraph:E}=g(y,A,k,w,v),b&&S()),k.channelCount=A},get channelCountMode(){return k.channelCountMode},set channelCountMode(A){if(A==="clamped-max"||A==="max")throw r();k.channelCountMode=A},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(A){k.channelInterpretation=A},get context(){return k.context},get inputs(){return[k]},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get pan(){return w.gain},addEventListener(...A){return k.addEventListener(A[0],A[1],A[2])},dispatchEvent(...A){return k.dispatchEvent(A[0])},removeEventListener(...A){return k.removeEventListener(A[0],A[1],A[2])}};let b=!1;const C=()=>{S(),b=!0},D=()=>{E(),b=!1};return i(qr(T,v),C,D)}},Xw=(t,e,n,s,r,i,o)=>(a,l)=>{const c=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);qe(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();ge(c,{curve:u},"curve"),ge(c,l,"oversample");let h=null,d=!1;return o(c,"curve",_=>()=>_.call(c),_=>x=>(_.call(c,x),d&&(s(x)&&h===null?h=t(a,c):!s(x)&&h!==null&&(h(),h=null)),x)),r(c,()=>{d=!0,s(c.curve)&&(h=t(a,c))},()=>{d=!1,h!==null&&(h(),h=null)})},Zw=(t,e,n,s,r)=>(i,{curve:o,oversample:a,...l})=>{const c=i.createWaveShaper(),u=i.createWaveShaper();qe(c,l),qe(u,l);const h=n(i,{...l,gain:1}),d=n(i,{...l,gain:-1}),g=n(i,{...l,gain:1}),y=n(i,{...l,gain:-1});let _=null,x=!1,f=null;const p={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(w){h.channelCount=w,d.channelCount=w,c.channelCount=w,g.channelCount=w,u.channelCount=w,y.channelCount=w},get channelCountMode(){return c.channelCountMode},set channelCountMode(w){h.channelCountMode=w,d.channelCountMode=w,c.channelCountMode=w,g.channelCountMode=w,u.channelCountMode=w,y.channelCountMode=w},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(w){h.channelInterpretation=w,d.channelInterpretation=w,c.channelInterpretation=w,g.channelInterpretation=w,u.channelInterpretation=w,y.channelInterpretation=w},get context(){return c.context},get curve(){return f},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)c.curve=w,u.curve=w;else{const S=w.length,E=new Float32Array(S+2-S%2),T=new Float32Array(S+2-S%2);E[0]=w[0],T[0]=-w[S-1];const b=Math.ceil((S+1)/2),C=(S+1)/2-1;for(let D=1;D<b;D+=1){const A=D/b*C,P=Math.floor(A),j=Math.ceil(A);E[D]=P===j?w[P]:(1-(A-P))*w[P]+(1-(j-A))*w[j],T[D]=P===j?-w[S-1-P]:-((1-(A-P))*w[S-1-P])-(1-(j-A))*w[S-1-j]}E[b]=S%2===1?w[b-1]:(w[b-2]+w[b-1])/2,c.curve=E,u.curve=T}f=w,x&&(s(f)&&_===null?_=t(i,h):_!==null&&(_(),_=null))},get inputs(){return[h]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(w){c.oversample=w,u.oversample=w},addEventListener(...w){return h.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return h.dispatchEvent(w[0])},removeEventListener(...w){return h.removeEventListener(w[0],w[1],w[2])}};o!==null&&(p.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==p.oversample&&(p.oversample=a);const v=()=>{h.connect(c).connect(g),h.connect(d).connect(u).connect(y).connect(g),x=!0,s(f)&&(_=t(i,h))},k=()=>{h.disconnect(c),c.disconnect(g),h.disconnect(d),d.disconnect(u),u.disconnect(y),y.disconnect(g),x=!1,_!==null&&(_(),_=null)};return r(qr(p,g),v,k)},ut=()=>new DOMException("","NotSupportedError"),Jw={numberOfChannels:1},ek=(t,e,n,s,r)=>class extends t{constructor(o,a,l){let c;if(typeof o=="number"&&a!==void 0&&l!==void 0)c={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")c=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:h,sampleRate:d}={...Jw,...c},g=s(h,u,d);e(Pi,()=>Pi(g))||g.addEventListener("statechange",(()=>{let y=0;const _=x=>{this._state==="running"&&(y>0?(g.removeEventListener("statechange",_),x.stopImmediatePropagation(),this._waitForThePromiseToSettle(x)):y+=1)};return _})()),super(g,h),this._length=u,this._nativeOfflineAudioContext=g,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,yg(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},tk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},nk=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),h={...tk,...c},d=n(u,h),g=i(u),y=g?s():null,_=l.sampleRate/2;super(l,!1,d,y),this._detune=e(this,g,d.detune,153600,-153600),this._frequency=e(this,g,d.frequency,_,-_),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=y,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Ar(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Tn(this)&&io(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},sk=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;const c=async(u,h)=>{let d=n(u);const g=nt(d,h);if(!g){const y={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:o===null?void 0:o,type:d.type};d=e(h,y),a!==null&&d.start(a),l!==null&&d.stop(l)}return i.set(h,d),g?(await t(h,u.detune,d.detune),await t(h,u.frequency,d.frequency)):(await s(h,u.detune,d.detune),await s(h,u.frequency,d.frequency)),await r(u,h,d),d};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){l=u},render(u,h){const d=i.get(h);return d!==void 0?Promise.resolve(d):c(u,h)}}},rk={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ik=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),h={...rk,...c},d=n(u,h),g=i(u),y=g?s():null;super(l,!1,d,y),this._nativePannerNode=d,this._orientationX=e(this,g,d.orientationX,rt,dt),this._orientationY=e(this,g,d.orientationY,rt,dt),this._orientationZ=e(this,g,d.orientationZ,rt,dt),this._positionX=e(this,g,d.positionX,rt,dt),this._positionY=e(this,g,d.positionY,rt,dt),this._positionZ=e(this,g,d.positionZ,rt,dt),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},ok=(t,e,n,s,r,i,o,a,l,c)=>()=>{const u=new WeakMap;let h=null;const d=async(g,y)=>{let _=null,x=i(g);const f={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation},p={...f,coneInnerAngle:x.coneInnerAngle,coneOuterAngle:x.coneOuterAngle,coneOuterGain:x.coneOuterGain,distanceModel:x.distanceModel,maxDistance:x.maxDistance,panningModel:x.panningModel,refDistance:x.refDistance,rolloffFactor:x.rolloffFactor},v=nt(x,y);if("bufferSize"in x)_=s(y,{...f,gain:1});else if(!v){const k={...p,orientationX:x.orientationX.value,orientationY:x.orientationY.value,orientationZ:x.orientationZ.value,positionX:x.positionX.value,positionY:x.positionY.value,positionZ:x.positionZ.value};x=r(y,k)}if(u.set(y,_===null?x:_),_!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new o(6,g.context.length,y.sampleRate),A=e(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});A.connect(D.destination),h=(async()=>{const P=await Promise.all([g.orientationX,g.orientationY,g.orientationZ,g.positionX,g.positionY,g.positionZ].map(async(j,$)=>{const q=n(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$===0?1:0});return await a(D,j,q.offset),q}));for(let j=0;j<6;j+=1)P[j].connect(A,0,j),P[j].start(0);return c(D)})()}const k=await h,w=s(y,{...f,gain:1});await l(g,y,w);const S=[];for(let D=0;D<k.numberOfChannels;D+=1)S.push(k.getChannelData(D));let E=[S[0][0],S[1][0],S[2][0]],T=[S[3][0],S[4][0],S[5][0]],b=s(y,{...f,gain:1}),C=r(y,{...p,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:T[0],positionY:T[1],positionZ:T[2]});w.connect(b).connect(C.inputs[0]),C.connect(_);for(let D=128;D<k.length;D+=128){const A=[S[0][D],S[1][D],S[2][D]],P=[S[3][D],S[4][D],S[5][D]];if(A.some((j,$)=>j!==E[$])||P.some((j,$)=>j!==T[$])){E=A,T=P;const j=D/y.sampleRate;b.gain.setValueAtTime(0,j),b=s(y,{...f,gain:0}),C=r(y,{...p,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),b.gain.setValueAtTime(1,j),w.connect(b).connect(C.inputs[0]),C.connect(_)}}return _}return v?(await t(y,g.orientationX,x.orientationX),await t(y,g.orientationY,x.orientationY),await t(y,g.orientationZ,x.orientationZ),await t(y,g.positionX,x.positionX),await t(y,g.positionY,x.positionY),await t(y,g.positionZ,x.positionZ)):(await a(y,g.orientationX,x.orientationX),await a(y,g.orientationY,x.orientationY),await a(y,g.orientationZ,x.orientationZ),await a(y,g.positionX,x.positionX),await a(y,g.positionY,x.positionY),await a(y,g.positionZ,x.positionZ)),Br(x)?await l(g,y,x.inputs[0]):await l(g,y,x),x};return{render(g,y){const _=u.get(y);return _!==void 0?Promise.resolve(_):d(g,y)}}},ak={disableNormalization:!1},lk=(t,e,n,s)=>class Ng{constructor(i,o){const a=e(i),l=s({...ak,...o}),c=t(a,l);return n.add(c),c}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Ng.prototype||n.has(i)}},ck=(t,e)=>(n,s,r)=>(t(s).replay(r),e(s,n,r)),uk=(t,e,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([c,u])=>{const d=await e(c).render(c,r),g=s.context.destination;!n(c)&&(s!==g||!n(s))&&d.connect(i,u,l)})).reduce((a,l)=>[...a,...l],[]))},hk=(t,e,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const u=await t(a).render(a,r);n(a)||u.connect(i,l)}))},dk=(t,e,n,s)=>r=>t(Pi,()=>Pi(r))?Promise.resolve(t(s,s)).then(i=>{if(!i){const o=n(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),pk=t=>(e,n)=>{t.set(e,n)},fk=t=>(e,n)=>t.set(e,n),mk=(t,e,n,s,r,i,o,a)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(s(c)).map(u=>n(u).render(u,c)))).then(()=>r(c)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),mh(u)):e(i,()=>i(u))||a(u),t.add(u),u)),gk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},yk=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=r(a),u={...gk,...l},h=n(c,u),d=i(c),g=d?s():null;super(a,!1,h,g),this._pan=e(this,d,h.pan)}get pan(){return this._pan}},vk=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=nt(c,l);if(!u){const h={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,h)}return i.set(l,c),u?await t(l,a.pan,c.pan):await s(l,a.pan,c.pan),Br(c)?await r(a,l,c.inputs[0]):await r(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},_k=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},xk=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new t(s,"a",{numberOfOutputs:0}),l=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await s.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},wk=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{s.disconnect(),r(n.currentTime!==0)},n.startRendering()})},kk=()=>new DOMException("","UnknownError"),Tk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Sk=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),h={...Tk,...c},d=n(u,h),y=i(u)?s():null;super(l,!0,d,y),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},Ek=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!nt(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,c)}return s.set(o,a),Br(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Ck=()=>typeof window>"u"?null:window,Nk=(t,e)=>n=>{n.copyFromChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<l&&h<u;h+=1)s[h]=c[h+o]},n.copyToChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=s.length;for(let h=o<0?-o:0;h+o<l&&h<u;h+=1)c[h+o]=s[h]}},bk=t=>e=>{e.copyFromChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyToChannel)},Ak=t=>(e,n)=>{const s=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),t(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},Dk=(t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=n.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let l=0;l<a;l+=1)r.connect(s,0,l)},()=>r.disconnect(s))},bg=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),Ag=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},uo=(t,e,n,s)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(i),set:s(o)})},Ik=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),Mk=t=>({...t,channelCount:t.numberOfOutputs}),Ok=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},Dg=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(s.code!==9)throw s;Dg(t,e,n+1e-7)}},Rk=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Pk=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},jk=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},xh=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Ig=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},wh=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},Fk=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},Vk=t=>{t.start=(e=>(n=0,s=0,r)=>{const i=t.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)})(t.start)},Mg=(t,e)=>{const n=e.createGain();t.connect(n);const s=(r=>()=>{r.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),qr(t,n),t.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else r.call(t,o),i=!0}})(t.stop)},zr=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},Lk=i1(Ws),Bk=h1(Ws),qk=Tx(kl),Og=new WeakMap,zk=qx(Og),Zt=J1(new Map,new WeakMap),un=Ck(),Rg=yw(Zt,dn),kh=Bx(it),Ke=uk(it,kh,Fs),Uk=g1(Rg,me,Ke),de=Wx(wl),Rn=Ww(un),ue=aw(Rn),Pg=new WeakMap,jg=Ox(zr),ho=ww(un),Th=sw(ho),Sh=rw(un),Fg=iw(un),ji=Tw(un),Oe=q1(o1(ug),u1(Lk,Bk,Ma,qk,Oa,it,zk,ro,me,Ws,Tn,Fs,Xo),Zt,Zx(cu,Oa,it,me,Ri,Tn),dn,Tl,ut,_x(Ma,cu,it,me,Ri,de,Tn,ue),Cx(Pg,it,Qt),jg,de,Th,Sh,Fg,ue,ji),Wk=m1(Oe,Uk,dn,Rg,de,ue),Eh=new WeakSet,wp=vw(un),Vg=dx(new Uint32Array(1)),Ch=Nk(Vg,dn),Nh=bk(Vg),Lg=v1(Eh,Zt,ut,wp,Rn,_k(wp),Ch,Nh),Sl=d1(vt),Bg=hk(kh,oo,Fs),pn=ox(Bg),Ur=xw(Sl,Zt,Rk,Pk,jk,xh,Ig,wh,Vk,Ak(uo),Mg),fn=ck(zx(oo),Bg),Gk=w1(pn,Ur,me,fn,Ke),Jt=z1(a1(hg),Pg,fh,U1,J_,e1,t1,n1,s1,ou,lg,ho,Dg),$k=x1(Oe,Gk,Jt,Ge,Ur,de,ue,zr),Hk=D1(Oe,I1,dn,Ge,kw(vt,uo),de,ue,Ke),Yk=Z1(pn,Eg,me,fn,Ke),Gs=fk(Og),Qk=X1(Oe,Jt,Yk,Tl,Eg,de,ue,Gs),ps=mw(Ws,Sh),Kk=Dk(Ge,ps),fs=Dw(ho,Kk),Xk=nx(fs,me,Ke),Zk=tx(Oe,Xk,fs,de,ue),Jk=ix(lo,me,Ke),eT=rx(Oe,Jk,lo,de,ue,Mk),tT=Ow(Sl,Ur,vt,ps),Wr=Mw(Sl,Zt,tT,xh,wh),nT=hx(pn,Wr,me,fn,Ke),sT=ux(Oe,Jt,nT,Wr,de,ue,zr),qg=Rw(ut,uo),rT=mx(qg,me,Ke),iT=fx(Oe,rT,qg,de,ue,Gs),oT=kx(pn,Cg,me,fn,Ke),aT=wx(Oe,Jt,oT,Cg,de,ue,Gs),zg=Pw(ut),lT=Dx(pn,zg,me,fn,Ke),cT=Ax(Oe,Jt,lT,zg,ut,de,ue,Gs),uT=Vx(pn,vt,me,fn,Ke),hT=Fx(Oe,Jt,uT,vt,de,ue),dT=Lw(Tl,Ge,co,ut),El=dk(Zt,vt,co,wk(vt,Rn)),pT=Xx(Ur,me,Rn,Ke,El),fT=jw(dT),mT=Qx(Oe,fT,pT,de,ue,Gs),gT=M1(Jt,fs,Wr,co,ut,bg,ue,uo),Ug=new WeakMap,yT=fw(Hk,gT,jg,ue,Ug,zr),Wg=Gw(Sl,Zt,xh,Ig,wh,Mg),vT=sk(pn,Wg,me,fn,Ke),_T=nk(Oe,Jt,Wg,vT,de,ue,zr),Gg=lx(Ur),xT=Zw(Gg,Ge,vt,Ag,ps),Cl=Xw(Gg,Ge,xT,Ag,ps,ho,uo),wT=Hw(Ma,Ge,fs,vt,co,Cl,ut,Oa,bg,ps),$g=$w(wT),kT=ok(pn,fs,Wr,vt,$g,me,Rn,fn,Ke,El),TT=ik(Oe,Jt,$g,kT,de,ue,Gs),ST=Yw(dn),ET=lk(ST,de,new WeakSet,Ok),CT=Kw(fs,lo,vt,Cl,ut,ps),Hg=Qw(CT,ut),NT=vk(pn,Hg,me,fn,Ke),bT=yk(Oe,Jt,Hg,NT,de,ue),AT=Ek(Cl,me,Ke),DT=Sk(Oe,Ge,Cl,AT,de,ue,Gs),Yg=lw(un),bh=Rx(un),Qg=new WeakMap,IT=Gx(Qg,Rn),MT=Yg?c1(Zt,ut,Mx(un),bh,Px(r1),de,IT,ue,ji,new WeakMap,new WeakMap,xk(ji,Rn),un):void 0,OT=ow(Th,ue),RT=vx(Eh,Zt,yx,Ix,new WeakSet,de,OT,Da,Pi,Ch,Nh),Kg=Q1(MT,Wk,Lg,$k,Qk,Zk,eT,sT,iT,RT,aT,cT,hT,mT,yT,_T,TT,ET,bT,DT),PT=cw(Oe,Bw,de,ue),jT=hw(Oe,qw,de,ue),FT=dw(Oe,zw,de,ue),VT=Uw(Ge,ue),LT=pw(Oe,VT,de),BT=A1(Kg,Ge,ut,kk,PT,jT,FT,LT,ho),Ah=$x(Ug),qT=p1(Ah),Xg=ax(dn),zT=Sx(Ah),Zg=Nx(dn),Jg=new WeakMap,UT=Lx(Jg,Qt),WT=Aw(Xg,dn,Ge,fs,lo,Wr,vt,co,ut,Zg,bh,UT,ps),GT=Ew(Ge,WT,vt,ut,ps),$T=Y1(pn,Xg,Ur,fs,lo,Wr,vt,zT,Zg,bh,me,ji,Rn,fn,Ke,El),HT=Ux(Qg),YT=pk(Jg),kp=Yg?G1(qT,Oe,Jt,$T,GT,it,HT,de,ue,ji,Ik,YT,Fk,zr):void 0,QT=gx(ut,Rn),KT=mk(Eh,Zt,kh,Ah,El,Da,Ch,Nh),XT=ek(Kg,Zt,Ge,QT,KT),ZT=Jx(wl,Th),JT=ew(ph,Sh),eS=tw(fh,Fg),tS=nw(wl,ue);function St(t){return t===void 0}function X(t){return t!==void 0}function nS(t){return typeof t=="function"}function Kt(t){return typeof t=="number"}function ns(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function e0(t){return typeof t=="boolean"}function yt(t){return Array.isArray(t)}function Dn(t){return typeof t=="string"}function jo(t){return Dn(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function W(t,e){if(!t)throw new Error(e)}function Xt(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function t0(t){!t.isOffline&&t.state!=="running"&&Nl('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let n0=!1,Tp=!1;function Sp(t){n0=t}function sS(t){St(t)&&n0&&!Tp&&(Tp=!0,Nl("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let s0=console;function rS(...t){s0.log(...t)}function Nl(...t){s0.warn(...t)}function iS(t){return new BT(t)}function oS(t,e,n){return new XT(t,e,n)}const Sn=typeof self=="object"?self:null,aS=Sn&&(Sn.hasOwnProperty("AudioContext")||Sn.hasOwnProperty("webkitAudioContext"));function lS(t,e,n){return W(X(kp),"This node only works in a secure context (https or localhost)"),new kp(t,e,n)}function en(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function xe(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(h){o(h)}}function l(u){try{c(s.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(t,e||[])).next())})}class cS{constructor(e,n,s,r){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Vs(t){return eS(t)}function ss(t){return JT(t)}function Zo(t){return tS(t)}function Xs(t){return ZT(t)}function uS(t){return t instanceof Lg}function hS(t,e){return t==="value"||Vs(e)||ss(e)||uS(e)}function En(t,...e){if(!e.length)return t;const n=e.shift();if(ns(t)&&ns(n))for(const s in n)hS(s,n[s])?t[s]=n[s]:ns(n[s])?(t[s]||Object.assign(t,{[s]:{}}),En(t[s],n[s])):Object.assign(t,{[s]:n[s]});return En(t,...e)}function dS(t,e){return t.length===e.length&&t.every((n,s)=>e[s]===n)}function N(t,e,n=[],s){const r={},i=Array.from(e);if(ns(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(En(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())),i.length===1&&ns(i[0]))En(r,i[0]);else for(let o=0;o<n.length;o++)X(i[o])&&(r[n[o]]=i[o]);return En(t,r)}function pS(t){return t.constructor.getDefaults()}function cn(t,e){return St(t)?e:t}function rn(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */let Pn=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Sn&&this.toString()===Sn.TONE_DEBUG_CLASS)&&rS(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};Pn.version=ag;const Dh=1e-6;function Dr(t,e){return t>e+Dh}function fu(t,e){return Dr(t,e)||zt(t,e)}function Fa(t,e){return t+Dh<e}function zt(t,e){return Math.abs(t-e)<Dh}function fS(t,e,n){return Math.max(Math.min(t,n),e)}class Rt extends Pn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=N(Rt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(W(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];W(fu(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const s=this._search(e,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const s=this._search(e,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(zt(this._timeline[n].time,e)){for(let s=n;s>=0&&zt(this._timeline[s].time,e);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&fu(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][n]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],l=this._timeline[o+1];if(zt(a[n],e)){for(let c=o;c<this._timeline.length;c++){const u=this._timeline[c];if(zt(u[n],e))o=c;else break}return o}else{if(Fa(a[n],e)&&Dr(l[n],e))return o;Dr(a[n],e)?i=o:s=o+1}}return-1}_iterate(e,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const s=this._search(e);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(e,n){const s=this._search(e);return this._iterate(n,s+1),this}forEachBetween(e,n,s){let r=this._search(e),i=this._search(n);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===n&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,n){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(n,s+1),this}forEachAtTime(e,n){const s=this._search(e);if(s!==-1&&zt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&zt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{n(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const r0=[];function bl(t){r0.push(t)}function mS(t){r0.forEach(e=>e(t))}const i0=[];function Al(t){i0.push(t)}function gS(t){i0.forEach(e=>e(t))}class po extends Pn{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(r=>{St(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(e,n){const s=(...r)=>{n(...r),this.off(e,s)};return this.on(e,s),this}off(e,n){return e.split(/\W+/).forEach(r=>{if(St(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(St(n))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(po.prototype,n);Object.defineProperty(e.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class o0 extends po{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class fo extends o0{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Rt,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=N(fo.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=iS({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new cS(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(mS(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,s){return this._context.createBuffer(e,n,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,s){return this._context.createPeriodicWave(e,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return W(Xs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return W(Xs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return W(Xs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){W(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){W(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){W(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){W(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return lS(this.rawContext,e,n)}addAudioWorkletModule(e){return xe(this,void 0,void 0,function*(){W(X(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return xe(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Xs(this._context)?this._context.resume():Promise.resolve()}close(){return xe(this,void 0,void 0,function*(){Xs(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&gS(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+n})};return r(),s}}class yS extends o0{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return xe(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function re(t,e){yt(e)?e.forEach(n=>re(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Ih(t,e){yt(e)?e.forEach(n=>Ih(t,n)):Object.defineProperty(t,e,{writable:!0})}const ne=()=>{};class ce extends Pn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ne;const e=N(ce.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Dn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:ne,onload:ne,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Wt().sampleRate}set(e){return e instanceof ce?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return xe(this,void 0,void 0,function*(){const n=ce.load(e).then(s=>{this.set(s),this.onload(this)});ce.downloads.push(n);try{yield n}finally{const s=ce.downloads.indexOf(n);ce.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=yt(e)&&e[0].length>0,s=n?e.length:1,r=n?e[0].length:e.length,i=Wt(),o=i.createBuffer(s,r,i.sampleRate),a=!n&&s===1?[e]:e;for(let l=0;l<s;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(Kt(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(r=>r/s),this.fromArray(n)}return this}toArray(e){if(Kt(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){W(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(n*this.sampleRate);W(s<r,"The start time must be less than the end time");const i=r-s,o=Wt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new ce(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ce().fromArray(e)}static fromUrl(e){return xe(this,void 0,void 0,function*(){return yield new ce().load(e)})}static load(e){return xe(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const l=n[1].split("|");let c=l[0];for(const u of l)if(ce.supportsType(u)){c=u;break}e=e.replace(n[0],c)}const s=ce.baseUrl===""||ce.baseUrl.endsWith("/")?ce.baseUrl:ce.baseUrl+"/",r=document.createElement("a");r.href=s+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield Wt().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return xe(this,void 0,void 0,function*(){for(yield Promise.resolve();ce.downloads.length;)yield ce.downloads[0]})}}ce.baseUrl="";ce.downloads=[];class Dl extends fo{constructor(){super({clockSource:"offline",context:Zo(arguments[0])?arguments[0]:oS(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Zo(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Zo(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return xe(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);e&&n%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return xe(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new ce(n)})}close(){return Promise.resolve()}}const a0=new yS;let Ss=a0;function Wt(){return Ss===a0&&aS&&vS(new fo),Ss}function vS(t,e=!1){e&&Ss.dispose(),Xs(t)?Ss=new fo(t):Zo(t)?Ss=new Dl(t):Ss=t}function lc(){return Ss.resume()}if(Sn&&!Sn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${ag} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function _S(t){return Math.pow(10,t/20)}function xS(t){return 20*(Math.log(t)/Math.LN10)}function l0(t){return Math.pow(2,t/12)}let Il=440;function wS(){return Il}function kS(t){Il=t}function Es(t){return Math.round(c0(t))}function c0(t){return 69+12*Math.log2(t/Il)}function u0(t){return Il*Math.pow(2,(t-69)/12)}class Mh extends Pn{constructor(e,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const s=parseInt(e,10),r=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Mh&&this.fromType(this._val),St(this._val))return this._noArg();if(Dn(this._val)&&St(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(ns(this._val)){let e=0;for(const n in this._val)if(X(this._val[n])){const s=this._val[n],r=new this.constructor(this.context,n).valueOf()*s;e+=r}return e}if(X(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Dn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Gt extends Mh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Gt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let s=n[0],r=new Gt(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new Gt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,n,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Es(this.toFrequency())}_now(){return this.context.now()}}class kt extends Gt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return wS()}static set A4(e){kS(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:kt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const r=TS[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:kt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new kt(this.context,this.valueOf()*l0(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Es(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/kt.A4);let s=Math.round(12*n)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),SS[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return u0(e)}static ftom(e){return Es(e)}}const TS={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},SS=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class vr extends Gt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class et extends Pn{constructor(){super();const e=N(et.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Wt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return sS(e),new Gt(this.context,e).toSeconds()}toFrequency(e){return new kt(this.context,e).toFrequency()}toTicks(e){return new vr(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(s=>{St(e[s])&&delete n[s]}),n}get(){const e=pS(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];X(s)&&X(s.value)&&X(s.setValueAtTime)?e[n]=s.value:s instanceof et?e[n]=s._getPartialProperties(e[n]):yt(s)||Kt(s)||Dn(s)||e0(s)?e[n]=s:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&X(this[n])&&(this[n]&&X(this[n].value)&&X(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof et?this[n].set(e[n]):this[n]=e[n])}),this}}class mo extends Rt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,s){return Xt(n,0),this.add(Object.assign({},s,{state:e,time:n})),this}getLastState(e,n){const s=this._search(n);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,n){const s=this._search(n);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class oe extends et{constructor(){super(N(oe.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=N(oe.getDefaults(),arguments,["param","units","convert"]);for(W(X(e.param)&&(Vs(e.param)||e.param instanceof oe),"param must be an AudioParam");!Vs(e.param);)e.param=e.param._param;this._swappable=X(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Rt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,X(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(et.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return X(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return X(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return X(this.maxValue)&&X(this.minValue)&&Xt(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?_S(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?xS(e):e}setValueAtTime(e,n){const s=this.toSeconds(n),r=this._fromType(e);return W(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),s=this._events.getAfter(n),r=this._events.get(n);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,n))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,n):i=this._exponentialInterpolate(r.time,o,s.time,s.value,n)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const s=this._fromType(e),r=this.toSeconds(n);return W(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,n){let s=this._fromType(e);s=zt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(n);return W(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(n)),this}linearRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(n)),this}targetRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,n),this}exponentialApproachValueAtTime(e,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,n,r),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(e,n+s),this}setTargetAtTime(e,n,s){const r=this._fromType(e);W(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(r),W(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,n,s,r=1){s=this.toSeconds(s),n=this.toSeconds(n);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),n);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(l),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return W(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),s=this._fromType(this.getValueAtTime(n));W(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const r=this._events.get(n),i=this._events.getAfter(n);return r&&zt(r.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(e,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,s):this.linearRampTo(e,n,s),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){W(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,s,r,i){return s+(n-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,n,s,r,i){return n+(r-n)*((i-e)/(s-e))}_exponentialInterpolate(e,n,s,r,i){return n*Math.pow(r/n,(i-e)/(s-e))}}class B extends et{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return X(this.input)?Vs(this.input)||this.input instanceof oe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return X(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return X(e)&&(e instanceof B||ss(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();W(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,s=0){return hn(this,e,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Nl("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,s=0){return ES(this,e,n,s),this}chain(...e){return os(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),X(this.input)&&(this.input instanceof B?this.input.dispose():ss(this.input)&&this.input.disconnect()),X(this.output)&&(this.output instanceof B?this.output.dispose():ss(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function os(...t){const e=t.shift();t.reduce((n,s)=>(n instanceof B?n.connect(s):ss(n)&&hn(n,s),s),e)}function hn(t,e,n=0,s=0){for(W(X(t),"Cannot connect from undefined node"),W(X(e),"Cannot connect to undefined node"),(e instanceof B||ss(e))&&W(e.numberOfInputs>0,"Cannot connect to node with no inputs"),W(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof B||e instanceof oe;)X(e.input)&&(e=e.input);for(;t instanceof B;)X(t.output)&&(t=t.output);Vs(e)?t.connect(e,n):t.connect(e,n,s)}function ES(t,e,n=0,s=0){if(X(e))for(;e instanceof B;)e=e.input;for(;!ss(t);)X(t.output)&&(t=t.output);Vs(e)?t.disconnect(e,n):ss(e)?t.disconnect(e,n,s):t.disconnect()}class J extends B{constructor(){super(N(J.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=N(J.getDefaults(),arguments,["gain","units"]);this.gain=new oe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),re(this,"gain")}static getDefaults(){return Object.assign(B.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ir extends B{constructor(e){super(e),this.onended=ne,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new J({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(B.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ne})}_startGain(e,n=1){W(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+s):this._gainNode.gain.exponentialApproachValueAtTime(n,e,s)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){W(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ne&&(this.onended(this),this.onended=ne,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),W(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ne,this}}class Va extends Ir{constructor(){super(N(Va.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=N(Va.getDefaults(),arguments,["offset"]);hn(this._source,this._gainNode),this.offset=new oe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Ir.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ae extends B{constructor(){super(N(ae.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=N(ae.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Va({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(B.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,s=0){return Oh(this,e,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,s){return this._param.exponentialRampTo(e,n,s),this}linearRampTo(e,n,s){return this._param.linearRampTo(e,n,s),this}targetRampTo(e,n,s){return this._param.targetRampTo(e,n,s),this}exponentialApproachValueAtTime(e,n,s){return this._param.exponentialApproachValueAtTime(e,n,s),this}setTargetAtTime(e,n,s){return this._param.setTargetAtTime(e,n,s),this}setValueCurveAtTime(e,n,s,r){return this._param.setValueCurveAtTime(e,n,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,s){return this._param.rampTo(e,n,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Oh(t,e,n,s){(e instanceof oe||Vs(e)||e instanceof ae&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ae&&(e.overridden=!0)),hn(t,e,n,s)}class La extends oe{constructor(){super(N(La.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Rt(1/0),this._multiplier=1;const e=N(La.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(oe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,s){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const l=s*a+n,c=this._exponentialApproach(i.time,i.value,r,s,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,n){const s=this.toSeconds(n);super.setValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const s=this._fromType(e),r=this._events.get(n),i=Math.round(Math.max((n-r.time)*10,1)),o=(n-r.time)/i;for(let a=0;a<=i;a++){const l=o*a+r.time,c=this._exponentialInterpolate(r.time,r.value,n,s,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(St(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const n=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const r=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*o*(n.ticks-e)),l=(-r+a)/o,c=(-r-a)/o;return(l>0?l:c)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const s=this.toSeconds(n),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class Ba extends ae{constructor(){super(N(Ba.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=N(Ba.getDefaults(),arguments,["value"]);this.input=this._param=new La({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ae.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class qa extends et{constructor(){super(N(qa.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new mo,this._tickOffset=new Rt,this._ticksAtTime=new Rt,this._secondsAtTime=new Rt;const e=N(qa.getDefaults(),arguments,["frequency"]);this.frequency=new Ba({context:this.context,units:e.units,value:e.frequency}),re(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},et.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),X(n)&&this.setTicksAtTime(n,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),s=this._state.getLastState("stopped",n),r=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=r||s,a=r?r.ticks:0,l=null;return this._state.forEachBetween(o.time,n+this.sampleTime,c=>{let u=o.time;const h=this._tickOffset.get(c.time);h&&h.time>=o.time&&(a=h.ticks,u=h.time),o.state==="started"&&c.state!=="started"&&(a+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(u),c.time!==i.time&&(l={state:c.state,time:c.time,ticks:a})),o=c}),this._state.remove(i),l&&this._ticksAtTime.add(l),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),s=this.frequency.timeToTicks(e,n);this.setTicksAtTime(s,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||n,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,l=>{let c=i.time;const u=this._tickOffset.get(l.time);u&&u.time>=i.time&&(o=u.seconds,c=u.time),i.state==="started"&&l.state!=="started"&&(o+=l.time-c,l.time!==s.time&&(a={state:l.state,time:l.time,seconds:o})),i=l}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const s=this._tickOffset.get(n),r=this._state.get(n),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,s){let r=this._state.get(e);this._state.forEachBetween(e,n,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(r.time),c=a-l;let u=Math.ceil(c)-c;u=zt(u,1)?0:u;let h=this.frequency.getTimeOfTick(a+u);for(;h<n;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Fi extends et{constructor(){super(N(Fi.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ne,this._lastUpdate=0,this._state=new mo("stopped"),this._boundLoop=this._loop.bind(this);const e=N(Fi.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new qa({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,re(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(et.getDefaults(),{callback:ne,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){t0(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,n,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}po.mixin(Fi);class _r extends B{constructor(){super(N(_r.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const e=N(_r.getDefaults(),arguments,["delayTime","maxDelay"]),n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new oe({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),re(this,"delayTime")}static getDefaults(){return Object.assign(B.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Rh extends Pn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=N(Rh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const s=e.urls[n];this.add(n,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ne,onload:ne,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return W(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,s=ne,r=ne){return Dn(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new ce(this.baseUrl+n,s,r))):this._buffers.set(e.toString(),new ce(n,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class za extends kt{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Es(super._frequencyToUnits(e))}_ticksToUnits(e){return Es(super._ticksToUnits(e))}_beatsToUnits(e){return Es(super._beatsToUnits(e))}_secondsToUnits(e){return Es(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return u0(this.toMidi())}transpose(e){return new za(this.context,this.toMidi()+e)}}class Ve extends vr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class CS extends et{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Rt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}bl(t=>{t.draw=new CS({context:t})});Al(t=>{t.draw.dispose()});class NS extends Pn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){W(X(e.time),"Events must have a time property"),W(X(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new bS(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const s of n)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let s,r=null;if(n>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const n=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(e){const n=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let s=n[0];for(let r=1;r<n.length;r++)n[r].low>s.low&&(s=n[r]);return s.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(e,n){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class bS{constructor(e,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ls extends B{constructor(){super(N(Ls.getDefaults(),arguments,["volume"])),this.name="Volume";const e=N(Ls.getDefaults(),arguments,["volume"]);this.input=this.output=new J({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,re(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(B.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ua extends B{constructor(){super(N(Ua.getDefaults(),arguments)),this.name="Destination",this.input=new Ls({context:this.context}),this.output=new J({context:this.context}),this.volume=this.input.volume;const e=N(Ua.getDefaults(),arguments);os(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(B.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),os(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}bl(t=>{t.destination=new Ua({context:t})});Al(t=>{t.destination.dispose()});class AS extends Pn{constructor(e){super(),this.name="TimelineValue",this._timeline=new Rt({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class In extends B{constructor(){super(Object.assign(N(In.getDefaults(),arguments,["context"])))}connect(e,n=0,s=0){return Oh(this,e,n,s),this}}class as extends In{constructor(){super(Object.assign(N(as.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=N(as.getDefaults(),arguments,["mapping","length"]);yt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):nS(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ae.getDefaults(),{length:1024})}setMap(e,n=1024){const s=new Float32Array(n);for(let r=0,i=n;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(s=>s.includes(e));W(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Vi extends In{constructor(){super(Object.assign(N(Vi.getDefaults(),arguments,["value"]))),this.name="Pow";const e=N(Vi.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new as({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(In.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ls{constructor(e,n){this.id=ls._eventId++,this._remainderTime=0;const s=Object.assign(ls.getDefaults(),n);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:ne,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}ls._eventId=0;class Ph extends ls{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Ph.getDefaults(),n);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ls.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Fa(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Ve(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Fa(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ve(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);Dr(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Li extends et{constructor(){super(N(Li.getDefaults(),arguments)),this.name="Transport",this._loop=new AS(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Rt,this._repeatedEvents=new NS,this._syncedSignals=[],this._swingAmount=0;const e=N(Li.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Fi({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),re(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(et.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Ve(this.context,this._swingTicks*2/3).toSeconds()*r}Sp(!0),this._timeline.forEachAtTime(n,s=>s.invoke(e)),Sp(!1)}schedule(e,n){const s=new ls(this,{callback:e,time:new vr(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,n,s,r=1/0){const i=new Ph(this,{callback:e,duration:new Gt(this.context,r).toTicks(),interval:new Gt(this.context,n).toTicks(),time:new vr(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const s=new ls(this,{callback:e,once:!0,time:new vr(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Ve(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let s;return X(n)&&(s=this.toTicks(n)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){yt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Gt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Gt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Ve(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new Ve(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),s=this._clock.frequency.timeToTicks(e,n);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),i=n+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),r=e-s%e;return this._clock.nextTickTime(r,n)}}syncSignal(e,n){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(e.units==="time"){const l=.015625/i,c=new J(l),u=new Vi(-1),h=new J(l);r.chain(c,u,h),r=h,i=1/i,o=[c,u,h]}n||(e.getValueAtTime(s)!==0?n=e.getValueAtTime(s)/i:n=0);const a=new J(n);return r.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===e&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ih(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}po.mixin(Li);bl(t=>{t.transport=new Li({context:t})});Al(t=>{t.transport.dispose()});class Qe extends B{constructor(e){super(e),this.input=void 0,this._state=new mo("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ne,this._syncedStop=ne,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ls({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,re(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(B.getDefaults(),{mute:!1,onstop:ne,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,s){let r=St(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")W(Dr(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(cn(n,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else t0(this.context),this._start(r,n,s);return this}stop(e){let n=St(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||X(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Dr(n,0)){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const r=n-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ne,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Mr extends Ir{constructor(){super(N(Mr.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=N(Mr.getDefaults(),arguments,["url","onload"]);hn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new oe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ce(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ir.getDefaults(),{url:new ce,loop:!1,loopEnd:0,loopStart:0,onload:ne,onerror:ne,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,s,r=1){W(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?n=cn(n,this.loopStart):n=cn(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=a-l;fu(o,a)&&(o=(o-l)%c+l),zt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Fa(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),X(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class cs extends Qe{constructor(){super(N(cs.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const e=N(cs.getDefaults(),arguments,["type"]);this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Qe.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(W(e in Ep,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Ep[this._type];this._source=new Mr({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Ks=44100*5,cc=2,mn={brown:null,pink:null,white:null},Ep={get brown(){if(!mn.brown){const t=[];for(let e=0;e<cc;e++){const n=new Float32Array(Ks);t[e]=n;let s=0;for(let r=0;r<Ks;r++){const i=Math.random()*2-1;n[r]=(s+.02*i)/1.02,s=n[r],n[r]*=3.5}}mn.brown=new ce().fromArray(t)}return mn.brown},get pink(){if(!mn.pink){const t=[];for(let e=0;e<cc;e++){const n=new Float32Array(Ks);t[e]=n;let s,r,i,o,a,l,c;s=r=i=o=a=l=c=0;for(let u=0;u<Ks;u++){const h=Math.random()*2-1;s=.99886*s+h*.0555179,r=.99332*r+h*.0750759,i=.969*i+h*.153852,o=.8665*o+h*.3104856,a=.55*a+h*.5329522,l=-.7616*l-h*.016898,n[u]=s+r+i+o+a+l+c+h*.5362,n[u]*=.11,c=h*.115926}}mn.pink=new ce().fromArray(t)}return mn.pink},get white(){if(!mn.white){const t=[];for(let e=0;e<cc;e++){const n=new Float32Array(Ks);t[e]=n;for(let s=0;s<Ks;s++)n[s]=Math.random()*2-1}mn.white=new ce().fromArray(t)}return mn.white}};function $s(t,e){return xe(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,s=new Dl(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Wa extends Ir{constructor(){super(N(Wa.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=N(Wa.getDefaults(),arguments,["frequency","type"]);hn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new oe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new oe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),re(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ir.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ie extends Qe{constructor(){super(N(Ie.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=N(Ie.getDefaults(),arguments,["frequency","type"]);this.frequency=new ae({context:this.context,units:"frequency",value:e.frequency}),re(this,"frequency"),this.detune=new ae({context:this.context,units:"cents",value:e.detune}),re(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Qe.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),s=new Wa({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ie._periodicWaveCache.find(n=>n.phase===this._phase&&dS(n.partials,this._partials));{const e=Ie._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(X(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ie._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ie._periodicWaveCache.length>100&&Ie._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Xt(e,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,n){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let l=1;l<r;++l){const c=2/(l*Math.PI);let u;switch(e){case"sine":u=l<=a?1:0,this._partials[l-1]=u;break;case"square":u=l&1?2*c:0,this._partials[l-1]=u;break;case"sawtooth":u=c*(l&1?1:-1),this._partials[l-1]=u;break;case"triangle":l&1?u=2*(c*c)*(l-1>>1&1?-1:1):u=0,this._partials[l-1]=u;break;case"custom":u=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[l]=-u*Math.sin(n*l),o[l]=u*Math.cos(n*l)):(i[l]=0,o[l]=0)}return[i,o]}_inverseFFT(e,n,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+n[o]*Math.sin(o*s);return r}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,n,o/i*r),s);return fS(-this._inverseFFT(e,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return xe(this,void 0,void 0,function*(){return $s(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ie._periodicWaveCache=[];class DS extends In{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new as({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Mn extends ae{constructor(){super(Object.assign(N(Mn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=N(Mn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new J({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ae.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Bi extends Qe{constructor(){super(N(Bi.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new DS({context:this.context}),this._modulationNode=new J({context:this.context});const e=N(Bi.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ie({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ie({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Mn({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),re(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return xe(this,void 0,void 0,function*(){return $s(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Or extends Qe{constructor(){super(N(Or.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new J({context:this.context,gain:0});const e=N(Or.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Ie({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ae({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ie({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Mn({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Mn({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),re(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return xe(this,void 0,void 0,function*(){return $s(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Rr extends Qe{constructor(){super(N(Rr.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new J({context:this.context,gain:0}),this._thresh=new as({context:this.context,mapping:n=>n<=0?-1:1});const e=N(Rr.getDefaults(),arguments,["frequency","width"]);this.width=new ae({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ie({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),re(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Qe.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return xe(this,void 0,void 0,function*(){return $s(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class qi extends Qe{constructor(){super(N(qi.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=N(qi.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new ae({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ae({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,re(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ie.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=n+s*i)}}get count(){return this._oscillators.length}set count(e){if(Xt(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const s=new Ie({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):ne});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return xe(this,void 0,void 0,function*(){return $s(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class zi extends Qe{constructor(){super(N(zi.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Mn({context:this.context,value:2});const e=N(zi.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Rr({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ie({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),re(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Qe.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return xe(this,void 0,void 0,function*(){return $s(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Cp={am:Bi,fat:qi,fm:Or,oscillator:Ie,pulse:Rr,pwm:zi};class Bs extends Qe{constructor(){super(N(Bs.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=N(Bs.getDefaults(),arguments,["frequency","type"]);this.frequency=new ae({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ae({context:this.context,units:"cents",value:e.detune}),re(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ie.getDefaults(),Or.getDefaults(),Bi.getDefaults(),qi.getDefaults(),Rr.getDefaults(),zi.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=Cp[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof Cp[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Kt(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Kt(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Dn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return xe(this,void 0,void 0,function*(){return $s(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class jh extends ae{constructor(){super(Object.assign(N(jh.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new J({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,os(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ae.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Ui extends In{constructor(){super(Object.assign(N(Ui.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=N(Ui.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Mn({context:this.context,value:e.max-e.min}),this._add=this.output=new jh({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(In.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function h0(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Xt(i,t,e),n.set(this,i)}})}}function jn(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Xt(this.toSeconds(i),t,e),n.set(this,i)}})}}class Wi extends Qe{constructor(){super(N(Wi.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=N(Wi.getDefaults(),arguments,["url","onload"]);this._buffer=new ce({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Qe.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ne,onerror:ne,playbackRate:1,reverse:!1})}load(e){return xe(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ne){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,s){return super.start(e,n,s),this}_start(e,n,s){this._loop?n=cn(n,this._loopStart):n=cn(n,0);const r=this.toSeconds(n),i=s;s=cn(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Mr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&St(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(n))}restart(e,n,s){return super.restart(e,n,s),this}_restart(e,n,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,n,s)}seek(e,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Xt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Xt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}en([jn(0)],Wi.prototype,"fadeIn",void 0);en([jn(0)],Wi.prototype,"fadeOut",void 0);class IS extends In{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new as({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class at extends B{constructor(){super(N(at.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new ae({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=N(at.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(B.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Dn(e))return e;{let s;for(s in Fo)if(Fo[s][n]===e)return s;return e}}_setCurve(e,n,s){if(Dn(s)&&Reflect.has(Fo,s)){const r=Fo[s];ns(r)?e!=="_decayCurve"&&(this[e]=r[n]):this[e]=r}else if(yt(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,n)}if(i&&this.sustain<1){const a=n*this.sustain,l=e+r;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+l):this._sig.exponentialApproachValueAtTime(a,l,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(W(yt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,s=0){return Oh(this,e,n,s),this}asArray(e=1024){return xe(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,s=new Dl(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:s}));return l._sig.toDestination(),l.triggerAttackRelease(n*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}en([jn(0)],at.prototype,"attack",void 0);en([jn(0)],at.prototype,"decay",void 0);en([h0(0,1)],at.prototype,"sustain",void 0);en([jn(0)],at.prototype,"release",void 0);const Fo=(()=>{let e,n;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/(128-1)*(Math.PI/2));const r=[],i=6.4;for(e=0;e<128-1;e++){n=e/(128-1);const d=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;r[e]=d/10+n*.83}r[128-1]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/(128-1)*a)/a;const l=[];for(e=0;e<128;e++)n=e/(128-1),l[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<128;e++){n=e/(128-1);const d=Math.pow(n,3)*4+.2,g=Math.cos(d*Math.PI*2*n);c[e]=Math.abs(g*(1-n))}function u(d){const g=new Array(d.length);for(let y=0;y<d.length;y++)g[y]=1-d[y];return g}function h(d){return d.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:l,Out:u(l)},step:{In:o,Out:u(o)}}})();class Ct extends B{constructor(){super(N(Ct.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n);const e=N(Ct.getDefaults(),arguments);this._volume=this.output=new Ls({context:this.context,volume:e.volume}),this.volume=this._volume.volume,re(this,"volume")}static getDefaults(){return Object.assign(B.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[n],o=this.context.transport.schedule(a=>{r[n]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,s,r){const i=this.toSeconds(s),o=this.toSeconds(n);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ft extends Ct{constructor(){super(N(Ft.getDefaults(),arguments));const e=N(Ft.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Ct.getDefaults(),{detune:0,onsilence:ne,portamento:0})}triggerAttack(e,n,s=1){this.log("triggerAttack",e,n,s);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const s=this.toSeconds(n),r=e instanceof kt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}en([jn(0)],Ft.prototype,"portamento",void 0);class go extends at{constructor(){super(N(go.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new J({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class on extends Ft{constructor(){super(N(on.getDefaults(),arguments)),this.name="Synth";const e=N(on.getDefaults(),arguments);this.oscillator=new Bs(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new go(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),re(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ft.getDefaults(),{envelope:Object.assign(rn(at.getDefaults(),Object.keys(B.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(rn(Bs.getDefaults(),[...Object.keys(Qe.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Gi extends B{constructor(){super(N(Gi.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=N(Gi.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new oe({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new oe({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new oe({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new oe({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(B.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){W(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let o=0;o<e;o++){const l=Math.pow(o/e,2)*(2e4-20)+20;n[o]=l}const s=new Float32Array(e),r=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(n,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class qs extends B{constructor(){super(N(qs.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new J({context:this.context}),this.output=new J({context:this.context}),this._filters=[];const e=N(qs.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new ae({context:this.context,units:"positive",value:e.Q}),this.frequency=new ae({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ae({context:this.context,units:"cents",value:e.detune}),this.gain=new ae({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,re(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(B.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){W(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=Kt(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let r=s.indexOf(n);W(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new Gi({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,os(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new Gi({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((i,o)=>s[o]*=i)}),n.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Ih(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class $i extends at{constructor(){super(N($i.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=N($i.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new Vi({context:this.context,value:e.exponent}),this._scale=this.output=new Ui({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(at.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const n=this.toFrequency(e);Xt(n,0),this._baseFrequency=n,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Ga extends Ft{constructor(){super(N(Ga.getDefaults(),arguments)),this.name="MonoSynth";const e=N(Ga.getDefaults(),arguments);this.oscillator=new Bs(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new qs(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new $i(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new go(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),re(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Ft.getDefaults(),{envelope:Object.assign(rn(at.getDefaults(),Object.keys(B.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(rn(qs.getDefaults(),Object.keys(B.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(rn($i.getDefaults(),Object.keys(B.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(rn(Bs.getDefaults(),Object.keys(Qe.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,n=1){if(this.envelope.triggerAttack(e,n),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}const Np=[1,1.483,1.932,2.546,2.63,3.897];class $a extends Ft{constructor(){super(N($a.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const e=N($a.getDefaults(),arguments);this.detune=new ae({context:this.context,units:"cents",value:e.detune}),this.frequency=new ae({context:this.context,units:"frequency"}),this._amplitude=new J({context:this.context,gain:0}).connect(this.output),this._highpass=new qs({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let n=0;n<Np.length;n++){const s=new Or({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:n===0?()=>this.onsilence(this):ne,type:"square"});s.connect(this._highpass),this._oscillators[n]=s;const r=new Mn({context:this.context,value:Np[n]});this._freqMultipliers[n]=r,this.frequency.chain(r,s.frequency),this.detune.connect(s.detune)}this._filterFreqScaler=new Ui({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new at({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return En(Ft.getDefaults(),{envelope:Object.assign(rn(at.getDefaults(),Object.keys(B.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,n=1){return this.envelope.triggerAttack(e,n),this._oscillators.forEach(s=>s.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(s=>{s.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(n=>n.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(n=>n.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(n=>n.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Pr extends on{constructor(){super(N(Pr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=N(Pr.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,re(this,["oscillator","envelope"])}static getDefaults(){return En(Ft.getDefaults(),on.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const s=this.toSeconds(n),r=this.toFrequency(e instanceof kt?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}en([h0(0)],Pr.prototype,"octaves",void 0);en([jn(0)],Pr.prototype,"pitchDecay",void 0);class Ha extends Ct{constructor(){super(N(Ha.getDefaults(),arguments)),this.name="NoiseSynth";const e=N(Ha.getDefaults(),arguments);this.noise=new cs(Object.assign({context:this.context},e.noise)),this.envelope=new go(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Ct.getDefaults(),{envelope:Object.assign(rn(at.getDefaults(),Object.keys(B.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(rn(cs.getDefaults(),Object.keys(Qe.getDefaults())),{type:"white"})})}triggerAttack(e,n=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,n),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(n,s),this.triggerRelease(n+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const Fh=new Set;function Vh(t){Fh.add(t)}function d0(t,e){const n=`registerProcessor("${t}", ${e})`;Fh.add(n)}function MS(){return Array.from(Fh).join(`
`)}class OS extends B{constructor(e){super(e),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=ne;const n=URL.createObjectURL(new Blob([MS()],{type:"text/javascript"})),s=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(n).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(s,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const RS=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Vh(RS);const PS=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Vh(PS);const jS=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Vh(jS);const p0="feedback-comb-filter",FS=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;d0(p0,FS);class Ya extends OS{constructor(){super(N(Ya.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const e=N(Ya.getDefaults(),arguments,["delayTime","resonance"]);this.input=new J({context:this.context}),this.output=new J({context:this.context}),this.delayTime=new oe({context:this.context,value:e.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new oe({context:this.context,value:e.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),re(this,["resonance","delayTime"])}_audioWorkletName(){return p0}static getDefaults(){return Object.assign(B.getDefaults(),{delayTime:.1,resonance:.5})}onReady(e){os(this.input,e,this.output);const n=e.parameters.get("delayTime");this.delayTime.setParam(n);const s=e.parameters.get("feedback");this.resonance.setParam(s)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Qa extends B{constructor(){super(N(Qa.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const e=N(Qa.getDefaults(),arguments,["frequency","type"]);this._frequency=e.frequency,this._type=e.type,this.input=new J({context:this.context}),this.output=new J({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(B.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const e=this._filter,n=this.toFrequency(this._frequency),s=1/(2*Math.PI*n);if(this._type==="lowpass"){const r=1/(s*this.context.sampleRate),i=r-1;this._filter=this.context.createIIRFilter([r,0],[1,i])}else{const r=1/(s*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,r])}this.input.chain(this._filter,this.output),e&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(e),e.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(e){this._frequency=e,this._createFilter()}get type(){return this._type}set type(e){this._type=e,this._createFilter()}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let i=0;i<e;i++){const a=Math.pow(i/e,2)*(2e4-20)+20;n[i]=a}const s=new Float32Array(e),r=new Float32Array(e);return this._filter.getFrequencyResponse(n,s,r),s}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Ka extends B{constructor(){super(N(Ka.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const e=N(Ka.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new Ya({context:this.context,delayTime:e.delayTime,resonance:e.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Qa({context:this.context,frequency:e.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(B.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(e){this._lowpass.frequency=e}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Xa extends Ct{constructor(){super(N(Xa.getDefaults(),arguments)),this.name="PluckSynth";const e=N(Xa.getDefaults(),arguments);this._noise=new cs({context:this.context,type:"pink"}),this.attackNoise=e.attackNoise,this._lfcf=new Ka({context:this.context,dampening:e.dampening,resonance:e.resonance}),this.resonance=e.resonance,this.release=e.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return En(Ct.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(e){this._lfcf.dampening=e}triggerAttack(e,n){const s=this.toFrequency(e);n=this.toSeconds(n);const r=1/s;return this._lfcf.delayTime.setValueAtTime(r,n),this._noise.start(n),this._noise.stop(n+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(n),this._lfcf.resonance.setValueAtTime(this.resonance,n),this}triggerRelease(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class Hi extends Ct{constructor(){super(N(Hi.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=r=>this.releaseAll(r);const e=N(Hi.getDefaults(),arguments,["voice","options"]);W(!Kt(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=e.voice.getDefaults();this.options=Object.assign(n,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Ct.getDefaults(),{maxPolyphony:32,options:{},voice:on})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const n=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return W(e instanceof Ft,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Nl("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),n=this._voices.indexOf(e);this._voices.splice(n,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,n,s){e.forEach(r=>{const i=new za(this.context,r).toMidi(),o=this._getNextAvailableVoice();o&&(o.triggerAttack(r,n,s),this._activeVoices.push({midi:i,voice:o,released:!1}),this.log("triggerAttack",r,n))})}_triggerRelease(e,n){e.forEach(s=>{const r=new za(this.context,s).toMidi(),i=this._activeVoices.find(({midi:o,released:a})=>o===r&&!a);i&&(i.voice.triggerRelease(n),i.released=!0,this.log("triggerRelease",s,n))})}_scheduleEvent(e,n,s,r){W(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(n,s,r):this._triggerRelease(n,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,n,s,r)},s-this.now())}triggerAttack(e,n,s){Array.isArray(e)||(e=[e]);const r=this.toSeconds(n);return this._scheduleEvent("attack",e,r,s),this}triggerRelease(e,n){Array.isArray(e)||(e=[e]);const s=this.toSeconds(n);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,n,s,r){const i=this.toSeconds(s);if(this.triggerAttack(e,i,r),yt(n)){W(yt(e),"If the duration is an array, the notes must also be an array"),e=e;for(let o=0;o<e.length;o++){const a=n[Math.min(o,n.length-1)],l=this.toSeconds(a);W(l>0,"The duration must be greater than 0"),this.triggerRelease(e[o],i+l)}}else{const o=this.toSeconds(n);W(o>0,"The duration must be greater than 0"),this.triggerRelease(e,i+o)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const n=rn(e,["onsilence","context"]);return this.options=En(this.options,n),this._voices.forEach(s=>s.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(e){const n=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Yi extends Ct{constructor(){super(N(Yi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=N(Yi.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(W(jo(s)||Kt(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),jo(s)){const i=new kt(this.context,s).toMidi();n[i]=e.urls[s]}else Kt(r)&&isFinite(r)&&(n[r]=e.urls[r])}),this._buffers=new Rh({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Ct.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ne,onerror:ne,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,s=1){return this.log("triggerAttack",e,n,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=c0(new kt(this.context,r).toFrequency()),o=Math.round(i),a=i-o,l=this._findClosest(o),c=o-l,u=this._buffers.get(c),h=l0(l+a),d=new Mr({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(n,0,u.duration/h,s),yt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const g=this._activeSources.get(o),y=g.indexOf(d);y!==-1&&g.splice(y,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new kt(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),yt(n)?(W(yt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(l))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,s){if(W(jo(e)||isFinite(e),`note must be a pitch or midi: ${e}`),jo(e)){const r=new kt(this.context,e).toMidi();this._buffers.add(r,n,s)}else this._buffers.add(e,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}en([jn(0)],Yi.prototype,"attack",void 0);en([jn(0)],Yi.prototype,"release",void 0);class Cs extends et{constructor(){super(N(Cs.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new mo("stopped"),this._startOffset=0;const e=N(Cs.getDefaults(),arguments,["callback","value"]);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(et.getDefaults(),{callback:ne,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let s;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const r=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Kt(this._loop)&&this._loop>1){s=1/0,Kt(this._loop)&&(s=this._loop*this._getLoopDuration());const i=this._state.getAfter(r);i!==null&&(s=Math.min(s,i.time-r)),s!==1/0&&(s=new Ve(this.context,s));const o=new Ve(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),o,new Ve(this.context,r),s)}else n.id=this.context.transport.schedule(this._tick.bind(this),new Ve(this.context,r))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);const n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const s=this._state.getBefore(n);let r=n;s!==null&&(r=s.time),this._rescheduleEvents(r)}return this}cancel(e){e=cn(e,-1/0);const n=this.toTicks(e);return this._state.forEachFrom(n,s=>{this.context.transport.clear(s.id)}),this._state.cancel(n),this}_tick(e){const n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;e0(this.humanize)||(s=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*s}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Ve(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Ve(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){const s=this._getLoopDuration();return(e-n.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class As extends Cs{constructor(){super(N(As.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new mo("stopped"),this._events=new Set;const e=N(As.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,e.events.forEach(n=>{yt(n)?this.add(n[0],n[1]):this.add(n)})}static getDefaults(){return Object.assign(Cs.getDefaults(),{events:[]})}start(e,n){const s=this.toTicks(e);if(this._state.getValueAtTime(s)!=="started"){n=cn(n,this._loop?this._loopStart:0),this._loop?n=cn(n,this._loopStart):n=cn(n,0);const r=this.toTicks(n);this._state.add({id:-1,offset:r,state:"started",time:s}),this._forEach(i=>{this._startNote(i,s,r)})}return this}_startNote(e,n,s){n-=s,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<s&&(n+=this._getLoopDuration()),e.start(new Ve(this.context,n))):e.startOffset<this._loopStart&&e.startOffset>=s&&(e.loop=!1,e.start(new Ve(this.context,n))):e.startOffset>=s&&e.start(new Ve(this.context,n))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(n=>{n.startOffset+=this._startOffset})}stop(e){const n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._forEach(s=>{s.stop(e)}),this}at(e,n){const s=new vr(this.context,e).toTicks(),r=new Ve(this.context,1).toSeconds(),i=this._events.values();let o=i.next();for(;!o.done;){const a=o.value;if(Math.abs(s-a.startOffset)<r)return X(n)&&(a.value=n),a;o=i.next()}return X(n)?(this.add(e,n),this.at(e)):null}add(e,n){e instanceof Object&&Reflect.has(e,"time")&&(n=e,e=n.time);const s=this.toTicks(e);let r;return n instanceof Cs?(r=n,r.callback=this._tick.bind(this)):r=new Cs({callback:this._tick.bind(this),context:this.context,value:n}),r.startOffset=s,r.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(r),this._restartEvent(r),this}_restartEvent(e){this._state.forEach(n=>{n.state==="started"?this._startNote(e,n.time,n.offset):e.stop(new Ve(this.context,n.time))})}remove(e,n){return ns(e)&&e.hasOwnProperty("time")&&(n=e,e=n.time),e=this.toTicks(e),this._events.forEach(s=>{s.startOffset===e&&(St(n)||X(n)&&s.value===n)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(n=>n.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(n=>{n instanceof As?n._forEach(e):e(n)}),this}_setAll(e,n){this._forEach(s=>{s[e]=n})}_tick(e,n){this.mute||this.callback(e,n)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(n=>{n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.loop=e,this._testLoopBoundries(n)})}get loopEnd(){return new Ve(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopEnd=e,this._testLoopBoundries(n)})}get loopStart(){return new Ve(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopStart=this.loopStart,this._testLoopBoundries(n)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class Qi extends B{constructor(){super(Object.assign(N(Qi.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new IS({context:this.context}),this.a=new J({context:this.context,gain:0}),this.b=new J({context:this.context,gain:0}),this.output=new J({context:this.context}),this._internalChannels=[this.a,this.b];const e=N(Qi.getDefaults(),arguments,["fade"]);this.fade=new ae({context:this.context,units:"normalRange",value:e.fade}),re(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",hn(this._split,this.a.gain,0),hn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(B.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Za extends B{constructor(e){super(e),this.name="Effect",this._dryWet=new Qi({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new J({context:this.context}),this.effectReturn=new J({context:this.context}),this.input=new J({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],re(this,"wet")}static getDefaults(){return Object.assign(B.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Ja extends B{constructor(){super(Object.assign(N(Ja.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=N(Ja.getDefaults(),arguments,["pan"]);this.pan=new oe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",re(this,"pan")}static getDefaults(){return Object.assign(B.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const VS="bit-crusher",LS=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;d0(VS,LS);class Ki extends B{constructor(){super(N(Ki.getDefaults(),arguments,["channels"])),this.name="Split";const e=N(Ki.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(B.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class jr extends B{constructor(){super(N(jr.getDefaults(),arguments,["channels"])),this.name="Merge";const e=N(jr.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(B.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class bp extends B{constructor(e){super(e),this.name="StereoEffect",this.input=new J({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Qi({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Ki({context:this.context,channels:2}),this._merge=new jr({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),re(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),os(...e),hn(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),os(...e),hn(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(B.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class BS extends bp{constructor(e){super(e),this.feedback=new ae({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new J({context:this.context}),this._feedbackR=new J({context:this.context}),this._feedbackSplit=new Ki({context:this.context,channels:2}),this._feedbackMerge=new jr({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),re(this,["feedback"])}static getDefaults(){return Object.assign(bp.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class el extends Za{constructor(){super(N(el.getDefaults(),arguments,["distortion"])),this.name="Distortion";const e=N(el.getDefaults(),arguments,["distortion"]);this._shaper=new as({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(Za.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const n=e*100,s=Math.PI/180;this._shaper.setMap(r=>Math.abs(r)<.001?0:(3+n)*r*20*s/(Math.PI+n*Math.abs(r)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Ap extends BS{constructor(e){super(e),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),re(this,["feedback"])}}class tl extends Ap{constructor(){super(N(tl.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const e=N(tl.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new _r({context:this.context,maxDelay:e.maxDelay}),this._rightDelay=new _r({context:this.context,maxDelay:e.maxDelay}),this._rightPreDelay=new _r({context:this.context,maxDelay:e.maxDelay}),this.delayTime=new ae({context:this.context,units:"time",value:e.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),re(this,["delayTime"])}static getDefaults(){return Object.assign(Ap.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class nl extends Za{constructor(){super(N(nl.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=N(nl.getDefaults(),arguments,["decay"]);this._decay=e.decay,this._preDelay=e.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Za.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),Xt(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),Xt(e,0),this._preDelay=e,this.generate()}generate(){return xe(this,void 0,void 0,function*(){const e=this.ready,n=new Dl(2,this._decay+this._preDelay,this.context.sampleRate),s=new cs({context:n}),r=new cs({context:n}),i=new jr({context:n});s.connect(i,0,0),r.connect(i,0,1);const o=new J({context:n}).toDestination();i.connect(o),s.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=n.render();return this.ready=a.then(ne),yield e,this._convolver.buffer=(yield a).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class De extends B{constructor(){super(N(De.getDefaults(),arguments,["solo"])),this.name="Solo";const e=N(De.getDefaults(),arguments,["solo"]);this.input=this.output=new J({context:this.context}),De._allSolos.has(this.context)||De._allSolos.set(this.context,new Set),De._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(B.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),De._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){De._soloed.has(this.context)||De._soloed.set(this.context,new Set),De._soloed.get(this.context).add(this)}_removeSolo(){De._soloed.has(this.context)&&De._soloed.get(this.context).delete(this)}_isSoloed(){return De._soloed.has(this.context)&&De._soloed.get(this.context).has(this)}_noSolos(){return!De._soloed.has(this.context)||De._soloed.has(this.context)&&De._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),De._allSolos.get(this.context).delete(this),this._removeSolo(),this}}De._allSolos=new Map;De._soloed=new Map;class sl extends B{constructor(){super(N(sl.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=N(sl.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ja({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ls({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,re(this,["pan","volume"])}static getDefaults(){return Object.assign(B.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class xs extends B{constructor(){super(N(xs.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=N(xs.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new De({solo:e.solo,context:this.context}),this._panVol=this.output=new sl({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),re(this,["pan","volume"])}static getDefaults(){return Object.assign(B.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return xs.buses.has(e)||xs.buses.set(e,new J({context:this.context})),xs.buses.get(e)}send(e,n=0){const s=this._getBus(e),r=new J({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}xs.buses=new Map;class qS extends B{constructor(){super(...arguments),this.name="Listener",this.positionX=new oe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new oe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new oe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new oe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new oe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new oe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new oe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new oe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new oe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(B.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}bl(t=>{t.listener=new qS({context:t})});Al(t=>{t.listener.dispose()});class xr extends B{constructor(){super(N(xr.getDefaults(),arguments)),this.name="Recorder";const e=N(xr.getDefaults(),arguments);this.input=new J({context:this.context}),W(xr.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:e.mimeType})}static getDefaults(){return B.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return Sn!==null&&Reflect.has(Sn,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return xe(this,void 0,void 0,function*(){W(this.state!=="started","Recorder is already started");const e=new Promise(n=>{const s=()=>{this._recorder.removeEventListener("start",s,!1),n()};this._recorder.addEventListener("start",s,!1)});return this._recorder.start(),yield e})}stop(){return xe(this,void 0,void 0,function*(){W(this.state!=="stopped","Recorder is not started");const e=new Promise(n=>{const s=r=>{this._recorder.removeEventListener("dataavailable",s,!1),n(r.data)};this._recorder.addEventListener("dataavailable",s,!1)});return this._recorder.stop(),yield e})}pause(){return W(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}const ys=Wt().transport;Wt().destination;Wt().destination;Wt().listener;Wt().draw;Wt();class zS{constructor(){this.isInitialized=!1,this.synths={},this.effects={},this.samples={},this.isPlaying=!1,this.currentSequence=null}async initialize(){if(!this.isInitialized)try{await lc(),this.setupSynths(),this.setupEffects(),this.setupDrumSamples(),this.isInitialized=!0,console.log("Audio service initialized")}catch(e){console.error("Failed to initialize audio service:",e)}}setupSynths(){this.synths.lead=new Hi(on,{oscillator:{type:"sawtooth"},envelope:{attack:.1,decay:.2,sustain:.5,release:.8},filter:{frequency:1e3,rolloff:-24}}),this.synths.bass=new Ga({oscillator:{type:"square"},envelope:{attack:.02,decay:.1,sustain:.3,release:.5},filter:{frequency:300,rolloff:-12}}),this.synths.pad=new Hi(on,{oscillator:{type:"sine"},envelope:{attack:.5,decay:.3,sustain:.7,release:2}}),this.synths.pluck=new Xa({attackNoise:1,dampening:4e3,resonance:.7})}setupEffects(){this.effects.reverb=new nl({roomSize:.7,dampening:3e3}),this.effects.delay=new tl({delayTime:"8n",feedback:.3,wet:.2}),this.effects.filter=new qs({frequency:1e3,type:"lowpass",rolloff:-24}),this.effects.distortion=new el({distortion:.4,oversample:"4x"}),this.synths.lead.connect(this.effects.reverb),this.synths.pad.connect(this.effects.reverb),this.synths.bass.connect(this.effects.filter),this.synths.pluck.connect(this.effects.delay),Object.values(this.effects).forEach(e=>{e.toDestination()}),Object.values(this.synths).forEach(e=>{e.output.connected||e.toDestination()})}setupDrumSamples(){this.samples.kick=new Pr({pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4}}),this.samples.snare=new Ha({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}}),this.samples.hihat=new $a({frequency:200,envelope:{attack:.001,decay:.1,release:.01},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}),this.samples.kick.toDestination(),this.samples.snare.toDestination(),this.samples.hihat.toDestination()}async playMidiPattern(e,n={}){this.isInitialized||await this.initialize();const{tempo:s=120,loop:r=!1,synthType:i="lead"}=n;ys.bpm.value=s,this.stop();const o=this.synths[i]||this.synths.lead,a=[];if(e.chords&&e.chords.forEach(l=>{a.push({time:l.time,note:l.note,duration:l.duration,velocity:l.velocity/127})}),e.melody&&e.melody.forEach(l=>{a.push({time:l.time,note:l.note,duration:l.duration,velocity:l.velocity/127})}),e.bass){const l=e.bass.map(c=>({time:c.time,note:c.note,duration:c.duration,velocity:c.velocity/127}));this.currentSequence=new As((c,u)=>{this.synths.bass.triggerAttackRelease(u.note,u.duration,c,u.velocity)},l)}a.length>0&&(this.currentSequence=new As((l,c)=>{o.triggerAttackRelease(c.note,c.duration,l,c.velocity)},a),r&&(this.currentSequence.loop=!0,this.currentSequence.loopEnd="4m"),this.currentSequence.start(0)),e.drums&&this.playDrumPattern(e.drums,{loop:r}),ys.start(),this.isPlaying=!0}playDrumPattern(e,n={}){const{loop:s=!1}=n;Object.keys(e).forEach(r=>{const i=e[r],o=this.samples[r];if(o&&i){const a=new As((l,c)=>{o.triggerAttackRelease("C2","32n",l,c.velocity/127)},i.map(l=>({time:l.time,velocity:l.velocity})));s&&(a.loop=!0,a.loopEnd="1m"),a.start(0)}})}stop(){this.currentSequence&&(this.currentSequence.stop(),this.currentSequence.dispose(),this.currentSequence=null),ys.stop(),ys.cancel(),this.isPlaying=!1}pause(){ys.pause(),this.isPlaying=!1}resume(){ys.start(),this.isPlaying=!0}generateWavSample(e,n={}){const{duration:s=2,frequency:r=440,sampleRate:i=44100,bitDepth:o=16}=n;return new Promise(a=>{const l=new xr;let c;switch(e){case"kick":c=this.samples.kick;break;case"snare":c=this.samples.snare;break;case"hihat":c=this.samples.hihat;break;case"bass":c=this.synths.bass;break;case"lead":c=this.synths.lead;break;default:c=this.synths.lead}c.connect(l),l.start(),e==="kick"||e==="snare"||e==="hihat"?c.triggerAttackRelease("C2",s):c.triggerAttackRelease(r,s),setTimeout(async()=>{const u=await l.stop(),h=new Blob([u],{type:"audio/wav"}),d=URL.createObjectURL(h);a(d)},s*1e3+100)})}downloadWavSample(e,n="sample.wav"){const s=document.createElement("a");s.href=e,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)}setTempo(e){ys.bpm.value=e}setSynthParameter(e,n,s){const r=this.synths[e];r&&r[n]&&(r[n].value=s)}setEffectParameter(e,n,s){const r=this.effects[e];r&&r[n]&&(r[n].value=s)}async playSample(e){if(!e)return null;try{await lc();const n=new on().toDestination(),s=e.frequency||440,r=e.duration||1;return n.triggerAttackRelease(s,r),{stop:()=>n.dispose(),duration:r*1e3}}catch(n){return console.error("Error playing sample:",n),null}}async exportSample(e){if(!e)throw new Error("Invalid audio data");try{await lc();const n=new xr,s=new on().connect(n);n.start();const r=e.frequency||440,i=e.duration||1;s.triggerAttackRelease(r,i),await new Promise(a=>setTimeout(a,i*1e3+100));const o=await n.stop();return s.dispose(),new Blob([o],{type:"audio/wav"})}catch(n){throw console.error("Error exporting sample:",n),n}}async generateDrumLoop(e={}){const{genre:n,tempo:s,duration:r,includeKick:i,includeSnare:o,includeHihat:a}=e;return{type:"drum-loop",genre:n,tempo:s,duration:r,frequency:60,envelope:{attack:.01,decay:.3,sustain:.1,release:.5},effects:{compression:.7}}}async generateSample(e={}){const{type:n,genre:s,duration:r}=e;return{type:n,genre:s,duration:r||1,frequency:{kick:60,snare:200,"hi-hat":8e3,bass:80,lead:440,pad:220,pluck:880}[n]||440,envelope:{attack:.01,decay:.3,sustain:.1,release:.5},effects:{}}}}const Le=new zS;class US{async generateInteractiveGuidebook(e,n){return this.generateMockInteractiveContent(n)}parseGuidebookSections(e){const n=[];[/chord progression[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/harmonic progression[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/chord[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/(I-V-vi-IV|vi-IV-I-V|ii-V-I|i-bVII-bVI-bVII)/gi].forEach(u=>{const h=e.match(u);h&&h.forEach((d,g)=>{n.push({type:"chord-progression",title:`Chord Progression ${n.filter(y=>y.type==="chord-progression").length+1}`,description:d.trim(),position:e.indexOf(d)})})}),[/bass line[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/bassline[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/sub bass[:\-\s]*(.*?)(?=\n|$)/gi,/808[s]?[:\-\s]*(.*?)(?=\n|$)/gi].forEach(u=>{const h=e.match(u);h&&h.forEach((d,g)=>{n.push({type:"bass-line",title:`Bass Pattern ${n.filter(y=>y.type==="bass-line").length+1}`,description:d.trim(),position:e.indexOf(d)})})}),[/melody[:\-\s]*(.*?)(?=\n|$)/gi,/lead[:\-\s]*(.*?)(?=\n|$)/gi,/arpeggio[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/sequence[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/motif[s]?[:\-\s]*(.*?)(?=\n|$)/gi].forEach(u=>{const h=e.match(u);h&&h.forEach((d,g)=>{n.push({type:"lead-melody",title:`Melody ${n.filter(y=>y.type==="lead-melody").length+1}`,description:d.trim(),position:e.indexOf(d)})})}),[/drum pattern[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/beat[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/rhythm[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/groove[s]?[:\-\s]*(.*?)(?=\n|$)/gi].forEach(u=>{const h=e.match(u);h&&h.forEach((d,g)=>{n.push({type:"drum-pattern",title:`Drum Pattern ${n.filter(y=>y.type==="drum-pattern").length+1}`,description:d.trim(),position:e.indexOf(d)})})}),[/(kick|snare|hi-hat|hihat|clap|crash|ride|tom|cymbal|shaker|tambourine|cowbell|conga|bongo)[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/(pad|string|brass|lead|pluck|stab|sweep|riser|impact|whoosh|vocal|choir)[s]?[:\-\s]*(.*?)(?=\n|$)/gi,/(fx|effect|reverb|delay|distortion|filter|phaser|flanger)[s]?[:\-\s]*(.*?)(?=\n|$)/gi].forEach(u=>{const h=e.match(u);h&&h.forEach((d,g)=>{const y=d.match(/(kick|snare|hi-hat|hihat|clap|crash|ride|tom|cymbal|shaker|tambourine|cowbell|conga|bongo|pad|string|brass|lead|pluck|stab|sweep|riser|impact|whoosh|vocal|choir|fx|effect)/i)[1];n.push({type:"sample-suggestion",sampleType:y.toLowerCase(),title:`${y.charAt(0).toUpperCase()+y.slice(1)} Sample`,description:d.trim(),position:e.indexOf(d)})})});const l=e.match(/arpeggio[s]?[:\-\s]*(.*?)(?=\n|$)/gi);l&&l.forEach((u,h)=>{n.push({type:"arpeggio",title:`Arpeggio Pattern ${h+1}`,description:u.trim(),position:e.indexOf(u)})});const c=e.match(/(pad|atmosphere|ambient|texture)[s]?[:\-\s]*(.*?)(?=\n|$)/gi);return c&&c.forEach((u,h)=>{n.push({type:"pad",title:`Atmospheric Pad ${h+1}`,description:u.trim(),position:e.indexOf(u)})}),n.sort((u,h)=>u.position-h.position)}async generateChordProgressionMidi(e,n){var a;const s=n.key||"C",r=n.tempo||120,i=((a=n.genre)==null?void 0:a[0])||"House",o=this.getChordProgressionForGenre(i,s);return wn.generateChordPattern({key:s,tempo:r,chordProgression:o,duration:8,style:i})}async generateBassLineMidi(e,n){var o;const s=n.key||"C",r=n.tempo||120,i=((o=n.genre)==null?void 0:o[0])||"House";return wn.generateBassPattern({key:s,tempo:r,style:i,duration:4})}async generateLeadMelodyMidi(e,n){var o;const s=n.key||"C",r=n.tempo||120,i=((o=n.genre)==null?void 0:o[0])||"House";return wn.generateMelodyPattern({key:s,tempo:r,style:i,duration:4})}async generateDrumSample(e,n){var i;const s=((i=n.genre)==null?void 0:i[0])||"House",r=n.tempo||120;return Le.generateDrumLoop({genre:s,tempo:r,duration:2,includeKick:!0,includeSnare:!0,includeHihat:!0})}async generateSampleForSuggestion(e,n){var i;const s=e.sampleType||"kick",r=((i=n.genre)==null?void 0:i[0])||"House";return Le.generateSample({type:s,genre:r,duration:s==="kick"||s==="snare"?.5:1})}getChordProgressionForGenre(e,n){const s={House:["I","vi","IV","V"],Techno:["i","bVII","bVI","bVII"],Trance:["vi","IV","I","V"],Dubstep:["i","bVI","bIII","bVII"],"Future Bass":["I","V","vi","IV"],Ambient:["I","iii","vi","IV"],"Hip Hop":["i","bVII","i","bVII"],Pop:["I","V","vi","IV"]};return s[e]||s.House}generateMockInteractiveContent(e){var o;const n=((o=e.genre)==null?void 0:o[0])||"House",s=e.key||"C Major",r=e.tempo||120,i=[{id:"chord-demo-1",type:"midi",title:`${n} Chord Progression`,description:`A classic ${n} chord progression in ${s}`,midiData:this.generateChordProgressionForGenre(n,s,r),position:0},{id:"bass-demo-1",type:"midi",title:`${n} Bass Line`,description:"A driving bass line that complements the chord progression",midiData:this.generateBassLineForGenre(n,s,r),position:1},{id:"lead-demo-1",type:"midi",title:`${n} Lead Melody`,description:"An uplifting lead melody for the chorus section",midiData:this.generateMelodyForGenre(n,s,r),position:2},{id:"arp-demo-1",type:"midi",title:`${n} Arpeggio`,description:"A rhythmic arpeggio pattern to add movement",midiData:this.generateArpeggioForGenre(n,s,r),position:3},{id:"kick-demo-1",type:"sample",title:`${n} Kick Drum`,description:`A punchy kick drum perfect for ${n} tracks`,audioData:this.generateSampleForType("kick",n),position:4},{id:"snare-demo-1",type:"sample",title:`${n} Snare`,description:`A crisp snare with the right punch for ${n}`,audioData:this.generateSampleForType("snare",n),position:5},{id:"hihat-demo-1",type:"sample",title:`${n} Hi-Hat`,description:"Tight hi-hats to drive the rhythm",audioData:this.generateSampleForType("hihat",n),position:6},{id:"pad-demo-1",type:"sample",title:`${n} Atmospheric Pad`,description:"Lush pad sounds to fill the background",audioData:this.generateSampleForType("pad",n),position:7},{id:"pluck-demo-1",type:"sample",title:`${n} Pluck`,description:"Sharp pluck sounds for rhythmic elements",audioData:this.generateSampleForType("pluck",n),position:8}];return this.filterElementsByGenre(i,n)}generateChordProgressionForGenre(e,n,s){const r={House:[{note:"C4",time:0,duration:1,velocity:80},{note:"E4",time:0,duration:1,velocity:80},{note:"G4",time:0,duration:1,velocity:80},{note:"A3",time:1,duration:1,velocity:80},{note:"C4",time:1,duration:1,velocity:80},{note:"E4",time:1,duration:1,velocity:80},{note:"F3",time:2,duration:1,velocity:80},{note:"A3",time:2,duration:1,velocity:80},{note:"C4",time:2,duration:1,velocity:80},{note:"G3",time:3,duration:1,velocity:80},{note:"B3",time:3,duration:1,velocity:80},{note:"D4",time:3,duration:1,velocity:80}],Techno:[{note:"A3",time:0,duration:2,velocity:90},{note:"C4",time:0,duration:2,velocity:90},{note:"E4",time:0,duration:2,velocity:90},{note:"G3",time:2,duration:2,velocity:90},{note:"Bb3",time:2,duration:2,velocity:90},{note:"D4",time:2,duration:2,velocity:90}],Dubstep:[{note:"E3",time:0,duration:.5,velocity:100},{note:"G3",time:0,duration:.5,velocity:100},{note:"B3",time:0,duration:.5,velocity:100},{note:"C4",time:1,duration:.5,velocity:100},{note:"E4",time:1,duration:.5,velocity:100},{note:"G4",time:1,duration:.5,velocity:100},{note:"D3",time:2,duration:.5,velocity:100},{note:"F#3",time:2,duration:.5,velocity:100},{note:"A3",time:2,duration:.5,velocity:100},{note:"G3",time:3,duration:.5,velocity:100},{note:"B3",time:3,duration:.5,velocity:100},{note:"D4",time:3,duration:.5,velocity:100}]};return{notes:r[e]||r.House,tempo:s,duration:4,key:n}}generateBassLineForGenre(e,n,s){const r={House:[{note:"C2",time:0,duration:.5,velocity:100},{note:"C2",time:.5,duration:.5,velocity:80},{note:"A1",time:1,duration:.5,velocity:100},{note:"A1",time:1.5,duration:.5,velocity:80},{note:"F1",time:2,duration:.5,velocity:100},{note:"F1",time:2.5,duration:.5,velocity:80},{note:"G1",time:3,duration:.5,velocity:100},{note:"G1",time:3.5,duration:.5,velocity:80}],Techno:[{note:"A1",time:0,duration:.25,velocity:110},{note:"A1",time:.5,duration:.25,velocity:90},{note:"A1",time:1,duration:.25,velocity:110},{note:"A1",time:1.5,duration:.25,velocity:90},{note:"G1",time:2,duration:.25,velocity:110},{note:"G1",time:2.5,duration:.25,velocity:90},{note:"G1",time:3,duration:.25,velocity:110},{note:"G1",time:3.5,duration:.25,velocity:90}],Dubstep:[{note:"E1",time:0,duration:.125,velocity:127},{note:"E1",time:.25,duration:.125,velocity:100},{note:"E1",time:.75,duration:.125,velocity:127},{note:"C1",time:1,duration:.125,velocity:127},{note:"C1",time:1.25,duration:.125,velocity:100},{note:"C1",time:1.75,duration:.125,velocity:127},{note:"D1",time:2,duration:.125,velocity:127},{note:"D1",time:2.5,duration:.125,velocity:100},{note:"G1",time:3,duration:.125,velocity:127},{note:"G1",time:3.5,duration:.125,velocity:100}]};return{notes:r[e]||r.House,tempo:s,duration:4,key:n}}generateMelodyForGenre(e,n,s){const r={House:[{note:"C5",time:0,duration:.25,velocity:90},{note:"D5",time:.25,duration:.25,velocity:85},{note:"E5",time:.5,duration:.5,velocity:95},{note:"G5",time:1,duration:.5,velocity:90},{note:"F5",time:1.5,duration:.25,velocity:85},{note:"E5",time:1.75,duration:.25,velocity:80},{note:"D5",time:2,duration:1,velocity:90},{note:"C5",time:3,duration:1,velocity:95}],Techno:[{note:"A4",time:0,duration:.5,velocity:95},{note:"C5",time:.5,duration:.5,velocity:90},{note:"E5",time:1,duration:.5,velocity:95},{note:"G5",time:1.5,duration:.5,velocity:90},{note:"F5",time:2,duration:.5,velocity:95},{note:"D5",time:2.5,duration:.5,velocity:90},{note:"Bb4",time:3,duration:1,velocity:100}],Dubstep:[{note:"E5",time:0,duration:.125,velocity:100},{note:"G5",time:.125,duration:.125,velocity:95},{note:"B5",time:.25,duration:.25,velocity:110},{note:"C6",time:.75,duration:.25,velocity:105},{note:"B5",time:1,duration:.125,velocity:100},{note:"G5",time:1.125,duration:.125,velocity:95},{note:"E5",time:1.25,duration:.75,velocity:110},{note:"D5",time:2,duration:.5,velocity:100},{note:"G5",time:2.5,duration:1.5,velocity:115}]};return{notes:r[e]||r.House,tempo:s,duration:4,key:n}}generateArpeggioForGenre(e,n,s){const r={House:[{note:"C4",time:0,duration:.25,velocity:75},{note:"E4",time:.25,duration:.25,velocity:75},{note:"G4",time:.5,duration:.25,velocity:75},{note:"C5",time:.75,duration:.25,velocity:75},{note:"A3",time:1,duration:.25,velocity:75},{note:"C4",time:1.25,duration:.25,velocity:75},{note:"E4",time:1.5,duration:.25,velocity:75},{note:"A4",time:1.75,duration:.25,velocity:75},{note:"F3",time:2,duration:.25,velocity:75},{note:"A3",time:2.25,duration:.25,velocity:75},{note:"C4",time:2.5,duration:.25,velocity:75},{note:"F4",time:2.75,duration:.25,velocity:75},{note:"G3",time:3,duration:.25,velocity:75},{note:"B3",time:3.25,duration:.25,velocity:75},{note:"D4",time:3.5,duration:.25,velocity:75},{note:"G4",time:3.75,duration:.25,velocity:75}],Techno:[{note:"A3",time:0,duration:.125,velocity:80},{note:"C4",time:.125,duration:.125,velocity:80},{note:"E4",time:.25,duration:.125,velocity:80},{note:"A4",time:.375,duration:.125,velocity:80},{note:"C5",time:.5,duration:.125,velocity:80},{note:"A4",time:.625,duration:.125,velocity:80},{note:"E4",time:.75,duration:.125,velocity:80},{note:"C4",time:.875,duration:.125,velocity:80}]};return{notes:r[e]||r.House,tempo:s,duration:4,key:n}}generateSampleForType(e,n){var i,o;const s={kick:{House:{frequency:60,duration:.8,envelope:{attack:.01,decay:.3,sustain:.1,release:.5}},Techno:{frequency:55,duration:1,envelope:{attack:.005,decay:.4,sustain:.05,release:.6}},Dubstep:{frequency:45,duration:1.2,envelope:{attack:.02,decay:.5,sustain:.2,release:.8}}},snare:{House:{frequency:200,duration:.3,envelope:{attack:.01,decay:.1,sustain:.05,release:.2}},Techno:{frequency:220,duration:.25,envelope:{attack:.005,decay:.08,sustain:.02,release:.15}},Dubstep:{frequency:180,duration:.4,envelope:{attack:.02,decay:.15,sustain:.1,release:.3}}},hihat:{House:{frequency:8e3,duration:.1,envelope:{attack:.001,decay:.05,sustain:.01,release:.05}},Techno:{frequency:9e3,duration:.08,envelope:{attack:.001,decay:.04,sustain:.005,release:.04}},Dubstep:{frequency:7e3,duration:.12,envelope:{attack:.002,decay:.06,sustain:.02,release:.08}}},pad:{House:{frequency:220,duration:4,envelope:{attack:.5,decay:1,sustain:.7,release:2}},Techno:{frequency:200,duration:4,envelope:{attack:.3,decay:.8,sustain:.6,release:1.5}},Dubstep:{frequency:180,duration:4,envelope:{attack:.8,decay:1.5,sustain:.8,release:3}}},pluck:{House:{frequency:440,duration:.5,envelope:{attack:.01,decay:.2,sustain:.1,release:.3}},Techno:{frequency:480,duration:.4,envelope:{attack:.005,decay:.15,sustain:.05,release:.25}},Dubstep:{frequency:400,duration:.6,envelope:{attack:.02,decay:.25,sustain:.15,release:.4}}}},r=((i=s[e])==null?void 0:i[n])||((o=s[e])==null?void 0:o.House)||s[e];return{type:e,genre:n,...r,effects:{compression:.7,reverb:.2}}}filterElementsByGenre(e,n){const r={House:6,Techno:7,Dubstep:8,Trance:6,Ambient:4,"Hip Hop":5}[n]||6;return e.slice(0,r)}}const WS=new US,GS=({content:t,interactiveElements:e=[]})=>{const[n,s]=K.useState(null),[r,i]=K.useState(null),o=async d=>{try{if(n===d.id){r&&(r.stop(),i(null)),s(null);return}r&&r.stop(),s(d.id);const g=await wn.playMidiData(d.midiData);i(g),setTimeout(()=>{s(null),i(null)},(d.midiData.duration||4)*1e3)}catch(g){console.error("Error playing MIDI:",g),s(null)}},a=async d=>{try{if(n===d.id){r&&(r.stop(),i(null)),s(null);return}r&&r.stop(),s(d.id);const g=await Le.playSample(d.audioData);i(g),setTimeout(()=>{s(null),i(null)},(d.audioData.duration||1)*1e3)}catch(g){console.error("Error playing sample:",g),s(null)}},l=async d=>{try{const g=await wn.exportMidiData(d.midiData),y=URL.createObjectURL(g),_=document.createElement("a");_.href=y,_.download=`${d.title.replace(/\s+/g,"_")}.mid`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(y)}catch(g){console.error("Error downloading MIDI:",g)}},c=async d=>{try{const g=await Le.exportSample(d.audioData),y=URL.createObjectURL(g),_=document.createElement("a");_.href=y,_.download=`${d.title.replace(/\s+/g,"_")}.wav`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(y)}catch(g){console.error("Error downloading sample:",g)}},u=d=>{var y;const g=n===d.id;return m.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-purple-500/30 my-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[d.type==="midi"?m.jsx(Ps,{className:"w-5 h-5 text-purple-400"}):m.jsx(Ta,{className:"w-5 h-5 text-blue-400"}),m.jsx("h4",{className:"text-lg font-semibold text-white",children:d.title}),m.jsx("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded-full",children:d.type.toUpperCase()})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("button",{onClick:()=>d.type==="midi"?o(d):a(d),className:`flex items-center space-x-1 px-3 py-1 rounded-lg transition-colors ${g?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:[g?m.jsx(Wm,{className:"w-4 h-4"}):m.jsx(Gn,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:g?"Stop":"Play"})]}),m.jsxs("button",{onClick:()=>d.type==="midi"?l(d):c(d),className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[m.jsx(Ut,{className:"w-4 h-4"}),m.jsx("span",{className:"text-sm",children:"Download"})]})]})]}),m.jsx("p",{className:"text-gray-300 text-sm mb-3",children:d.description}),d.type==="midi"&&d.midiData&&m.jsxs("div",{className:"bg-gray-900 rounded p-3",children:[m.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"MIDI Info:"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Notes:"}),m.jsx("span",{className:"text-white ml-2",children:((y=d.midiData.notes)==null?void 0:y.length)||0})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Duration:"}),m.jsxs("span",{className:"text-white ml-2",children:[d.midiData.duration||4," bars"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Tempo:"}),m.jsxs("span",{className:"text-white ml-2",children:[d.midiData.tempo||120," BPM"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Key:"}),m.jsx("span",{className:"text-white ml-2",children:d.midiData.key||"C Major"})]})]})]}),d.type==="sample"&&d.audioData&&m.jsxs("div",{className:"bg-gray-900 rounded p-3",children:[m.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Sample Info:"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Type:"}),m.jsx("span",{className:"text-white ml-2 capitalize",children:d.audioData.type||"Unknown"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Duration:"}),m.jsxs("span",{className:"text-white ml-2",children:[d.audioData.duration||1,"s"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Frequency:"}),m.jsxs("span",{className:"text-white ml-2",children:[d.audioData.frequency||440,"Hz"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400",children:"Format:"}),m.jsx("span",{className:"text-white ml-2",children:"WAV 44.1kHz"})]})]})]})]},d.id)},h=(d,g)=>{if(!g||g.length===0)return m.jsx("div",{className:"prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:d.replace(/\n/g,"<br>")}});const y=d.split(`
`),_=[];let x=0;for(y.forEach((f,p)=>{if(_.push(m.jsx("div",{className:"mb-2",children:f},`line-${p}`)),x<g.length){const v=g[x];(v.type==="midi"&&(f.toLowerCase().includes("chord")||f.toLowerCase().includes("melody")||f.toLowerCase().includes("bass"))||v.type==="sample"&&(f.toLowerCase().includes("drum")||f.toLowerCase().includes("kick")||f.toLowerCase().includes("snare")))&&(_.push(u(v)),x++)}});x<g.length;)_.push(u(g[x])),x++;return _};return m.jsxs("div",{className:"bg-gray-900 rounded-lg p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsxs("h3",{className:"text-xl font-bold text-white mb-2 flex items-center",children:[m.jsx(Ps,{className:"w-6 h-6 mr-2 text-purple-400"}),"Interactive Production Guide"]}),m.jsx("p",{className:"text-gray-400 text-sm",children:"This guide includes playable MIDI patterns and downloadable samples to help you create your track."})]}),m.jsx("div",{className:"text-gray-200 leading-relaxed",children:h(t,e)}),e.length>0&&m.jsxs("div",{className:"mt-6 p-4 bg-gray-800 rounded-lg border border-purple-500/30",children:[m.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Interactive Elements Summary"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{className:"text-gray-300",children:[m.jsx("span",{className:"text-purple-400",children:"MIDI Files:"})," ",e.filter(d=>d.type==="midi").length]}),m.jsxs("div",{className:"text-gray-300",children:[m.jsx("span",{className:"text-blue-400",children:"Audio Samples:"})," ",e.filter(d=>d.type==="sample").length]})]}),m.jsx("p",{className:"text-gray-400 text-xs mt-2",children:"Click play buttons to preview, download buttons to save files to your computer."})]})]})},$S=({currentProject:t,onSaveProject:e})=>{const[n,s]=K.useState({name:"",genre:[],vibe:[],artistReference:"",daw:"",plugins:"",instruments:"",tempo:120,key:"C Major"}),[r,i]=K.useState(""),[o,a]=K.useState([]),[l,c]=K.useState(!1),[u,h]=K.useState(!1);K.useEffect(()=>{t&&(s(t),i(t.guidebook||""),a(t.interactiveElements||[]))},[t]);const d=(f,p)=>{s(v=>({...v,[f]:p}))},g=(f,p)=>{s(v=>({...v,[f]:v[f].includes(p)?v[f].filter(k=>k!==p):[...v[f],p]}))},y=async()=>{if(!n.name.trim()){alert("Please enter a project name");return}c(!0);try{const f=await Ym.generateGuidebook(n);i(f);const p=await WS.generateInteractiveGuidebook(f,n);a(p);const v={...n,id:(t==null?void 0:t.id)||Date.now().toString(),guidebook:f,interactiveElements:p,lastModified:new Date().toISOString()};e(v)}catch(f){console.error("Error generating guidebook:",f),alert("Failed to generate guidebook. Please try again.")}finally{c(!1)}},_=()=>{if(!n.name.trim()){alert("Please enter a project name");return}const f={...n,id:(t==null?void 0:t.id)||Date.now().toString(),guidebook:r,lastModified:new Date().toISOString()};e(f),alert("Project saved successfully!")},x=()=>{if(!r){alert("No guidebook to download");return}const f=new Blob([r],{type:"text/markdown"}),p=URL.createObjectURL(f),v=document.createElement("a");v.href=p,v.download=`${n.name||"guidebook"}.md`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(p)};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"card p-6",children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[m.jsx(ch,{className:"w-6 h-6 text-purple-400"}),"Production Guidebook Generator"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Project Name *"}),m.jsx("input",{type:"text",value:n.name,onChange:f=>d("name",f.target.value),className:"input-field w-full",placeholder:"Enter your project name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre(s)"}),m.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-700 rounded-lg p-3 space-y-2",children:e_.map(f=>m.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:n.genre.includes(f),onChange:()=>g("genre",f),className:"rounded text-purple-600"}),m.jsx("span",{className:"text-sm text-gray-300",children:f})]},f))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Vibe(s)"}),m.jsx("div",{className:"max-h-40 overflow-y-auto bg-gray-700 rounded-lg p-3 space-y-2",children:t_.map(f=>m.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:n.vibe.includes(f),onChange:()=>g("vibe",f),className:"rounded text-purple-600"}),m.jsx("span",{className:"text-sm text-gray-300",children:f})]},f))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Artist Reference"}),m.jsx("input",{type:"text",value:n.artistReference,onChange:f=>d("artistReference",f.target.value),className:"input-field w-full",placeholder:"e.g., Deadmau5, Porter Robinson"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"DAW"}),m.jsxs("select",{value:n.daw,onChange:f=>d("daw",f.target.value),className:"input-field w-full",children:[m.jsx("option",{value:"",children:"Select DAW"}),n_.map(f=>m.jsx("option",{value:f,children:f},f))]})]}),m.jsx("div",{className:"md:col-span-2",children:m.jsxs("button",{onClick:()=>h(!u),className:"text-purple-400 hover:text-purple-300 transition-colors",children:[u?"Hide":"Show"," Advanced Settings"]})}),u&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tempo (BPM)"}),m.jsx("input",{type:"number",value:n.tempo,onChange:f=>d("tempo",parseInt(f.target.value)),className:"input-field w-full",min:"60",max:"200"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),m.jsx("input",{type:"text",value:n.key,onChange:f=>d("key",f.target.value),className:"input-field w-full",placeholder:"e.g., C Major, A Minor"})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Available Plugins"}),m.jsx("textarea",{value:n.plugins,onChange:f=>d("plugins",f.target.value),className:"input-field w-full h-20",placeholder:"List your available plugins (e.g., Serum, FabFilter Pro-Q, Valhalla VintageVerb)"})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Available Instruments"}),m.jsx("textarea",{value:n.instruments,onChange:f=>d("instruments",f.target.value),className:"input-field w-full h-20",placeholder:"List your available instruments and hardware"})]})]})]}),m.jsxs("div",{className:"flex flex-wrap gap-4 mt-6",children:[m.jsxs("button",{onClick:y,disabled:l||!n.name.trim(),className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[l?m.jsx(uh,{className:"w-4 h-4 animate-spin"}):m.jsx(Xv,{className:"w-4 h-4"}),l?"Generating...":"Generate Guidebook"]}),m.jsxs("button",{onClick:_,disabled:!n.name.trim(),className:"btn-secondary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx(Qv,{className:"w-4 h-4"}),"Save Project"]}),r&&m.jsxs("button",{onClick:x,className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 flex items-center gap-2",children:[m.jsx(Ut,{className:"w-4 h-4"}),"Download Guidebook"]})]})]}),r&&m.jsx("div",{className:"card p-6",children:m.jsx(GS,{content:r,interactiveElements:o})})]})},HS=({currentProject:t,onSaveProject:e})=>{const[n,s]=K.useState({key:"C Major",tempo:120,timeSignature:[4,4],chordProgression:"I-V-vi-IV",genre:"Electronic",bars:4}),[r,i]=K.useState(null),[o,a]=K.useState(!1),[l,c]=K.useState(!1);K.useState("all"),K.useEffect(()=>{t&&s(p=>{var v;return{...p,key:t.key||"C Major",tempo:t.tempo||120,genre:((v=t.genre)==null?void 0:v[0])||"Electronic"}})},[t]);const u=(p,v)=>{s(k=>({...k,[p]:v}))},h=async()=>{a(!0);try{const p=await Ym.generateMidiSuggestions(n);if(i(p),t&&e){const v={...t,midiPatterns:p,midiSettings:n,lastModified:new Date().toISOString()};e(v)}}catch(p){console.error("Error generating MIDI patterns:",p),alert("Failed to generate MIDI patterns. Please try again.")}finally{a(!1)}},d=async(p="all")=>{if(r)try{await Le.initialize();let v={};p==="all"?v=r:v[p]=r[p],await Le.playMidiPattern(v,{tempo:n.tempo,loop:!0}),c(!0)}catch(v){console.error("Error playing pattern:",v),alert("Failed to play pattern. Please try again.")}},g=()=>{Le.stop(),c(!1)},y=(p="all")=>{if(!r)return;let v={},k="";p==="all"?(v=r,k=`${(t==null?void 0:t.name)||"track"}-full.mid`):(v[p]=r[p],k=`${(t==null?void 0:t.name)||"track"}-${p}.mid`);const w=wn.generateMidiFile(v,{tempo:n.tempo,timeSignature:n.timeSignature,key:n.key.split(" ")[0],trackName:(t==null?void 0:t.name)||"Generated Track"});wn.downloadMidi(w,k)},_=()=>{if(!(r!=null&&r.drums))return;const p=wn.generateDrumMidi(r.drums,{tempo:n.tempo,bars:n.bars});wn.downloadMidi(p,`${(t==null?void 0:t.name)||"track"}-drums.mid`)},x=()=>{const p=r_[n.genre];return p?`${p[0]}-${p[1]} BPM`:"60-200 BPM"},f=()=>ic[n.genre]||ic.Pop;return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"card p-6",children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[m.jsx(Ps,{className:"w-6 h-6 text-purple-400"}),"MIDI Pattern Generator"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key"}),m.jsx("select",{value:n.key,onChange:p=>u("key",p.target.value),className:"input-field w-full",children:s_.map(p=>m.jsx("option",{value:p,children:p},p))})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Tempo (BPM)",m.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["Suggested: ",x()]})]}),m.jsx("input",{type:"number",value:n.tempo,onChange:p=>u("tempo",parseInt(p.target.value)),className:"input-field w-full",min:"60",max:"200"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Time Signature"}),m.jsxs("select",{value:`${n.timeSignature[0]}/${n.timeSignature[1]}`,onChange:p=>{const[v,k]=p.target.value.split("/").map(Number);u("timeSignature",[v,k])},className:"input-field w-full",children:[m.jsx("option",{value:"4/4",children:"4/4"}),m.jsx("option",{value:"3/4",children:"3/4"}),m.jsx("option",{value:"6/8",children:"6/8"}),m.jsx("option",{value:"7/8",children:"7/8"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Chord Progression"}),m.jsx("select",{value:n.chordProgression,onChange:p=>u("chordProgression",p.target.value),className:"input-field w-full",children:f().map(p=>m.jsx("option",{value:p,children:p},p))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Genre"}),m.jsx("select",{value:n.genre,onChange:p=>u("genre",p.target.value),className:"input-field w-full",children:Object.keys(ic).map(p=>m.jsx("option",{value:p,children:p},p))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Bars"}),m.jsx("input",{type:"number",value:n.bars,onChange:p=>u("bars",parseInt(p.target.value)),className:"input-field w-full",min:"1",max:"16"})]})]}),m.jsx("div",{className:"mt-6",children:m.jsxs("button",{onClick:h,disabled:o,className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[o?m.jsx(uh,{className:"w-4 h-4 animate-spin"}):m.jsx(Ps,{className:"w-4 h-4"}),o?"Generating...":"Generate MIDI Patterns"]})})]}),r&&m.jsxs("div",{className:"card p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white",children:"Generated Patterns"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:l?g:()=>d("all"),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${l?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:[l?m.jsx(xl,{className:"w-4 h-4"}):m.jsx(Gn,{className:"w-4 h-4"}),l?"Stop":"Play All"]}),m.jsxs("button",{onClick:()=>y("all"),className:"btn-secondary flex items-center gap-2",children:[m.jsx(Ut,{className:"w-4 h-4"}),"Download All"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.chords&&m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h4",{className:"font-semibold text-white",children:"Chord Pattern"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>d("chords"),className:"text-green-400 hover:text-green-300 transition-colors",children:m.jsx(Gn,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>y("chords"),className:"text-blue-400 hover:text-blue-300 transition-colors",children:m.jsx(Ut,{className:"w-4 h-4"})})]})]}),m.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[r.chords.slice(0,8).map((p,v)=>m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:p.note}),m.jsxs("span",{children:[p.time,"s"]})]},v)),r.chords.length>8&&m.jsxs("div",{className:"text-gray-400",children:["+",r.chords.length-8," more notes..."]})]})]}),r.bass&&m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h4",{className:"font-semibold text-white",children:"Bass Pattern"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>d("bass"),className:"text-green-400 hover:text-green-300 transition-colors",children:m.jsx(Gn,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>y("bass"),className:"text-blue-400 hover:text-blue-300 transition-colors",children:m.jsx(Ut,{className:"w-4 h-4"})})]})]}),m.jsx("div",{className:"text-sm text-gray-300 space-y-1",children:r.bass.slice(0,8).map((p,v)=>m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:p.note}),m.jsxs("span",{children:[p.time,"s"]})]},v))})]}),r.melody&&m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h4",{className:"font-semibold text-white",children:"Melody Pattern"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>d("melody"),className:"text-green-400 hover:text-green-300 transition-colors",children:m.jsx(Gn,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>y("melody"),className:"text-blue-400 hover:text-blue-300 transition-colors",children:m.jsx(Ut,{className:"w-4 h-4"})})]})]}),m.jsx("div",{className:"text-sm text-gray-300 space-y-1",children:r.melody.slice(0,8).map((p,v)=>m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:p.note}),m.jsxs("span",{children:[p.time,"s"]})]},v))})]}),r.drums&&m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h4",{className:"font-semibold text-white",children:"Drum Pattern"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>d("drums"),className:"text-green-400 hover:text-green-300 transition-colors",children:m.jsx(Gn,{className:"w-4 h-4"})}),m.jsx("button",{onClick:_,className:"text-blue-400 hover:text-blue-300 transition-colors",children:m.jsx(Ut,{className:"w-4 h-4"})})]})]}),m.jsx("div",{className:"text-sm text-gray-300 space-y-2",children:Object.entries(r.drums).map(([p,v])=>m.jsxs("div",{children:[m.jsxs("span",{className:"font-medium capitalize",children:[p,":"]}),m.jsxs("span",{className:"ml-2",children:[v.slice(0,4).map(k=>k.time).join(", "),v.length>4&&"..."]})]},p))})]})]})]})]})},YS=({currentProject:t,onSaveProject:e})=>{const[n,s]=K.useState({type:"kick",duration:2,frequency:440,effects:{reverb:0,delay:0,distortion:0,filter:1e3}}),[r,i]=K.useState([]),[o,a]=K.useState(!1),[l,c]=K.useState(null),u=[{id:"kick",name:"Kick Drum",description:"Deep, punchy kick drums"},{id:"snare",name:"Snare Drum",description:"Crisp snare hits"},{id:"hihat",name:"Hi-Hat",description:"Sharp hi-hat sounds"},{id:"bass",name:"Bass",description:"Sub bass tones"},{id:"lead",name:"Lead Synth",description:"Lead synthesizer sounds"},{id:"pad",name:"Pad",description:"Atmospheric pad sounds"},{id:"pluck",name:"Pluck",description:"Plucked string sounds"}];K.useEffect(()=>{t!=null&&t.samples&&i(t.samples)},[t]);const h=(p,v)=>{s(k=>({...k,[p]:v}))},d=(p,v)=>{s(k=>({...k,effects:{...k.effects,[p]:v}}))},g=async()=>{a(!0);try{await Le.initialize(),Object.entries(n.effects).forEach(([w,S])=>{Le.setEffectParameter(w,"wet",S)});const p=await Le.generateWavSample(n.type,{duration:n.duration,frequency:n.frequency}),v={id:Date.now().toString(),type:n.type,url:p,settings:{...n},name:`${n.type}-${Date.now()}`,createdAt:new Date().toISOString()},k=[...r,v];if(i(k),t&&e){const w={...t,samples:k,lastModified:new Date().toISOString()};e(w)}}catch(p){console.error("Error generating sample:",p),alert("Failed to generate sample. Please try again.")}finally{a(!1)}},y=async p=>{try{if(l===p.id){Le.stop(),c(null);return}const v=new Audio(p.url);v.play(),c(p.id),v.onended=()=>{c(null)}}catch(v){console.error("Error playing sample:",v)}},_=p=>{Le.downloadWavSample(p.url,`${p.name}.wav`)},x=p=>{const v=r.filter(k=>k.id!==p);if(i(v),t&&e){const k={...t,samples:v,lastModified:new Date().toISOString()};e(k)}},f=()=>{r.forEach((p,v)=>{setTimeout(()=>{_(p)},v*500)})};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"card p-6",children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[m.jsx(Ta,{className:"w-6 h-6 text-purple-400"}),"WAV Sample Generator"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Sample Type"}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:u.map(p=>m.jsxs("button",{onClick:()=>h("type",p.id),className:`p-3 rounded-lg border transition-all ${n.type===p.id?"border-purple-500 bg-purple-500/20 text-white":"border-gray-600 bg-gray-700 text-gray-300 hover:border-gray-500"}`,children:[m.jsx("div",{className:"font-medium",children:p.name}),m.jsx("div",{className:"text-xs text-gray-400 mt-1",children:p.description})]},p.id))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (seconds)"}),m.jsx("input",{type:"range",min:"0.5",max:"10",step:"0.5",value:n.duration,onChange:p=>h("duration",parseFloat(p.target.value)),className:"w-full"}),m.jsxs("div",{className:"text-center text-sm text-gray-400 mt-1",children:[n.duration,"s"]})]}),["bass","lead","pad","pluck"].includes(n.type)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Frequency (Hz)"}),m.jsx("input",{type:"range",min:"80",max:"2000",step:"10",value:n.frequency,onChange:p=>h("frequency",parseInt(p.target.value)),className:"w-full"}),m.jsxs("div",{className:"text-center text-sm text-gray-400 mt-1",children:[n.frequency," Hz"]})]}),m.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Effects"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Reverb"}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:n.effects.reverb,onChange:p=>d("reverb",parseFloat(p.target.value)),className:"w-full"}),m.jsxs("div",{className:"text-center text-xs text-gray-400",children:[Math.round(n.effects.reverb*100),"%"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Delay"}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:n.effects.delay,onChange:p=>d("delay",parseFloat(p.target.value)),className:"w-full"}),m.jsxs("div",{className:"text-center text-xs text-gray-400",children:[Math.round(n.effects.delay*100),"%"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Distortion"}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:n.effects.distortion,onChange:p=>d("distortion",parseFloat(p.target.value)),className:"w-full"}),m.jsxs("div",{className:"text-center text-xs text-gray-400",children:[Math.round(n.effects.distortion*100),"%"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Filter (Hz)"}),m.jsx("input",{type:"range",min:"100",max:"5000",step:"100",value:n.effects.filter,onChange:p=>d("filter",parseInt(p.target.value)),className:"w-full"}),m.jsxs("div",{className:"text-center text-xs text-gray-400",children:[n.effects.filter," Hz"]})]})]})]})]}),m.jsx("div",{className:"mt-6",children:m.jsxs("button",{onClick:g,disabled:o,className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[o?m.jsx(uh,{className:"w-4 h-4 animate-spin"}):m.jsx(Ta,{className:"w-4 h-4"}),o?"Generating...":"Generate Sample"]})})]}),r.length>0&&m.jsxs("div",{className:"card p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h3",{className:"text-xl font-bold text-white",children:"Generated Samples"}),m.jsxs("button",{onClick:f,className:"btn-secondary flex items-center gap-2",children:[m.jsx(Ut,{className:"w-4 h-4"}),"Download All"]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(p=>m.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{children:[m.jsxs("h4",{className:"font-medium text-white capitalize",children:[p.type," Sample"]}),m.jsxs("p",{className:"text-xs text-gray-400",children:[p.settings.duration,"s • ",p.settings.frequency,"Hz"]})]}),m.jsx("button",{onClick:()=>x(p.id),className:"text-red-400 hover:text-red-300 transition-colors text-sm",children:"Delete"})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>y(p),className:`flex items-center gap-1 px-3 py-1 rounded text-sm transition-colors ${l===p.id?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:[l===p.id?m.jsx(xl,{className:"w-3 h-3"}):m.jsx(Gn,{className:"w-3 h-3"}),l===p.id?"Stop":"Play"]}),m.jsxs("button",{onClick:()=>_(p),className:"flex items-center gap-1 px-3 py-1 rounded text-sm bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:[m.jsx(Ut,{className:"w-3 h-3"}),"Download"]})]}),m.jsx("div",{className:"mt-3 text-xs text-gray-400",children:m.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[m.jsxs("span",{children:["Reverb: ",Math.round(p.settings.effects.reverb*100),"%"]}),m.jsxs("span",{children:["Delay: ",Math.round(p.settings.effects.delay*100),"%"]}),m.jsxs("span",{children:["Distortion: ",Math.round(p.settings.effects.distortion*100),"%"]}),m.jsxs("span",{children:["Filter: ",p.settings.effects.filter,"Hz"]})]})})]},p.id))})]})]})},QS=({currentProject:t})=>{var g;const[e,n]=K.useState(!1),[s,r]=K.useState(.7),[i,o]=K.useState(!1),[a,l]=K.useState(0);K.useState(0),K.useEffect(()=>(Le.initialize(),()=>{Le.stop()}),[]),K.useEffect(()=>{n(Le.isPlaying)},[Le.isPlaying]);const c=async()=>{if(!(t!=null&&t.midiPatterns)){alert("No MIDI patterns available. Generate some patterns first!");return}try{e?(Le.pause(),n(!1)):(await Le.playMidiPattern(t.midiPatterns,{tempo:t.tempo||120,loop:!0}),n(!0))}catch(y){console.error("Error controlling playback:",y)}},u=()=>{Le.stop(),n(!1),l(0)},h=y=>{r(y)},d=()=>{o(!i)};return t?m.jsx("div",{className:"fixed bottom-4 left-4 right-4 max-w-4xl mx-auto",children:m.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-lg border border-gray-700 p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:"flex items-center gap-4",children:m.jsxs("div",{children:[m.jsx("h4",{className:"text-white font-medium",children:t.name}),m.jsxs("p",{className:"text-gray-400 text-sm",children:[(g=t.genre)==null?void 0:g.join(", ")," • ",t.tempo," BPM"]})]})}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:c,disabled:!t.midiPatterns,className:`p-2 rounded-full transition-colors ${t.midiPatterns?"bg-purple-600 hover:bg-purple-700 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:e?m.jsx(Wm,{className:"w-5 h-5"}):m.jsx(Gn,{className:"w-5 h-5"})}),m.jsx("button",{onClick:u,className:"p-2 rounded-full bg-gray-600 hover:bg-gray-700 text-white transition-colors",children:m.jsx(xl,{className:"w-5 h-5"})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:d,className:"text-gray-400 hover:text-white transition-colors",children:i?m.jsx(Jv,{className:"w-4 h-4"}):m.jsx(Ta,{className:"w-4 h-4"})}),m.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:i?0:s,onChange:y=>h(parseFloat(y.target.value)),className:"w-20"})]})]}),m.jsx("div",{className:"text-right",children:m.jsx("div",{className:"text-sm text-gray-400",children:t.midiPatterns?m.jsxs("div",{className:"flex gap-2",children:[t.midiPatterns.chords&&m.jsx("span",{className:"bg-blue-600 px-2 py-1 rounded text-xs",children:"Chords"}),t.midiPatterns.bass&&m.jsx("span",{className:"bg-green-600 px-2 py-1 rounded text-xs",children:"Bass"}),t.midiPatterns.melody&&m.jsx("span",{className:"bg-purple-600 px-2 py-1 rounded text-xs",children:"Melody"}),t.midiPatterns.drums&&m.jsx("span",{className:"bg-red-600 px-2 py-1 rounded text-xs",children:"Drums"})]}):m.jsx("span",{children:"No patterns generated"})})})]}),e&&m.jsx("div",{className:"mt-3",children:m.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:m.jsx("div",{className:"bg-purple-600 h-1 rounded-full transition-all duration-1000",style:{width:"0%"}})})})]})}):null},KS=({projects:t,currentProject:e,onLoadProject:n,onDeleteProject:s,onSaveProject:r})=>{const[i,o]=K.useState(""),[a,l]=K.useState("lastModified"),[c,u]=K.useState("all"),h=t.filter(x=>{var v,k;const f=x.name.toLowerCase().includes(i.toLowerCase())||((v=x.genre)==null?void 0:v.some(w=>w.toLowerCase().includes(i.toLowerCase()))),p=c==="all"||c==="withMidi"&&x.midiPatterns||c==="withSamples"&&((k=x.samples)==null?void 0:k.length)>0||c==="withGuidebook"&&x.guidebook;return f&&p}).sort((x,f)=>{var p,v;switch(a){case"name":return x.name.localeCompare(f.name);case"genre":return(((p=x.genre)==null?void 0:p[0])||"").localeCompare(((v=f.genre)==null?void 0:v[0])||"");case"tempo":return(x.tempo||0)-(f.tempo||0);case"lastModified":default:return new Date(f.lastModified||0)-new Date(x.lastModified||0)}}),d=x=>{const f={...x,exportedAt:new Date().toISOString(),version:"1.0"},p=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),v=URL.createObjectURL(p),k=document.createElement("a");k.href=v,k.download=`${x.name}.json`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(v)},g=x=>{const f=x.target.files[0];if(!f)return;const p=new FileReader;p.onload=v=>{try{const w={...JSON.parse(v.target.result),id:Date.now().toString(),lastModified:new Date().toISOString()};r(w),alert("Project imported successfully!")}catch(k){console.error("Error importing project:",k),alert("Failed to import project. Please check the file format.")}},p.readAsText(f)},y=x=>x?new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",_=x=>{var p;const f=[];return x.guidebook&&f.push("Guidebook"),x.midiPatterns&&f.push("MIDI"),((p=x.samples)==null?void 0:p.length)>0&&f.push("Samples"),f};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"card p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[m.jsx(Yd,{className:"w-6 h-6 text-purple-400"}),"Project Manager"]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("input",{type:"file",accept:".json",onChange:g,className:"hidden",id:"import-project"}),m.jsx("label",{htmlFor:"import-project",className:"btn-secondary cursor-pointer",children:"Import Project"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search Projects"}),m.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),className:"input-field w-full",placeholder:"Search by name or genre..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Sort By"}),m.jsxs("select",{value:a,onChange:x=>l(x.target.value),className:"input-field w-full",children:[m.jsx("option",{value:"lastModified",children:"Last Modified"}),m.jsx("option",{value:"name",children:"Name"}),m.jsx("option",{value:"genre",children:"Genre"}),m.jsx("option",{value:"tempo",children:"Tempo"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Filter By"}),m.jsxs("select",{value:c,onChange:x=>u(x.target.value),className:"input-field w-full",children:[m.jsx("option",{value:"all",children:"All Projects"}),m.jsx("option",{value:"withGuidebook",children:"With Guidebook"}),m.jsx("option",{value:"withMidi",children:"With MIDI"}),m.jsx("option",{value:"withSamples",children:"With Samples"})]})]})]})]}),m.jsx("div",{className:"space-y-4",children:h.length===0?m.jsxs("div",{className:"card p-8 text-center",children:[m.jsx(Yd,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:t.length===0?"No Projects Yet":"No Projects Found"}),m.jsx("p",{className:"text-gray-500",children:t.length===0?"Create your first project using the Guidebook Generator":"Try adjusting your search or filter criteria"})]}):h.map(x=>{var f;return m.jsx("div",{className:`card p-6 transition-all duration-200 ${(e==null?void 0:e.id)===x.id?"ring-2 ring-purple-500 bg-purple-900/20":"hover:bg-gray-750"}`,children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("h3",{className:"text-xl font-semibold text-white",children:x.name}),(e==null?void 0:e.id)===x.id&&m.jsx("span",{className:"bg-purple-600 text-white text-xs px-2 py-1 rounded",children:"Current"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400 text-sm",children:"Genre:"}),m.jsx("p",{className:"text-white",children:((f=x.genre)==null?void 0:f.join(", "))||"Not specified"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400 text-sm",children:"Tempo:"}),m.jsxs("p",{className:"text-white",children:[x.tempo||"Not set"," BPM"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400 text-sm",children:"Key:"}),m.jsx("p",{className:"text-white",children:x.key||"Not set"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-400 text-sm",children:"Last Modified:"}),m.jsx("p",{className:"text-white text-sm",children:y(x.lastModified)})]})]}),m.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[m.jsx("span",{className:"text-gray-400 text-sm",children:"Features:"}),_(x).map(p=>m.jsxs("span",{className:"bg-gray-700 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[p==="Guidebook"&&m.jsx(ch,{className:"w-3 h-3"}),p==="MIDI"&&m.jsx(Ps,{className:"w-3 h-3"}),p==="Samples"&&m.jsx(Ut,{className:"w-3 h-3"}),p]},p)),_(x).length===0&&m.jsx("span",{className:"text-gray-500 text-sm",children:"No content generated yet"})]}),x.vibe&&x.vibe.length>0&&m.jsxs("div",{className:"flex flex-wrap gap-1",children:[x.vibe.slice(0,5).map(p=>m.jsx("span",{className:"bg-purple-600/20 text-purple-300 text-xs px-2 py-1 rounded",children:p},p)),x.vibe.length>5&&m.jsxs("span",{className:"text-gray-400 text-xs px-2 py-1",children:["+",x.vibe.length-5," more"]})]})]}),m.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[m.jsx("button",{onClick:()=>n(x),className:"btn-primary text-sm px-3 py-1",children:"Load"}),m.jsx("button",{onClick:()=>d(x),className:"btn-secondary text-sm px-3 py-1",children:"Export"}),m.jsx("button",{onClick:()=>{confirm(`Are you sure you want to delete "${x.name}"?`)&&s(x.id)},className:"bg-red-600 hover:bg-red-700 text-white text-sm px-3 py-1 rounded transition-colors",children:m.jsx(Zv,{className:"w-3 h-3"})})]})]})},x.id)})}),t.length>0&&m.jsxs("div",{className:"card p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Statistics"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-purple-400",children:t.length}),m.jsx("div",{className:"text-gray-400 text-sm",children:"Total Projects"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-blue-400",children:t.filter(x=>x.guidebook).length}),m.jsx("div",{className:"text-gray-400 text-sm",children:"With Guidebooks"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-green-400",children:t.filter(x=>x.midiPatterns).length}),m.jsx("div",{className:"text-gray-400 text-sm",children:"With MIDI"})]}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:t.filter(x=>{var f;return((f=x.samples)==null?void 0:f.length)>0}).length}),m.jsx("div",{className:"text-gray-400 text-sm",children:"With Samples"})]})]})]})]})};function XS(){var u;const[t,e]=K.useState("guidebook"),[n,s]=K.useState(null),[r,i]=K.useState([]);K.useEffect(()=>{const h=localStorage.getItem("musicProducerProjects");h&&i(JSON.parse(h))},[]);const o=h=>{const d=[...r],g=d.findIndex(y=>y.id===h.id);g>=0?d[g]=h:d.push(h),i(d),s(h),localStorage.setItem("musicProducerProjects",JSON.stringify(d))},a=h=>{s(h)},l=h=>{const d=r.filter(g=>g.id!==h);i(d),localStorage.setItem("musicProducerProjects",JSON.stringify(d)),n&&n.id===h&&s(null)},c=[{id:"guidebook",label:"Guidebook",icon:ch},{id:"midi",label:"MIDI Generator",icon:Ps},{id:"samples",label:"Sample Generator",icon:Ut},{id:"projects",label:"Projects",icon:Kv}];return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs("header",{className:"text-center mb-8",children:[m.jsxs("h1",{className:"text-4xl font-bold text-white mb-2 flex items-center justify-center gap-3",children:[m.jsx(Ps,{className:"w-10 h-10 text-purple-400"}),"Music Producer Suite"]}),m.jsx("p",{className:"text-gray-300 text-lg",children:"AI-powered guidebooks, MIDI generation, and sample creation for music producers"})]}),m.jsx("nav",{className:"flex justify-center mb-8",children:m.jsx("div",{className:"bg-gray-800 rounded-lg p-1 flex gap-1",children:c.map(h=>{const d=h.icon;return m.jsxs("button",{onClick:()=>e(h.id),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-all duration-200 ${t===h.id?"bg-purple-600 text-white shadow-lg":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[m.jsx(d,{className:"w-4 h-4"}),h.label]},h.id)})})}),n&&t!=="projects"&&m.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 border border-gray-700",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Current Project: ",n.name]}),m.jsxs("p",{className:"text-gray-400 text-sm",children:[(u=n.genre)==null?void 0:u.join(", ")," • ",n.tempo," BPM • ",n.key]})]}),m.jsx("button",{onClick:()=>s(null),className:"text-gray-400 hover:text-white transition-colors",children:m.jsx(xl,{className:"w-5 h-5"})})]})}),m.jsxs("main",{className:"max-w-6xl mx-auto",children:[t==="guidebook"&&m.jsx($S,{currentProject:n,onSaveProject:o}),t==="midi"&&m.jsx(HS,{currentProject:n,onSaveProject:o}),t==="samples"&&m.jsx(YS,{currentProject:n,onSaveProject:o}),t==="projects"&&m.jsx(KS,{projects:r,currentProject:n,onLoadProject:a,onDeleteProject:l,onSaveProject:o})]}),m.jsx(QS,{currentProject:n}),m.jsx("footer",{className:"text-center mt-12 text-gray-400",children:m.jsx("p",{children:"Music Producer Suite - Empowering creativity through AI"})})]})})}uc.createRoot(document.getElementById("root")).render(m.jsx(R0.StrictMode,{children:m.jsx(XS,{})}));
